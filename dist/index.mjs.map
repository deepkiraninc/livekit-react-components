{"version":3,"sources":["../src/components/controls/ClearPinButton.tsx","../src/utils.ts","../src/mergeProps.ts","../src/context/chat-context.ts","../src/context/layout-context.ts","../src/context/pin-context.ts","../src/context/participant-context.ts","../src/context/track-context.ts","../src/context/room-context.ts","../src/components/ConnectionState.tsx","../src/hooks/internal/useObservableState.ts","../src/components/controls/ChatToggle.tsx","../src/components/controls/ShareLinkToggle.tsx","../src/components/controls/DisconnectButton.tsx","../src/components/controls/FocusToggle.tsx","../src/assets/icons/ChatIcon.tsx","../src/assets/icons/Chevron.tsx","../src/assets/icons/FocusToggleIcon.tsx","../src/assets/icons/LeaveIcon.tsx","../src/assets/icons/QualityExcellentIcon.tsx","../src/assets/icons/QualityGoodIcon.tsx","../src/assets/icons/QualityPoorIcon.tsx","../src/assets/icons/QualityUnknownIcon.tsx","../src/assets/icons/ScreenShareIcon.tsx","../src/assets/icons/ScreenShareStopIcon.tsx","../src/assets/icons/SpinnerIcon.tsx","../src/assets/icons/UnfocusToggleIcon.tsx","../src/components/controls/MediaDeviceSelect.tsx","../src/components/controls/StartAudio.tsx","../src/components/controls/TrackToggle.tsx","../src/assets/icons/util.tsx","../src/assets/icons/tl/CameraDisabledIcon.tsx","../src/assets/icons/tl/CameraIcon.tsx","../src/assets/icons/tl/MicDisabledIcon.tsx","../src/assets/icons/tl/MicIcon.tsx","../src/components/layout/FocusLayout.tsx","../src/components/participant/ParticipantTile.tsx","../src/components/participant/ConnectionQualityIndicator.tsx","../src/components/participant/ParticipantName.tsx","../src/components/participant/TrackMutedIndicator.tsx","../src/hooks/useDataChannel.ts","../src/hooks/internal/useResizeObserver.ts","../src/hooks/internal/useMediaQuery.ts","../src/hooks/useGridLayout.ts","../src/hooks/useIsMuted.ts","../src/hooks/useIsSpeaking.ts","../src/hooks/useLocalParticipant.ts","../src/hooks/useLocalParticipantPermissions.ts","../src/hooks/useMediaTrackBySourceOrName.ts","../src/hooks/useMediaTrack.ts","../src/hooks/useMediaTrackByName.ts","../src/hooks/usePagination.ts","../src/hooks/useVisualStableUpdate.ts","../src/hooks/useParticipantPermissions.ts","../src/hooks/useRemoteParticipants.ts","../src/hooks/useParticipants.ts","../src/hooks/useRemoteParticipant.ts","../src/hooks/useSortedParticipants.ts","../src/hooks/useSpeakingParticipants.ts","../src/hooks/useToken.ts","../src/hooks/useTracks.ts","../src/hooks/usePinnedTracks.ts","../src/hooks/useSwipe.ts","../src/components/participant/VideoTrack.tsx","../src/components/participant/AudioTrack.tsx","../src/components/participant/ParticipantNamePlaceholder.tsx","../src/components/layout/GridLayout.tsx","../src/components/TrackLoop.tsx","../src/components/controls/PaginationControl.tsx","../src/components/controls/PaginationIndicator.tsx","../src/components/layout/CarouselLayout.tsx","../src/components/layout/LayoutContextProvider.tsx","../src/components/LiveKitRoom.tsx","../src/components/participant/AudioVisualizer.tsx","../src/components/ParticipantLoop.tsx","../src/components/RoomAudioRenderer.tsx","../src/components/RoomName.tsx","../src/components/Toast.tsx","../src/components/participant/ParticipantAudioTile.tsx","../src/prefabs/Chat.tsx","../src/components/ChatEntry.tsx","../src/prefabs/PreJoin.tsx","../src/prefabs/MediaDeviceMenu.tsx","../src/assets/images/ParticipantPlaceholder.tsx","../src/prefabs/VideoConference.tsx","../src/prefabs/ControlBar.tsx","../src/components/controls/UserToggle.tsx","../src/assets/icons/InviteIcon.tsx","../src/assets/icons/UsersIcon.tsx","../src/prefabs/ShareLink.tsx","../src/prefabs/Users.tsx","../src/components/participant/ParticipantList.tsx","../src/components/ToggleSwitch.tsx","../src/assets/icons/ApproveIcon.tsx","../src/assets/icons/RejectIcon.tsx","../src/prefabs/AudioConference.tsx"],"sourcesContent":["import { setupClearPinButton } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { mergeProps } from '../../utils';\r\nimport { useLayoutContext } from '../../context';\r\n\r\n/** @public */\r\nexport type ClearPinButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n\r\n/** @public */\r\nexport function useClearPinButton(props: ClearPinButtonProps) {\r\n  const { state, dispatch } = useLayoutContext().pin;\r\n\r\n  const buttonProps = React.useMemo(() => {\r\n    const { className } = setupClearPinButton();\r\n    const mergedProps = mergeProps(props, {\r\n      className,\r\n      disabled: !state?.length,\r\n      onClick: () => {\r\n        if (dispatch) dispatch({ msg: 'clear_pin' });\r\n      },\r\n    });\r\n    return mergedProps;\r\n  }, [props, dispatch, state]);\r\n\r\n  return { buttonProps };\r\n}\r\n\r\n/**\r\n * The ClearPinButton is a basic html button with the added ability to signal\r\n * the LiveKitRoom that it should display the grid view again.\r\n *\r\n * @remarks\r\n * This component works only inside a PinContext.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <ClearPinButton>Leave room</ClearPinButton>\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function ClearPinButton(props: ClearPinButtonProps) {\r\n  const { buttonProps } = useClearPinButton(props);\r\n  return <button {...buttonProps}>{props.children}</button>;\r\n}\r\n","import * as React from 'react';\r\nimport { mergeProps as mergePropsReactAria } from './mergeProps';\r\n\r\n/** @internal */\r\nexport function isProp<U extends HTMLElement, T extends React.HTMLAttributes<U>>(\r\n  prop: T | undefined,\r\n): prop is T {\r\n  return prop !== undefined;\r\n}\r\n\r\n/** @internal */\r\nexport function mergeProps<\r\n  U extends HTMLElement,\r\n  T extends Array<React.HTMLAttributes<U> | undefined>,\r\n>(...props: T) {\r\n  return mergePropsReactAria(...props.filter(isProp));\r\n}\r\n\r\n// const merged = mergeProps({ className: 'test', 'data-lk-participant-name': 'my_name' });\r\n\r\n/** @internal */\r\nexport function cloneSingleChild(\r\n  children: React.ReactNode | React.ReactNode[],\r\n  props?: Record<string, any>,\r\n  key?: any,\r\n) {\r\n  return React.Children.map(children, (child) => {\r\n    // Checking isValidElement is the safe way and avoids a typescript\r\n    // error too.\r\n    if (React.isValidElement(child) && React.Children.only(children)) {\r\n      return React.cloneElement(child, { ...props, key });\r\n    }\r\n    return child;\r\n  });\r\n}\r\n","/*\r\n * Copyright 2020 Adobe. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\r\n * OF ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n */\r\n\r\nimport clsx from 'clsx';\r\n\r\n/**\r\n * Calls all functions in the order they were chained with the same arguments.\r\n * @internal\r\n */\r\nexport function chain(...callbacks: any[]): (...args: any[]) => void {\r\n  return (...args: any[]) => {\r\n    for (const callback of callbacks) {\r\n      if (typeof callback === 'function') {\r\n        callback(...args);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\ninterface Props {\r\n  [key: string]: any;\r\n}\r\n\r\n// taken from: https://stackoverflow.com/questions/51603250/typescript-3-parameter-list-intersection-type/51604379#51604379\r\ntype TupleTypes<T> = { [P in keyof T]: T[P] } extends { [key: number]: infer V } ? V : never;\r\ntype UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void\r\n  ? I\r\n  : never;\r\n\r\n/**\r\n * Merges multiple props objects together. Event handlers are chained,\r\n * classNames are combined, and ids are deduplicated - different ids\r\n * will trigger a side-effect and re-render components hooked up with `useId`.\r\n * For all other props, the last prop object overrides all previous ones.\r\n * @param args - Multiple sets of props to merge together.\r\n * @internal\r\n */\r\nexport function mergeProps<T extends Props[]>(...args: T): UnionToIntersection<TupleTypes<T>> {\r\n  // Start with a base clone of the first argument. This is a lot faster than starting\r\n  // with an empty object and adding properties as we go.\r\n  const result: Props = { ...args[0] };\r\n  for (let i = 1; i < args.length; i++) {\r\n    const props = args[i];\r\n    for (const key in props) {\r\n      const a = result[key];\r\n      const b = props[key];\r\n\r\n      // Chain events\r\n      if (\r\n        typeof a === 'function' &&\r\n        typeof b === 'function' &&\r\n        // This is a lot faster than a regex.\r\n        key[0] === 'o' &&\r\n        key[1] === 'n' &&\r\n        key.charCodeAt(2) >= /* 'A' */ 65 &&\r\n        key.charCodeAt(2) <= /* 'Z' */ 90\r\n      ) {\r\n        result[key] = chain(a, b);\r\n\r\n        // Merge classnames, sometimes classNames are empty string which eval to false, so we just need to do a type check\r\n      } else if (\r\n        (key === 'className' || key === 'UNSAFE_className') &&\r\n        typeof a === 'string' &&\r\n        typeof b === 'string'\r\n      ) {\r\n        result[key] = clsx(a, b);\r\n      } else {\r\n        result[key] = b !== undefined ? b : a;\r\n      }\r\n    }\r\n  }\r\n\r\n  return result as UnionToIntersection<TupleTypes<T>>;\r\n}\r\n","import type { WidgetState } from '@livekit/components-core';\r\nimport type * as React from 'react';\r\n\r\n/** @internal */\r\nexport type ChatContextAction =\r\n  | { msg: 'show_chat' }\r\n  | { msg: 'show_invite' }\r\n  | { msg: 'show_users' };\r\n\r\n/** @internal */\r\nexport type ChatContextType = {\r\n  dispatch?: React.Dispatch<ChatContextAction>;\r\n  state?: WidgetState;\r\n};\r\n\r\n/** @internal */\r\nexport function chatReducer(state: WidgetState, action: ChatContextAction): WidgetState {\r\n  if (action.msg && action.msg !== state.showChat) {\r\n    if (action.msg === 'show_chat') {\r\n      return { ...state, showChat: 'show_chat' };\r\n    } else if (action.msg === 'show_invite') {\r\n      return { ...state, showChat: 'show_invite' };\r\n    } else if (action.msg === 'show_users') {\r\n      return { ...state, showChat: 'show_users' };\r\n    } else {\r\n      return { ...state, showChat: null };\r\n    }\r\n  } else {\r\n    return { ...state, showChat: null };\r\n  }\r\n}\r\n","import { PIN_DEFAULT_STATE, WIDGET_DEFAULT_STATE } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport type { PinContextType } from './pin-context';\r\nimport type { ChatContextType } from './chat-context';\r\nimport { chatReducer } from './chat-context';\r\nimport { pinReducer } from './pin-context';\r\n\r\n/** @public */\r\nexport type LayoutContextType = {\r\n  pin: PinContextType;\r\n  widget: ChatContextType;\r\n};\r\n\r\n/** @public */\r\nexport const LayoutContext = React.createContext<LayoutContextType | undefined>(undefined);\r\n\r\n/**\r\n * Ensures that a layout context is provided via context.\r\n * If no layout context is provided, an error is thrown.\r\n * @public\r\n */\r\nexport function useLayoutContext(): LayoutContextType {\r\n  const layoutContext = React.useContext(LayoutContext);\r\n  if (!layoutContext) {\r\n    throw Error('Tried to access LayoutContext context outside a LayoutContextProvider provider.');\r\n  }\r\n  return layoutContext;\r\n}\r\n\r\n/**\r\n * Ensures that a layout context is provided, either via context or explicitly as a parameter.\r\n * If not inside a `LayoutContext` and no layout context is provided, an error is thrown.\r\n * @public\r\n */\r\nexport function useEnsureLayoutContext(layoutContext?: LayoutContextType) {\r\n  const layout = useMaybeLayoutContext();\r\n  layoutContext ??= layout;\r\n  if (!layoutContext) {\r\n    throw Error('Tried to access LayoutContext context outside a LayoutContextProvider provider.');\r\n  }\r\n  return layoutContext;\r\n}\r\n\r\n/** @public */\r\nexport function useCreateLayoutContext(): LayoutContextType {\r\n  const [pinState, pinDispatch] = React.useReducer(pinReducer, PIN_DEFAULT_STATE);\r\n  const [widgetState, widgetDispatch] = React.useReducer(chatReducer, WIDGET_DEFAULT_STATE);\r\n  return {\r\n    pin: { dispatch: pinDispatch, state: pinState },\r\n    widget: { dispatch: widgetDispatch, state: widgetState },\r\n  };\r\n}\r\n\r\n/** @public */\r\nexport function useEnsureCreateLayoutContext(layoutContext?: LayoutContextType): LayoutContextType {\r\n  const [pinState, pinDispatch] = React.useReducer(pinReducer, PIN_DEFAULT_STATE);\r\n  const [widgetState, widgetDispatch] = React.useReducer(chatReducer, WIDGET_DEFAULT_STATE);\r\n\r\n  return (\r\n    layoutContext ?? {\r\n      pin: { dispatch: pinDispatch, state: pinState },\r\n      widget: { dispatch: widgetDispatch, state: widgetState },\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Returns a layout context from the `LayoutContext` if it exists, otherwise `undefined`.\r\n * @public\r\n */\r\nexport function useMaybeLayoutContext(): LayoutContextType | undefined {\r\n  return React.useContext(LayoutContext);\r\n}\r\n","import type { PinState, TrackReference } from '@livekit/components-core';\r\nimport type * as React from 'react';\r\n\r\n/** @internal */\r\nexport type PinAction =\r\n  | {\r\n      msg: 'set_pin';\r\n      trackReference: TrackReference;\r\n    }\r\n  | { msg: 'clear_pin' };\r\n\r\n/** @internal */\r\nexport type PinContextType = {\r\n  dispatch?: React.Dispatch<PinAction>;\r\n  state?: PinState;\r\n};\r\n\r\n/** @internal */\r\nexport function pinReducer(state: PinState, action: PinAction): PinState {\r\n  if (action.msg === 'set_pin') {\r\n    return [action.trackReference];\r\n  } else if (action.msg === 'clear_pin') {\r\n    return [];\r\n  } else {\r\n    return { ...state };\r\n  }\r\n}\r\n","import type { Participant } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useMaybeTrackContext } from './track-context';\r\n\r\n/** @public */\r\nexport const ParticipantContext = React.createContext<Participant | undefined>(undefined);\r\n\r\n/**\r\n * Ensures that a participant is provided via context.\r\n * If not inside a `ParticipantContext`, an error is thrown.\r\n * @public\r\n */\r\nexport function useParticipantContext() {\r\n  const participant = React.useContext(ParticipantContext);\r\n  if (!participant) {\r\n    throw Error('tried to access participant context outside of participant context provider');\r\n  }\r\n  return participant;\r\n}\r\n\r\n/**\r\n * Returns a participant from the `ParticipantContext` if it exists, otherwise `undefined`.\r\n * @public\r\n */\r\nexport function useMaybeParticipantContext() {\r\n  return React.useContext(ParticipantContext);\r\n}\r\n\r\n/**\r\n * Ensures that a participant is provided, either via context or explicitly as a parameter.\r\n * If not inside a `ParticipantContext` and no participant is provided, an error is thrown.\r\n * @public\r\n */\r\nexport function useEnsureParticipant(participant?: Participant) {\r\n  const context = useMaybeParticipantContext();\r\n  const trackContext = useMaybeTrackContext();\r\n  const p = participant ?? context ?? trackContext?.participant;\r\n  if (!p) {\r\n    throw new Error(\r\n      'No participant provided, make sure you are inside a participant context or pass the participant explicitly',\r\n    );\r\n  }\r\n  return p;\r\n}\r\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport * as React from 'react';\r\n\r\n/** @public */\r\nexport const TrackContext = React.createContext<TrackReferenceOrPlaceholder | undefined>(undefined);\r\n\r\n/**\r\n * Ensures that a track reference is provided via context.\r\n * If not inside a `TrackContext`, an error is thrown.\r\n * @public\r\n */\r\nexport function useTrackContext() {\r\n  const trackReference = React.useContext(TrackContext);\r\n  if (!trackReference) {\r\n    throw Error('tried to access track context outside of track context provider');\r\n  }\r\n  return trackReference;\r\n}\r\n\r\n/**\r\n * Returns a track reference from the `TrackContext` if it exists, otherwise `undefined`.\r\n * @public\r\n */\r\nexport function useMaybeTrackContext() {\r\n  return React.useContext(TrackContext);\r\n}\r\n\r\n/**\r\n * Ensures that a track reference is provided, either via context or explicitly as a parameter.\r\n * If not inside a `TrackContext` and no track reference is provided, an error is thrown.\r\n * @public\r\n */\r\nexport function useEnsureTrackReference(track?: TrackReferenceOrPlaceholder) {\r\n  const context = useMaybeTrackContext();\r\n  const trackRef = track ?? context;\r\n  if (!trackRef) {\r\n    throw new Error(\r\n      'No TrackReference provided, make sure you are inside a track context or pass the track reference explicitly',\r\n    );\r\n  }\r\n  return trackRef;\r\n}\r\n","import type { Room } from 'livekit-client';\r\nimport * as React from 'react';\r\n\r\n/** @public */\r\nexport const RoomContext = React.createContext<Room | undefined>(undefined);\r\n\r\n/**\r\n * Ensures that a room is provided via context.\r\n * If no room is provided, an error is thrown.\r\n * @public\r\n */\r\nexport function useRoomContext() {\r\n  const ctx = React.useContext(RoomContext);\r\n  if (!ctx) {\r\n    throw Error('tried to access room context outside of livekit room component');\r\n  }\r\n  return ctx;\r\n}\r\n\r\n/**\r\n * Returns the room context if it exists, otherwise undefined.\r\n * @public\r\n */\r\nexport function useMaybeRoomContext() {\r\n  return React.useContext(RoomContext);\r\n}\r\n\r\n/**\r\n * Ensures that a room is provided, either via context or explicitly as a parameter.\r\n * If no room is provided, an error is thrown.\r\n * @public\r\n */\r\nexport function useEnsureRoom(room?: Room) {\r\n  const context = useMaybeRoomContext();\r\n  const r = room ?? context;\r\n  if (!r) {\r\n    throw new Error(\r\n      'No room provided, make sure you are inside a Room context or pass the room explicitly',\r\n    );\r\n  }\r\n  return r;\r\n}\r\n","import { connectionStateObserver } from '@livekit/components-core';\r\nimport type { Room } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useEnsureRoom } from '../context';\r\nimport { useObservableState } from '../hooks/internal/useObservableState';\r\n\r\n/** @public */\r\nexport interface ConnectionStatusProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  /**\r\n   * The room from which the connection status should be displayed.\r\n   */\r\n  room?: Room;\r\n}\r\n\r\n/**\r\n * The `useConnectionState` hook allows you to simply implement your own `ConnectionState` component.\r\n *\r\n * @example\r\n * ```tsx\r\n * const connectionState = useConnectionState(room);\r\n * ```\r\n * @public\r\n */\r\nexport function useConnectionState(room?: Room) {\r\n  // passed room takes precedence, if not supplied get current room context\r\n  const r = useEnsureRoom(room);\r\n  const observable = React.useMemo(() => connectionStateObserver(r), [r]);\r\n  const connectionState = useObservableState(observable, r.state);\r\n  return connectionState;\r\n}\r\n\r\n/**\r\n * The ConnectionState component displays the connection status of the room in written form.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <ConnectionState />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function ConnectionState({ room, ...props }: ConnectionStatusProps) {\r\n  const connectionState = useConnectionState(room);\r\n  return <div {...props}>{connectionState}</div>;\r\n}\r\n","import * as React from 'react';\r\nimport type { Observable } from 'rxjs';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function useObservableState<T>(observable: Observable<T> | undefined, startWith: T) {\r\n  const [state, setState] = React.useState<T>(startWith);\r\n  React.useEffect(() => {\r\n    // observable state doesn't run in SSR\r\n    if (typeof window === 'undefined' || !observable) return;\r\n    const subscription = observable.subscribe(setState);\r\n    return () => subscription.unsubscribe();\r\n  }, [observable]);\r\n  return state;\r\n}\r\n","import { setupChatToggle } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useLayoutContext } from '../../context';\r\nimport { mergeProps } from '../../utils';\r\n\r\ninterface UseToggleChatProps {\r\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n}\r\n\r\nfunction useToggleChat({ props }: UseToggleChatProps) {\r\n  const { dispatch } = useLayoutContext().widget;\r\n  const { className } = React.useMemo(() => setupChatToggle(), []);\r\n\r\n  const mergedProps = React.useMemo(\r\n    () =>\r\n      mergeProps(props, {\r\n        className,\r\n        onClick: () => {\r\n          if (dispatch) dispatch({ msg: 'show_chat' });\r\n        },\r\n      }),\r\n    [props, className, dispatch],\r\n  );\r\n\r\n  return { mergedProps };\r\n}\r\n\r\n/** @public */\r\nexport type ChatToggleProps = React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n\r\n/**\r\n * The ChatToggle component toggles the visibility of the chat component.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <ToggleChat />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function ChatToggle(props: ChatToggleProps) {\r\n  const { mergedProps } = useToggleChat({ props });\r\n\r\n  return <button {...mergedProps}>{props.children}</button>;\r\n}\r\n","import * as React from 'react';\r\nimport { useLayoutContext } from '../../context';\r\nimport { mergeProps } from '../../utils';\r\nimport { setupShareLinkToggle } from '@livekit/components-core';\r\n\r\ninterface UseToggleShareLinkProps {\r\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n}\r\n\r\nfunction useToggleShareLink({ props }: UseToggleShareLinkProps) {\r\n  const { dispatch } = useLayoutContext().widget;\r\n  const { className } = React.useMemo(() => setupShareLinkToggle(), []);\r\n\r\n  const mergedProps = React.useMemo(\r\n    () =>\r\n      mergeProps(props, {\r\n        className,\r\n        onClick: () => {\r\n          if (dispatch) dispatch({ msg: 'show_invite' });\r\n        },\r\n      }),\r\n    [props, className, dispatch],\r\n  );\r\n\r\n  return { mergedProps };\r\n}\r\n\r\n/** @public */\r\nexport type ShareLinkToggleProps = React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n\r\n/**\r\n * The ShareLinkToggle component toggles the visibility of the chat component.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <ToggleShareLink />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function ShareLinkToggle(props: ShareLinkToggleProps) {\r\n  const { mergedProps } = useToggleShareLink({ props });\r\n\r\n  return <button {...mergedProps}>{props.children}</button>;\r\n}\r\n","import { ConnectionState } from 'livekit-client';\r\nimport { setupDisconnectButton } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../../context';\r\nimport { useConnectionState } from '../ConnectionState';\r\nimport { mergeProps } from '../../utils';\r\n\r\n/** @public */\r\nexport type DisconnectButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n  stopTracks?: boolean;\r\n};\r\n\r\n/** @public */\r\nexport function useDisconnectButton(props: DisconnectButtonProps) {\r\n  const room = useRoomContext();\r\n  const connectionState = useConnectionState(room);\r\n\r\n  const buttonProps = React.useMemo(() => {\r\n    const { className, disconnect } = setupDisconnectButton(room);\r\n    const mergedProps = mergeProps(props, {\r\n      className,\r\n      onClick: () => disconnect(props.stopTracks ?? true),\r\n      disabled: connectionState === ConnectionState.Disconnected,\r\n    });\r\n    return mergedProps;\r\n  }, [room, props, connectionState]);\r\n\r\n  return { buttonProps };\r\n}\r\n\r\n/**\r\n * The DisconnectButton is a basic html button with the added ability to disconnect from a LiveKit room.\r\n * Normally, it is used by end-users to leave a video or audio call.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <DisconnectButton>Leave room</DisconnectButton>\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function DisconnectButton(props: DisconnectButtonProps) {\r\n  const { buttonProps } = useDisconnectButton(props);\r\n  return <button {...buttonProps}>{props.children}</button>;\r\n}\r\n","import { isTrackReferencePinned, setupFocusToggle } from '@livekit/components-core';\r\nimport type { Participant, Track } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { LayoutContext, useEnsureParticipant, useMaybeLayoutContext } from '../../context';\r\nimport { FocusToggleIcon, UnfocusToggleIcon } from '../../assets/icons';\r\nimport { mergeProps } from '../../utils';\r\n\r\ninterface useFocusToggleProps {\r\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n  trackSource: Track.Source;\r\n  participant?: Participant;\r\n}\r\n\r\nfunction useFocusToggle({ trackSource, participant, props }: useFocusToggleProps) {\r\n  const p = useEnsureParticipant(participant);\r\n  const layoutContext = useMaybeLayoutContext();\r\n  const { className } = React.useMemo(() => setupFocusToggle(), []);\r\n\r\n  const inFocus: boolean = React.useMemo(() => {\r\n    const track = p.getTrack(trackSource);\r\n    if (layoutContext?.pin.state && track) {\r\n      return isTrackReferencePinned(\r\n        { participant: p, source: trackSource, publication: track },\r\n        layoutContext.pin.state,\r\n      );\r\n    } else {\r\n      return false;\r\n    }\r\n  }, [p, trackSource, layoutContext]);\r\n\r\n  const mergedProps = React.useMemo(\r\n    () =>\r\n      mergeProps(props, {\r\n        className,\r\n        onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n          // Call user defined on click callbacks.\r\n          props.onClick?.(event);\r\n\r\n          // Set or clear focus based on current focus state.\r\n          const track = p.getTrack(trackSource);\r\n          if (layoutContext?.pin.dispatch && track) {\r\n            if (inFocus) {\r\n              layoutContext.pin.dispatch({\r\n                msg: 'clear_pin',\r\n              });\r\n            } else {\r\n              layoutContext.pin.dispatch({\r\n                msg: 'set_pin',\r\n                trackReference: {\r\n                  participant: p,\r\n                  publication: track,\r\n                  source: track.source,\r\n                },\r\n              });\r\n            }\r\n          }\r\n        },\r\n      }),\r\n    [props, className, p, trackSource, inFocus, layoutContext],\r\n  );\r\n\r\n  return { mergedProps, inFocus };\r\n}\r\n/** @public */\r\nexport interface FocusToggleProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  trackSource: Track.Source;\r\n  participant?: Participant;\r\n}\r\n\r\n/**\r\n * The FocusToggle puts the ParticipantTile in focus or removes it from focus.\r\n *\r\n * @example\r\n * ```tsx\r\n * <ParticipantTile>\r\n *   <FocusToggle />\r\n * </ParticipantTile>\r\n * ```\r\n * @public\r\n */\r\nexport function FocusToggle({ trackSource, participant, ...props }: FocusToggleProps) {\r\n  const { mergedProps, inFocus } = useFocusToggle({ trackSource, participant, props });\r\n\r\n  return (\r\n    <LayoutContext.Consumer>\r\n      {(layoutContext) =>\r\n        layoutContext !== undefined && (\r\n          <button {...mergedProps}>\r\n            {props.children ? (\r\n              props.children\r\n            ) : inFocus ? (\r\n              <UnfocusToggleIcon />\r\n            ) : (\r\n              <FocusToggleIcon />\r\n            )}\r\n          </button>\r\n        )\r\n      }\r\n    </LayoutContext.Consumer>\r\n  );\r\n}\r\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgChatIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={18} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgChatIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgChevron = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentcolor\"\n      fillRule=\"evenodd\"\n      d=\"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgChevron;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgFocusToggleIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <g stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}>\n      <path d=\"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9\" />\n    </g>\n  </svg>\n);\nexport default SvgFocusToggleIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgLeaveIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgLeaveIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgQualityExcellentIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentcolor\" {...props}>\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n  </svg>\n);\nexport default SvgQualityExcellentIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgQualityGoodIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentcolor\" {...props}>\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <g opacity={0.25}>\n      <path d=\"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n      <path d=\"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    </g>\n  </svg>\n);\nexport default SvgQualityGoodIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgQualityPoorIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentcolor\" {...props}>\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    <g opacity={0.25}>\n      <path d=\"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n      <path d=\"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n      <path d=\"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" />\n    </g>\n  </svg>\n);\nexport default SvgQualityPoorIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgQualityUnknownIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"currentColor\" {...props}>\n    <g opacity={0.25}>\n      <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" />\n      <path d=\"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" />\n    </g>\n  </svg>\n);\nexport default SvgQualityUnknownIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgScreenShareIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={20} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n);\nexport default SvgScreenShareIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgScreenShareStopIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={20} height={16} fill=\"none\" {...props}>\n    <g fill=\"currentColor\">\n      <path d=\"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z\" />\n      <path\n        fillRule=\"evenodd\"\n        d=\"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z\"\n        clipRule=\"evenodd\"\n      />\n    </g>\n  </svg>\n);\nexport default SvgScreenShareStopIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgSpinnerIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z\"\n      clipRule=\"evenodd\"\n      opacity={0.7}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z\"\n      clipRule=\"evenodd\"\n      opacity={0.6}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z\"\n      clipRule=\"evenodd\"\n      opacity={0.5}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z\"\n      clipRule=\"evenodd\"\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z\"\n      clipRule=\"evenodd\"\n      opacity={0.4}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z\"\n      clipRule=\"evenodd\"\n      opacity={0.9}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z\"\n      clipRule=\"evenodd\"\n      opacity={0.3}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z\"\n      clipRule=\"evenodd\"\n      opacity={0.8}\n    />\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z\"\n      clipRule=\"evenodd\"\n      opacity={0.2}\n    />\n  </svg>\n);\nexport default SvgSpinnerIcon;\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgUnfocusToggleIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={16} height={16} fill=\"none\" {...props}>\n    <g stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5}>\n      <path d=\"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25\" />\n    </g>\n  </svg>\n);\nexport default SvgUnfocusToggleIcon;\n","import * as React from 'react';\r\nimport { useMaybeRoomContext } from '../../context';\r\nimport { setupDeviceSelector, createMediaDeviceObserver } from '@livekit/components-core';\r\nimport { mergeProps } from '../../utils';\r\nimport type { Room } from 'livekit-client';\r\nimport { useObservableState } from '../../hooks/internal/useObservableState';\r\n\r\n/** @public */\r\nexport function useMediaDevices({ kind }: { kind: MediaDeviceKind }) {\r\n  const deviceObserver = React.useMemo(() => createMediaDeviceObserver(kind), [kind]);\r\n  const devices = useObservableState(deviceObserver, []);\r\n  return devices;\r\n}\r\n\r\n/** @public */\r\nexport interface UseMediaDeviceSelectProps {\r\n  kind: MediaDeviceKind;\r\n  room?: Room;\r\n}\r\n\r\n/** @public */\r\nexport function useMediaDeviceSelect({ kind, room }: UseMediaDeviceSelectProps) {\r\n  const roomContext = useMaybeRoomContext();\r\n  // List of all devices.\r\n  const deviceObserver = React.useMemo(() => createMediaDeviceObserver(kind), [kind]);\r\n  const devices = useObservableState(deviceObserver, []);\r\n  // Active device management.\r\n  const [currentDeviceId, setCurrentDeviceId] = React.useState<string>('');\r\n  const { className, activeDeviceObservable, setActiveMediaDevice } = React.useMemo(\r\n    () => setupDeviceSelector(kind, room ?? roomContext),\r\n    [kind, room, roomContext],\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    const listener = activeDeviceObservable.subscribe((deviceId) => {\r\n      if (deviceId) setCurrentDeviceId(deviceId);\r\n    });\r\n    return () => {\r\n      listener?.unsubscribe();\r\n    };\r\n  }, [activeDeviceObservable]);\r\n\r\n  return { devices, className, activeDeviceId: currentDeviceId, setActiveMediaDevice };\r\n}\r\n\r\n/** @public */\r\nexport interface MediaDeviceSelectProps extends React.HTMLAttributes<HTMLUListElement> {\r\n  kind: MediaDeviceKind;\r\n  onActiveDeviceChange?: (deviceId: string) => void;\r\n  onDeviceListChange?: (devices: MediaDeviceInfo[]) => void;\r\n  initialSelection?: string;\r\n}\r\n\r\n/**\r\n * The MediaDeviceSelect list all media devices of one kind.\r\n * Clicking on one of the listed devices make it the active media device.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <MediaDeviceSelect kind='audioinput' />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function MediaDeviceSelect({\r\n  kind,\r\n  initialSelection,\r\n  onActiveDeviceChange,\r\n  onDeviceListChange,\r\n  ...props\r\n}: MediaDeviceSelectProps) {\r\n  const room = useMaybeRoomContext();\r\n  const { devices, activeDeviceId, setActiveMediaDevice, className } = useMediaDeviceSelect({\r\n    kind,\r\n    room,\r\n  });\r\n  React.useEffect(() => {\r\n    if (initialSelection) {\r\n      setActiveMediaDevice(initialSelection);\r\n    }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    if (typeof onDeviceListChange === 'function') {\r\n      onDeviceListChange(devices);\r\n    }\r\n  }, [onDeviceListChange, devices]);\r\n\r\n  const handleActiveDeviceChange = async (deviceId: string) => {\r\n    setActiveMediaDevice(deviceId);\r\n    onActiveDeviceChange?.(deviceId);\r\n  };\r\n  // Merge Props\r\n  const mergedProps = React.useMemo(\r\n    () => mergeProps(props, { className }, { className: 'lk-list' }),\r\n    [className, props],\r\n  );\r\n\r\n  return (\r\n    <ul {...mergedProps}>\r\n      {devices.map((device) => (\r\n        <li\r\n          key={device.deviceId}\r\n          id={device.deviceId}\r\n          data-lk-active={device.deviceId === activeDeviceId}\r\n          aria-selected={device.deviceId === activeDeviceId}\r\n          role=\"option\"\r\n        >\r\n          <button className=\"lk-button\" onClick={() => handleActiveDeviceChange(device.deviceId)}>\r\n            {device.label}\r\n          </button>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n","import { setupStartAudio } from '@livekit/components-core';\r\nimport type { Room } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../../context';\r\nimport { useObservableState } from '../../hooks/internal/useObservableState';\r\nimport { mergeProps } from '../../utils';\r\n\r\ninterface UseStartAudioProps {\r\n  room: Room;\r\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n}\r\n\r\nfunction useStartAudio({ room, props }: UseStartAudioProps) {\r\n  const { className, roomAudioPlaybackAllowedObservable, handleStartAudioPlayback } = React.useMemo(\r\n    () => setupStartAudio(),\r\n    [],\r\n  );\r\n  const observable = React.useMemo(\r\n    () => roomAudioPlaybackAllowedObservable(room),\r\n    [room, roomAudioPlaybackAllowedObservable],\r\n  );\r\n  const { canPlayAudio } = useObservableState(observable, { canPlayAudio: false });\r\n\r\n  const mergedProps = React.useMemo(\r\n    () =>\r\n      mergeProps(props, {\r\n        className,\r\n        onClick: () => {\r\n          handleStartAudioPlayback(room);\r\n        },\r\n        style: { display: canPlayAudio ? 'none' : 'block' },\r\n      }),\r\n    [props, className, canPlayAudio, handleStartAudioPlayback, room],\r\n  );\r\n\r\n  return { mergedProps, canPlayAudio };\r\n}\r\n\r\n/** @public */\r\nexport interface AllowAudioPlaybackProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  label: string;\r\n}\r\n\r\n/**\r\n * The StartAudio component is only visible when the browser blocks audio playback. This is due to some browser implemented autoplay policies.\r\n * To start audio playback, the user must perform a user-initiated event such as clicking this button.\r\n * As soon as audio playback starts, the button hides itself again.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <StartAudio>Click to allow audio playback</StartAudio>\r\n * </LiveKitRoom>\r\n * ```\r\n *\r\n * @see Autoplay policy on MDN web docs: {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Best_practices#autoplay_policy}\r\n * @public\r\n */\r\nexport function StartAudio({ label = 'Allow Audio', ...props }: AllowAudioPlaybackProps) {\r\n  const room = useRoomContext();\r\n  const { mergedProps } = useStartAudio({ room, props });\r\n\r\n  return <button {...mergedProps}>{label}</button>;\r\n}\r\n","import type { CaptureOptionsBySource, ToggleSource } from '@livekit/components-core';\r\nimport { log, setupManualToggle, setupMediaToggle } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { mergeProps } from '../../mergeProps';\r\nimport { useMaybeRoomContext } from '../../context';\r\nimport { getSourceIcon } from '../../assets/icons/util';\r\nimport { useObservableState } from '../../hooks/internal/useObservableState';\r\n\r\n/** @public */\r\nexport type TrackToggleProps<T extends ToggleSource> = Omit<\r\n  React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n  'onChange'\r\n> & {\r\n  source: T;\r\n  showIcon?: boolean;\r\n  initialState?: boolean;\r\n  onChange?: (enabled: boolean) => void;\r\n  captureOptions?: CaptureOptionsBySource<T>;\r\n};\r\n\r\n/** @public */\r\nexport type UseTrackToggleProps<T extends ToggleSource> = Omit<TrackToggleProps<T>, 'showIcon'>;\r\n\r\n/** @public */\r\nexport function useTrackToggle<T extends ToggleSource>({\r\n  source,\r\n  onChange,\r\n  initialState,\r\n  captureOptions,\r\n  ...rest\r\n}: UseTrackToggleProps<T>) {\r\n  const room = useMaybeRoomContext();\r\n  const track = room?.localParticipant?.getTrack(source);\r\n\r\n  const { toggle, className, pendingObserver, enabledObserver } = React.useMemo(\r\n    () => (room ? setupMediaToggle<T>(source, room, captureOptions) : setupManualToggle()),\r\n    [room, source, JSON.stringify(captureOptions)],\r\n  );\r\n\r\n  const pending = useObservableState(pendingObserver, false);\r\n  const enabled = useObservableState(enabledObserver, initialState ?? !!track?.isEnabled);\r\n\r\n  React.useEffect(() => {\r\n    onChange?.(enabled);\r\n  }, [enabled, onChange]);\r\n\r\n  React.useEffect(() => {\r\n    if (initialState !== undefined) {\r\n      log.debug('forcing initial toggle state', source, initialState);\r\n      toggle(initialState);\r\n    }\r\n    // only execute once at the beginning\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const newProps = React.useMemo(() => mergeProps(rest, { className }), [rest, className]);\r\n\r\n  const clickHandler: React.MouseEventHandler<HTMLButtonElement> = React.useCallback(\r\n    (evt) => {\r\n      toggle();\r\n      rest.onClick?.(evt);\r\n    },\r\n    [rest, toggle],\r\n  );\r\n\r\n  return {\r\n    toggle,\r\n    enabled,\r\n    pending,\r\n    track,\r\n    buttonProps: {\r\n      ...newProps,\r\n      'aria-pressed': enabled,\r\n      'data-lk-source': source,\r\n      'data-lk-enabled': enabled,\r\n      disabled: pending || rest.disabled,\r\n      onClick: clickHandler,\r\n    } as React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n  };\r\n}\r\n\r\n/**\r\n * With the TrackToggle component it is possible to mute and unmute your camera and microphone.\r\n * The component uses an html button element under the hood so you can treat it like a button.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <TrackToggle source={Track.Source.Microphone} />\r\n *   <TrackToggle source={Track.Source.Camera} />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function TrackToggle<T extends ToggleSource>({ showIcon, ...props }: TrackToggleProps<T>) {\r\n  const { buttonProps, enabled } = useTrackToggle(props);\r\n  \r\n  return (\r\n    <button {...buttonProps}>\r\n      {(showIcon ?? true) && getSourceIcon(props.source, enabled)}\r\n      {props.children}\r\n    </button>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { ConnectionQuality, Track } from 'livekit-client';\r\n\r\nimport {\r\n  QualityUnknownIcon,\r\n  QualityExcellentIcon,\r\n  QualityGoodIcon,\r\n  QualityPoorIcon,\r\n  ScreenShareIcon,\r\n  ScreenShareStopIcon,\r\n} from './index';\r\n\r\nimport { MicIcon, MicDisabledIcon, CameraIcon, CameraDisabledIcon } from './tl';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function getSourceIcon(source: Track.Source, enabled: boolean) {\r\n  switch (source) {\r\n    case Track.Source.Microphone:\r\n      return enabled ? <MicIcon /> : <MicDisabledIcon />;\r\n    case Track.Source.Camera:\r\n      return enabled ? <CameraIcon /> : <CameraDisabledIcon />;\r\n    case Track.Source.ScreenShare:\r\n      return enabled ? <ScreenShareStopIcon /> : <ScreenShareIcon />;\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function getConnectionQualityIcon(quality: ConnectionQuality) {\r\n  switch (quality) {\r\n    case ConnectionQuality.Excellent:\r\n      return <QualityExcellentIcon />;\r\n    case ConnectionQuality.Good:\r\n      return <QualityGoodIcon />;\r\n    case ConnectionQuality.Poor:\r\n      return <QualityPoorIcon />;\r\n    default:\r\n      return <QualityUnknownIcon />;\r\n  }\r\n}\r\n","import * as React from 'react';\nimport type { SVGProps } from 'react';\nconst SvgCameraDisabledIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    width={18}\n    height={18}\n    viewBox=\"0 0 21 21\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M14.6155 6.64973C14.6155 6.64973 14.6409 5.84659 14.6155 5.58451C14.4718 3.85986 13.3474 3.26807 11.1409 3.26807H5.80627C3.13476 3.26807 2.24707 4.15575 2.24707 6.82727V13.9457C2.24707 15.0109 2.56833 16.0846 3.40529 16.7694L3.9379 17.1498\"\n      stroke=\"white\"\n      stroke-width=\"1.66\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M14.7084 9.49878V13.9457C14.7084 16.6172 13.8207 17.5049 11.1492 17.5049H6.69385\"\n      stroke=\"white\"\n      stroke-width=\"1.66\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M19.1554 5.93958V13.6075C19.1554 15.0194 18.2085 15.5097 17.0588 14.6981L14.7085 13.0495\"\n      stroke=\"white\"\n      stroke-width=\"1.66\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M19.172 2.0929L2.26367 19.0012\"\n      stroke=\"white\"\n      stroke-width=\"1.66\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\nexport default SvgCameraDisabledIcon;\n","import * as React from 'react';\nimport type { SVGProps } from 'react';\nconst SvgCameraIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    width={18}\n    height={18}\n    viewBox=\"0 0 21 21\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M10.9042 17.5049H5.56116C2.88964 17.5049 2.00195 15.7295 2.00195 13.9457V6.82727C2.00195 4.15575 2.88964 3.26807 5.56116 3.26807H10.9042C13.5757 3.26807 14.4634 4.15575 14.4634 6.82727V13.9457C14.4634 16.6172 13.5673 17.5049 10.9042 17.5049Z\"\n      stroke=\"white\"\n      stroke-width=\"1.66\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M16.8136 14.6981L14.4634 13.0495V7.71495L16.8136 6.06638C17.9634 5.26324 18.9103 5.75358 18.9103 7.16543V13.6075C18.9103 15.0193 17.9634 15.5097 16.8136 14.6981Z\"\n      stroke=\"white\"\n      stroke-width=\"1.66\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M10.0333 9.54101C10.7336 9.54101 11.3014 8.97325 11.3014 8.27289C11.3014 7.57252 10.7336 7.00476 10.0333 7.00476C9.3329 7.00476 8.76514 7.57252 8.76514 8.27289C8.76514 8.97325 9.3329 9.54101 10.0333 9.54101Z\"\n      stroke=\"white\"\n      stroke-width=\"1.66\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\nexport default SvgCameraIcon;\n","import * as React from 'react';\nimport type { SVGProps } from 'react';\nconst SvgMicDisabledIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    width={18}\n    height={18}\n    viewBox=\"0 0 21 21\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M14.222 5.74004V5.48647C14.222 3.61847 12.709 2.10547 10.841 2.10547C8.97296 2.10547 7.45996 3.61847 7.45996 5.48647V9.71272\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M8.33936 12.4091C8.95639 13.0937 9.85235 13.5163 10.8413 13.5163C12.7093 13.5163 14.2223 12.0033 14.2223 10.1353V9.71271\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M6.42871 14.7419C7.5867 15.8154 9.13351 16.4747 10.8409 16.4747C14.4079 16.4747 17.3071 13.5755 17.3071 10.0085V8.57159\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M4.375 8.57159V10.0085C4.375 10.9045 4.5525 11.7497 4.88215 12.5274\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M17.6624 2.81549L4.02002 16.4663\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M9.99561 2.95068V5.48643\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M10.8408 16.4747V19.0105\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\nexport default SvgMicDisabledIcon;\n","import * as React from 'react';\nimport type { SVGProps } from 'react';\nconst SvgMicIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    width={18}\n    height={18}\n    viewBox=\"0 0 22 21\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M10.9049 13.3448C12.7729 13.3448 14.2859 11.8318 14.2859 9.96384V5.31496C14.2859 3.44696 12.7729 1.93396 10.9049 1.93396C9.03692 1.93396 7.52393 3.44696 7.52393 5.31496V9.96384C7.52393 11.8318 9.03692 13.3448 10.9049 13.3448Z\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M4.43896 8.40009V9.83701C4.43896 13.404 7.33817 16.3032 10.9051 16.3032C14.4721 16.3032 17.3713 13.404 17.3713 9.83701V8.40009\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M9.73047 5.67844C10.4912 5.39951 11.3195 5.39951 12.0803 5.67844\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M10.229 7.47034C10.677 7.35201 11.1419 7.35201 11.5899 7.47034\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n    <path\n      d=\"M10.9048 16.3032V18.839\"\n      stroke=\"white\"\n      stroke-width=\"1.66129\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\nexport default SvgMicIcon;\n","import type { Participant } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { mergeProps } from '../../utils';\r\nimport type { TrackReference, TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport { ParticipantTile } from '../participant/ParticipantTile';\r\nimport type { ParticipantClickEvent } from '@livekit/components-core';\r\n\r\n/** @public */\r\nexport interface FocusLayoutContainerProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  focusTrack?: TrackReference;\r\n  participants?: Array<Participant>;\r\n}\r\n\r\n/** @public */\r\nexport function FocusLayoutContainer(props: FocusLayoutContainerProps) {\r\n  const elementProps = mergeProps(props, { className: 'lk-focus-layout' });\r\n\r\n  return <div {...elementProps}>{props.children}</div>;\r\n}\r\n\r\n/** @public */\r\nexport interface FocusLayoutProps extends React.HTMLAttributes<HTMLElement> {\r\n  track?: TrackReferenceOrPlaceholder;\r\n  onParticipantClick?: (evt: ParticipantClickEvent) => void;\r\n}\r\n\r\n/** @public */\r\nexport function FocusLayout({ track, ...htmlProps }: FocusLayoutProps) {\r\n  return <ParticipantTile {...track} {...htmlProps} />;\r\n}\r\n","import * as React from 'react';\r\nimport type { Participant, TrackPublication } from 'livekit-client';\r\nimport { Track } from 'livekit-client';\r\nimport type { ParticipantClickEvent, TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport { isParticipantSourcePinned, setupParticipantTile } from '@livekit/components-core';\r\nimport { ConnectionQualityIndicator } from './ConnectionQualityIndicator';\r\nimport { ParticipantName } from './ParticipantName';\r\nimport { TrackMutedIndicator } from './TrackMutedIndicator';\r\nimport {\r\n  useMaybeParticipantContext,\r\n  ParticipantContext,\r\n  useEnsureParticipant,\r\n  useMaybeLayoutContext,\r\n} from '../../context';\r\nimport { useIsMuted, useIsSpeaking } from '../../hooks';\r\nimport { mergeProps } from '../../utils';\r\nimport { FocusToggle } from '../controls/FocusToggle';\r\nimport { ScreenShareIcon } from '../../assets/icons';\r\nimport { VideoTrack } from './VideoTrack';\r\nimport { AudioTrack } from './AudioTrack';\r\nimport { ParticipantNamePlaceholder } from './ParticipantNamePlaceholder';\r\n\r\n/** @public */\r\nexport type ParticipantTileProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  disableSpeakingIndicator?: boolean;\r\n  participant?: Participant;\r\n  source?: Track.Source;\r\n  publication?: TrackPublication;\r\n  onParticipantClick?: (event: ParticipantClickEvent) => void;\r\n};\r\n\r\n/** @public */\r\nexport type UseParticipantTileProps<T extends HTMLElement> = TrackReferenceOrPlaceholder & {\r\n  disableSpeakingIndicator?: boolean;\r\n  publication?: TrackPublication;\r\n  onParticipantClick?: (event: ParticipantClickEvent) => void;\r\n  htmlProps: React.HTMLAttributes<T>;\r\n};\r\n\r\n/** @public */\r\nexport function useParticipantTile<T extends HTMLElement>({\r\n  participant,\r\n  source,\r\n  publication,\r\n  onParticipantClick,\r\n  disableSpeakingIndicator,\r\n  htmlProps,\r\n}: UseParticipantTileProps<T>) {\r\n  const p = useEnsureParticipant(participant);\r\n  const mergedProps = React.useMemo(() => {\r\n    const { className } = setupParticipantTile();\r\n    return mergeProps(htmlProps, {\r\n      className,\r\n      onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n        // @ts-ignore\r\n        htmlProps.onClick?.(event);\r\n        if (typeof onParticipantClick === 'function') {\r\n          const track = publication ?? p.getTrack(source);\r\n          onParticipantClick({ participant: p, track });\r\n        }\r\n      },\r\n    });\r\n  }, [htmlProps, source, onParticipantClick, p, publication]);\r\n  const isVideoMuted = useIsMuted(Track.Source.Camera, { participant });\r\n  const isAudioMuted = useIsMuted(Track.Source.Microphone, { participant });\r\n  const isSpeaking = useIsSpeaking(participant);\r\n  return {\r\n    elementProps: {\r\n      'data-lk-audio-muted': isAudioMuted,\r\n      'data-lk-video-muted': isVideoMuted,\r\n      'data-lk-speaking': disableSpeakingIndicator === true ? false : isSpeaking,\r\n      'data-lk-local-participant': participant.isLocal,\r\n      'data-lk-source': source,\r\n      ...mergedProps,\r\n    } as React.HTMLAttributes<HTMLDivElement>,\r\n  };\r\n}\r\n\r\n/** @public */\r\nexport function ParticipantContextIfNeeded(\r\n  props: React.PropsWithChildren<{\r\n    participant?: Participant;\r\n  }>,\r\n) {\r\n  const hasContext = !!useMaybeParticipantContext();\r\n  return props.participant && !hasContext ? (\r\n    <ParticipantContext.Provider value={props.participant}>\r\n      {props.children}\r\n    </ParticipantContext.Provider>\r\n  ) : (\r\n    <>{props.children}</>\r\n  );\r\n}\r\n\r\n/**\r\n * The ParticipantTile component is the base utility wrapper for displaying a visual representation of a participant.\r\n * This component can be used as a child of the `TrackLoop` component or by spreading a track reference as properties.\r\n *\r\n * @example\r\n * ```tsx\r\n * <ParticipantTile source={Track.Source.Camera} />\r\n *\r\n * <ParticipantTile {...trackReference} />\r\n * ```\r\n * @public\r\n */\r\nexport const ParticipantTile = ({\r\n  participant,\r\n  children,\r\n  source = Track.Source.Camera,\r\n  onParticipantClick,\r\n  publication,\r\n  disableSpeakingIndicator,\r\n  ...htmlProps\r\n}: ParticipantTileProps) => {\r\n  const p = useEnsureParticipant(participant);\r\n\r\n  const { elementProps } = useParticipantTile<HTMLDivElement>({\r\n    participant: p,\r\n    htmlProps,\r\n    source,\r\n    publication,\r\n    disableSpeakingIndicator,\r\n    onParticipantClick,\r\n  });\r\n\r\n  const layoutContext = useMaybeLayoutContext();\r\n\r\n  const handleSubscribe = React.useCallback(\r\n    (subscribed: boolean) => {\r\n      if (\r\n        source &&\r\n        !subscribed &&\r\n        layoutContext &&\r\n        layoutContext.pin.dispatch &&\r\n        isParticipantSourcePinned(p, source, layoutContext.pin.state)\r\n      ) {\r\n        layoutContext.pin.dispatch({ msg: 'clear_pin' });\r\n      }\r\n    },\r\n    [p, layoutContext, source],\r\n  );\r\n\r\n  return (\r\n    <div style={{ position: 'relative' }} {...elementProps}>\r\n      <ParticipantContextIfNeeded participant={p}>\r\n        {children ?? (\r\n          <>\r\n            {publication?.kind === 'video' ||\r\n            source === Track.Source.Camera ||\r\n            source === Track.Source.ScreenShare ? (\r\n              <VideoTrack\r\n                participant={p}\r\n                source={source}\r\n                publication={publication}\r\n                onSubscriptionStatusChanged={handleSubscribe}\r\n              />\r\n            ) : (\r\n              <AudioTrack\r\n                participant={p}\r\n                source={source}\r\n                publication={publication}\r\n                onSubscriptionStatusChanged={handleSubscribe}\r\n              />\r\n            )}\r\n            <div className=\"lk-participant-placeholder\">\r\n              {p && <ParticipantNamePlaceholder name={p.name} />}\r\n            </div>\r\n            <div className=\"lk-participant-metadata\">\r\n              <div className=\"lk-participant-metadata-item\">\r\n                {source === Track.Source.Camera ? (\r\n                  <>\r\n                    <TrackMutedIndicator\r\n                      source={Track.Source.Microphone}\r\n                      show={'always'}\r\n                    ></TrackMutedIndicator>\r\n                    <ParticipantName />\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <ScreenShareIcon style={{ marginRight: '0.25rem' }} />\r\n                    <ParticipantName>&apos;s screen</ParticipantName>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <ConnectionQualityIndicator className=\"lk-participant-metadata-item\" />\r\n            </div>\r\n          </>\r\n        )}\r\n        <FocusToggle trackSource={source} />\r\n      </ParticipantContextIfNeeded>\r\n    </div>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport { setupConnectionQualityIndicator } from '@livekit/components-core';\r\nimport { useEnsureParticipant } from '../../context';\r\nimport type { Participant } from 'livekit-client';\r\nimport { ConnectionQuality } from 'livekit-client';\r\nimport { mergeProps } from '../../utils';\r\nimport { getConnectionQualityIcon } from '../../assets/icons/util';\r\nimport { useObservableState } from '../../hooks/internal/useObservableState';\r\n\r\n/** @public */\r\nexport interface ConnectionQualityIndicatorOptions {\r\n  participant?: Participant;\r\n}\r\n\r\n/** @public */\r\nexport type ConnectionQualityIndicatorProps = React.HTMLAttributes<HTMLDivElement> &\r\n  ConnectionQualityIndicatorOptions;\r\n\r\n/** @public */\r\nexport function useConnectionQualityIndicator(options: ConnectionQualityIndicatorOptions = {}) {\r\n  const p = useEnsureParticipant(options.participant);\r\n  const { className, connectionQualityObserver } = React.useMemo(\r\n    () => setupConnectionQualityIndicator(p),\r\n    [p],\r\n  );\r\n\r\n  const quality = useObservableState(connectionQualityObserver, ConnectionQuality.Unknown);\r\n\r\n  return { className, quality };\r\n}\r\n\r\n/**\r\n * The ConnectionQualityIndicator shows the individual connection quality of a participant.\r\n *\r\n * @example\r\n * ```tsx\r\n * <ConnectionQualityIndicator />\r\n * ```\r\n * @public\r\n */\r\nexport function ConnectionQualityIndicator(props: ConnectionQualityIndicatorProps) {\r\n  const { className, quality } = useConnectionQualityIndicator(props);\r\n  const elementProps = React.useMemo(() => {\r\n    return { ...mergeProps(props, { className: className as string }), 'data-lk-quality': quality };\r\n  }, [quality, props, className]);\r\n  return <div {...elementProps}>{props.children ?? getConnectionQualityIcon(quality)}</div>;\r\n}\r\n","import { participantInfoObserver, setupParticipantName } from '@livekit/components-core';\r\nimport type { Participant } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useEnsureParticipant } from '../../context';\r\nimport { useObservableState } from '../../hooks/internal/useObservableState';\r\nimport { mergeProps } from '../../utils';\r\n\r\n/** @public */\r\nexport function useParticipantInfo(props: UseParticipantInfoOptions = {}) {\r\n  const p = useEnsureParticipant(props.participant);\r\n  const infoObserver = React.useMemo(() => participantInfoObserver(p), [p]);\r\n  const { identity, name, metadata } = useObservableState(infoObserver, {\r\n    name: p.name,\r\n    identity: p.identity,\r\n    metadata: p.metadata,\r\n  });\r\n\r\n  return { identity, name, metadata };\r\n}\r\n\r\n/** @public */\r\nexport type UseParticipantInfoOptions = {\r\n  participant?: Participant;\r\n};\r\n\r\n/** @public */\r\nexport type ParticipantNameProps = React.HTMLAttributes<HTMLSpanElement> &\r\n  UseParticipantInfoOptions;\r\n\r\n/**\r\n * The ParticipantName component displays the name of the participant as a string within an HTML span element.\r\n * If no participant name is undefined the participant identity string is displayed.\r\n *\r\n * @example\r\n * ```tsx\r\n * <ParticipantName />\r\n * ```\r\n * @public\r\n */\r\nexport function ParticipantName({ participant, ...props }: ParticipantNameProps) {\r\n  const p = useEnsureParticipant(participant);\r\n\r\n  const { className, infoObserver } = React.useMemo(() => {\r\n    return setupParticipantName(p);\r\n  }, [p]);\r\n\r\n  const { identity, name } = useObservableState(infoObserver, {\r\n    name: p.name,\r\n    identity: p.identity,\r\n    metadata: p.metadata,\r\n  });\r\n\r\n  const mergedProps = React.useMemo(() => {\r\n    return mergeProps(props, { className, 'data-lk-participant-name': name });\r\n  }, [props, className, name]);\r\n\r\n  return (\r\n    <span {...mergedProps}>\r\n      {name !== '' ? name : identity}\r\n      {props.children}\r\n    </span>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { mergeProps } from '../../utils';\r\nimport { setupTrackMutedIndicator } from '@livekit/components-core';\r\nimport type { Participant, Track } from 'livekit-client';\r\nimport { useEnsureParticipant } from '../../context';\r\nimport { getSourceIcon } from '../../assets/icons/util';\r\nimport { useObservableState } from '../../hooks/internal/useObservableState';\r\n\r\n/** @public */\r\nexport interface TrackMutedIndicatorProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  source: Track.Source;\r\n  participant?: Participant;\r\n  show?: 'always' | 'muted' | 'unmuted';\r\n}\r\n\r\n/** @public */\r\nexport interface UseTrackMutedIndicatorOptions {\r\n  participant?: Participant;\r\n}\r\n\r\n/** @public */\r\nexport const useTrackMutedIndicator = (\r\n  source: Track.Source,\r\n  options: UseTrackMutedIndicatorOptions = {},\r\n) => {\r\n  const p = useEnsureParticipant(options.participant);\r\n  const { className, mediaMutedObserver } = React.useMemo(\r\n    () => setupTrackMutedIndicator(p, source),\r\n    [p, source],\r\n  );\r\n\r\n  const isMuted = useObservableState(mediaMutedObserver, !!p.getTrack(source)?.isMuted);\r\n\r\n  return { isMuted, className };\r\n};\r\n\r\n/**\r\n * The TrackMutedIndicator shows whether the participant's camera or microphone is muted or not.\r\n *\r\n * @example\r\n * ```tsx\r\n * <TrackMutedIndicator source={Track.Source.Camera} />\r\n * <TrackMutedIndicator source={Track.Source.Microphone} />\r\n * ```\r\n * @public\r\n */\r\nexport const TrackMutedIndicator = ({\r\n  source,\r\n  participant,\r\n  show = 'always',\r\n  ...props\r\n}: TrackMutedIndicatorProps) => {\r\n  const { className, isMuted } = useTrackMutedIndicator(source, { participant });\r\n\r\n  const showIndicator =\r\n    show === 'always' || (show === 'muted' && isMuted) || (show === 'unmuted' && !isMuted);\r\n\r\n  const htmlProps = React.useMemo(\r\n    () =>\r\n      mergeProps(props, {\r\n        className,\r\n      }),\r\n    [className, props],\r\n  );\r\n\r\n  if (!showIndicator) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div {...htmlProps} data-lk-muted={isMuted}>\r\n      {props.children ?? getSourceIcon(source, !isMuted)}\r\n    </div>\r\n  );\r\n};\r\n","import type { ReceivedDataMessage } from '@livekit/components-core';\r\nimport { setupDataMessageHandler } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../context';\r\nimport { useObservableState } from './internal';\r\n\r\n/** @public */\r\nexport function useDataChannel<T extends string>(\r\n  topic?: T,\r\n  onMessage?: (msg: ReceivedDataMessage<T>) => void,\r\n) {\r\n  const room = useRoomContext();\r\n  const { send, messageObservable, isSendingObservable } = React.useMemo(\r\n    () => setupDataMessageHandler(room, topic, onMessage),\r\n    [room, topic, onMessage],\r\n  );\r\n\r\n  const message = useObservableState(messageObservable, undefined);\r\n  const isSending = useObservableState(isSendingObservable, false);\r\n\r\n  return {\r\n    message,\r\n    send,\r\n    isSending,\r\n  };\r\n}\r\n","/* eslint-disable no-return-assign */\r\n/* eslint-disable no-underscore-dangle */\r\nimport * as React from 'react';\r\nimport useLatest from '@react-hook/latest';\r\n\r\n/**\r\n * A React hook that fires a callback whenever ResizeObserver detects a change to its size\r\n * code extracted from https://github.com/jaredLunde/react-hook/blob/master/packages/resize-observer/src/index.tsx in order to not include the polyfill for resize-observer\r\n *\r\n * @internal\r\n */\r\nexport function useResizeObserver<T extends HTMLElement>(\r\n  target: React.RefObject<T>,\r\n  callback: UseResizeObserverCallback,\r\n) {\r\n  const resizeObserver = getResizeObserver();\r\n  const storedCallback = useLatest(callback);\r\n\r\n  React.useLayoutEffect(() => {\r\n    let didUnsubscribe = false;\r\n\r\n    const targetEl = target.current;\r\n    if (!targetEl) return;\r\n\r\n    function cb(entry: ResizeObserverEntry, observer: ResizeObserver) {\r\n      if (didUnsubscribe) return;\r\n      storedCallback.current(entry, observer);\r\n    }\r\n\r\n    resizeObserver?.subscribe(targetEl as HTMLElement, cb);\r\n\r\n    return () => {\r\n      didUnsubscribe = true;\r\n      resizeObserver?.unsubscribe(targetEl as HTMLElement, cb);\r\n    };\r\n  }, [target.current, resizeObserver, storedCallback]);\r\n\r\n  return resizeObserver?.observer;\r\n}\r\n\r\nfunction createResizeObserver() {\r\n  let ticking = false;\r\n  let allEntries: ResizeObserverEntry[] = [];\r\n\r\n  const callbacks: Map<unknown, Array<UseResizeObserverCallback>> = new Map();\r\n\r\n  if (typeof window === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  const observer = new ResizeObserver((entries: ResizeObserverEntry[], obs: ResizeObserver) => {\r\n    allEntries = allEntries.concat(entries);\r\n    if (!ticking) {\r\n      window.requestAnimationFrame(() => {\r\n        const triggered = new Set<Element>();\r\n        for (let i = 0; i < allEntries.length; i++) {\r\n          if (triggered.has(allEntries[i].target)) continue;\r\n          triggered.add(allEntries[i].target);\r\n          const cbs = callbacks.get(allEntries[i].target);\r\n          cbs?.forEach((cb) => cb(allEntries[i], obs));\r\n        }\r\n        allEntries = [];\r\n        ticking = false;\r\n      });\r\n    }\r\n    ticking = true;\r\n  });\r\n\r\n  return {\r\n    observer,\r\n    subscribe(target: HTMLElement, callback: UseResizeObserverCallback) {\r\n      observer.observe(target);\r\n      const cbs = callbacks.get(target) ?? [];\r\n      cbs.push(callback);\r\n      callbacks.set(target, cbs);\r\n    },\r\n    unsubscribe(target: HTMLElement, callback: UseResizeObserverCallback) {\r\n      const cbs = callbacks.get(target) ?? [];\r\n      if (cbs.length === 1) {\r\n        observer.unobserve(target);\r\n        callbacks.delete(target);\r\n        return;\r\n      }\r\n      const cbIndex = cbs.indexOf(callback);\r\n      if (cbIndex !== -1) cbs.splice(cbIndex, 1);\r\n      callbacks.set(target, cbs);\r\n    },\r\n  };\r\n}\r\n\r\nlet _resizeObserver: ReturnType<typeof createResizeObserver>;\r\n\r\nconst getResizeObserver = () =>\r\n  !_resizeObserver ? (_resizeObserver = createResizeObserver()) : _resizeObserver;\r\n\r\nexport type UseResizeObserverCallback = (\r\n  entry: ResizeObserverEntry,\r\n  observer: ResizeObserver,\r\n) => unknown;\r\n\r\nexport const useSize = (target: React.RefObject<HTMLDivElement>) => {\r\n  const [size, setSize] = React.useState({ width: 0, height: 0 });\r\n  React.useLayoutEffect(() => {\r\n    if (target.current) {\r\n      const { width, height } = target.current.getBoundingClientRect();\r\n      setSize({ width, height });\r\n    }\r\n  }, [target.current]);\r\n\r\n  const resizeCallback = React.useCallback(\r\n    (entry: ResizeObserverEntry) => setSize(entry.contentRect),\r\n    [],\r\n  );\r\n  // Where the magic happens\r\n  useResizeObserver(target, resizeCallback);\r\n  return size;\r\n};\r\n","import * as React from 'react';\r\n/**\r\n * Implementation used from https://github.com/juliencrn/usehooks-ts\r\n *\r\n * @internal\r\n */\r\nexport function useMediaQuery(query: string): boolean {\r\n  const getMatches = (query: string): boolean => {\r\n    // Prevents SSR issues\r\n    if (typeof window !== 'undefined') {\r\n      return window.matchMedia(query).matches;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const [matches, setMatches] = React.useState<boolean>(getMatches(query));\r\n\r\n  function handleChange() {\r\n    setMatches(getMatches(query));\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const matchMedia = window.matchMedia(query);\r\n\r\n    // Triggered at the first client-side load and if query changes\r\n    handleChange();\r\n\r\n    // Listen matchMedia\r\n    if (matchMedia.addListener) {\r\n      matchMedia.addListener(handleChange);\r\n    } else {\r\n      matchMedia.addEventListener('change', handleChange);\r\n    }\r\n\r\n    return () => {\r\n      if (matchMedia.removeListener) {\r\n        matchMedia.removeListener(handleChange);\r\n      } else {\r\n        matchMedia.removeEventListener('change', handleChange);\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [query]);\r\n\r\n  return matches;\r\n}\r\n","import { GRID_LAYOUTS, selectGridLayout } from '@livekit/components-core';\r\nimport type { GridLayout } from '@livekit/components-core/dist/helper/grid-layouts';\r\nimport * as React from 'react';\r\nimport { useSize } from './internal';\r\n\r\n/**\r\n * The useGridLayout hook tries to select the best layout to fit all tiles.\r\n * If the available screen space is not enough, it will reduce the number of maximum visible\r\n * tiles and select a layout that still works visually within the given limitations.\r\n * As the order of tiles changes over time, the hook tries to keep visual updates to a minimum\r\n * while trying to display important tiles such as speaking participants or screen shares.\r\n * @public\r\n */\r\nexport function useGridLayout(\r\n  /** HTML element that contains the grid. */\r\n  gridElement: React.RefObject<HTMLDivElement>,\r\n  /** Count of tracks that should get layed out */\r\n  trackCount: number,\r\n): { layout: GridLayout } {\r\n  const { width, height } = useSize(gridElement);\r\n\r\n  const layout =\r\n    width > 0 && height > 0\r\n      ? selectGridLayout(GRID_LAYOUTS, trackCount, width, height)\r\n      : GRID_LAYOUTS[0];\r\n\r\n  React.useEffect(() => {\r\n    if (gridElement.current && layout) {\r\n      gridElement.current.style.setProperty('--lk-col-count', layout?.columns.toString());\r\n      gridElement.current.style.setProperty('--lk-row-count', layout?.rows.toString());\r\n    }\r\n  }, [gridElement, layout]);\r\n\r\n  return {\r\n    layout,\r\n  };\r\n}\r\n","import { mutedObserver } from '@livekit/components-core';\r\nimport type { Participant, Track } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useEnsureParticipant } from '../context';\r\n\r\n/** @public */\r\nexport interface UseIsMutedOptions {\r\n  participant?: Participant;\r\n}\r\n\r\n/** @public */\r\nexport function useIsMuted(source: Track.Source, options: UseIsMutedOptions = {}) {\r\n  const p = useEnsureParticipant(options.participant);\r\n  const [isMuted, setIsMuted] = React.useState(!!p.getTrack(source)?.isMuted);\r\n\r\n  React.useEffect(() => {\r\n    const listener = mutedObserver(p, source).subscribe(setIsMuted);\r\n    return () => listener.unsubscribe();\r\n  }, [p, source]);\r\n\r\n  return isMuted;\r\n}\r\n","import { createIsSpeakingObserver } from '@livekit/components-core';\r\nimport type { Participant } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useEnsureParticipant } from '../context';\r\nimport { useObservableState } from './internal';\r\n\r\n/** @public */\r\nexport function useIsSpeaking(participant?: Participant) {\r\n  const p = useEnsureParticipant(participant);\r\n  const observable = React.useMemo(() => createIsSpeakingObserver(p), [p]);\r\n  const isSpeaking = useObservableState(observable, p.isSpeaking);\r\n\r\n  return isSpeaking;\r\n}\r\n","import type { ParticipantMedia } from '@livekit/components-core';\r\nimport { observeParticipantMedia } from '@livekit/components-core';\r\nimport type { TrackPublication, LocalParticipant, Room } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useEnsureRoom } from '../context';\r\n\r\n/** @public */\r\nexport interface UseLocalParticipantOptions {\r\n  /**\r\n   * The room to use. If not provided, the hook will use the room from the context.\r\n   */\r\n  room?: Room;\r\n}\r\n\r\n/**\r\n * The useLocalParticipant hook the state of the local participant.\r\n * @public\r\n */\r\nexport const useLocalParticipant = (options: UseLocalParticipantOptions = {}) => {\r\n  const room = useEnsureRoom(options.room);\r\n  const [localParticipant, setLocalParticipant] = React.useState(room.localParticipant);\r\n  const [isMicrophoneEnabled, setIsMicrophoneEnabled] = React.useState(\r\n    localParticipant.isMicrophoneEnabled,\r\n  );\r\n  const [isCameraEnabled, setIsCameraEnabled] = React.useState(\r\n    localParticipant.isMicrophoneEnabled,\r\n  );\r\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = React.useState(\r\n    localParticipant.isMicrophoneEnabled,\r\n  );\r\n  const [microphoneTrack, setMicrophoneTrack] = React.useState<TrackPublication | undefined>(\r\n    undefined,\r\n  );\r\n  const [cameraTrack, setCameraTrack] = React.useState<TrackPublication | undefined>(undefined);\r\n\r\n  const handleUpdate = (media: ParticipantMedia<LocalParticipant>) => {\r\n    setIsCameraEnabled(media.isCameraEnabled);\r\n    setIsMicrophoneEnabled(media.isMicrophoneEnabled);\r\n    setIsScreenShareEnabled(media.isScreenShareEnabled);\r\n    setCameraTrack(media.cameraTrack);\r\n    setMicrophoneTrack(media.microphoneTrack);\r\n    setLocalParticipant(media.participant);\r\n  };\r\n  React.useEffect(() => {\r\n    const listener = observeParticipantMedia(localParticipant).subscribe(handleUpdate);\r\n    // TODO also listen to permission and metadata etc. events\r\n    return () => listener.unsubscribe();\r\n  }, [localParticipant]);\r\n\r\n  return {\r\n    isMicrophoneEnabled,\r\n    isScreenShareEnabled,\r\n    isCameraEnabled,\r\n    microphoneTrack,\r\n    cameraTrack,\r\n    localParticipant,\r\n  };\r\n};\r\n","import { participantPermissionObserver } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../context';\r\nimport { useObservableState } from './internal';\r\n\r\n/** @public */\r\nexport function useLocalParticipantPermissions() {\r\n  const room = useRoomContext();\r\n  const permissionObserver = React.useMemo(\r\n    () => participantPermissionObserver(room.localParticipant),\r\n    [room],\r\n  );\r\n  const permissions = useObservableState(permissionObserver, room.localParticipant.permissions);\r\n  return permissions;\r\n}\r\n","import type { TrackIdentifier } from '@livekit/components-core';\r\nimport { isTrackReference } from '@livekit/components-core';\r\nimport { setupMediaTrack, log, isLocal, getTrackByIdentifier } from '@livekit/components-core';\r\nimport { Track } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { mergeProps } from '../utils';\r\nimport type { UseMediaTrackOptions } from './useMediaTrack';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function useMediaTrackBySourceOrName(\r\n  observerOptions: TrackIdentifier,\r\n  options: UseMediaTrackOptions = {},\r\n) {\r\n  const [publication, setPublication] = React.useState(getTrackByIdentifier(observerOptions));\r\n\r\n  const [isMuted, setMuted] = React.useState(publication?.isMuted);\r\n  const [isSubscribed, setSubscribed] = React.useState(publication?.isSubscribed);\r\n  const [track, setTrack] = React.useState(publication?.track);\r\n  const [orientation, setOrientation] = React.useState<'landscape' | 'portrait'>('landscape');\r\n  const previousElement = React.useRef<HTMLMediaElement | undefined | null>();\r\n\r\n  const { className, trackObserver } = React.useMemo(() => {\r\n    return setupMediaTrack(observerOptions);\r\n  }, [\r\n    observerOptions.participant.identity,\r\n    observerOptions.source,\r\n    isTrackReference(observerOptions) && observerOptions.publication.trackSid,\r\n  ]);\r\n\r\n  React.useEffect(() => {\r\n    const subscription = trackObserver.subscribe((publication) => {\r\n      log.debug('update track', publication);\r\n      setPublication(publication);\r\n      setMuted(publication?.isMuted);\r\n      setSubscribed(publication?.isSubscribed);\r\n      setTrack(publication?.track);\r\n    });\r\n    return () => subscription?.unsubscribe();\r\n  }, [trackObserver]);\r\n\r\n  React.useEffect(() => {\r\n    if (track) {\r\n      if (previousElement.current) {\r\n        track.detach(previousElement.current);\r\n      }\r\n      if (\r\n        options.element?.current &&\r\n        !(isLocal(observerOptions.participant) && track?.kind === 'audio')\r\n      ) {\r\n        track.attach(options.element.current);\r\n      }\r\n    }\r\n    previousElement.current = options.element?.current;\r\n    return () => {\r\n      if (previousElement.current) {\r\n        track?.detach(previousElement.current);\r\n      }\r\n    };\r\n  }, [track, options.element]);\r\n\r\n  React.useEffect(() => {\r\n    // Set the orientation of the video track.\r\n    // TODO: This does not handle changes in orientation after a track got published (e.g when rotating a phone camera from portrait to landscape).\r\n    if (\r\n      typeof publication?.dimensions?.width === 'number' &&\r\n      typeof publication?.dimensions?.height === 'number'\r\n    ) {\r\n      const orientation_ =\r\n        publication.dimensions.width > publication.dimensions.height ? 'landscape' : 'portrait';\r\n      setOrientation(orientation_);\r\n    }\r\n  }, [publication]);\r\n\r\n  return {\r\n    publication,\r\n    isMuted,\r\n    isSubscribed,\r\n    track,\r\n    elementProps: mergeProps(options.props, {\r\n      className,\r\n      'data-lk-local-participant': observerOptions.participant.isLocal,\r\n      'data-lk-source': publication?.source,\r\n      ...(publication?.source === Track.Source.Camera ||\r\n      publication?.source === Track.Source.ScreenShare\r\n        ? { 'data-lk-orientation': orientation }\r\n        : {}),\r\n    }),\r\n  };\r\n}\r\n","import type { VideoSource, AudioSource } from '@livekit/components-core';\r\nimport type { Participant } from 'livekit-client';\r\nimport { useEnsureParticipant } from '../context/participant-context';\r\nimport { useMediaTrackBySourceOrName } from './useMediaTrackBySourceOrName';\r\n\r\n/** @public */\r\nexport interface UseMediaTrackOptions {\r\n  element?: React.RefObject<HTMLMediaElement>;\r\n  props?: React.HTMLAttributes<HTMLVideoElement | HTMLAudioElement>;\r\n}\r\n\r\n/** @public */\r\nexport function useMediaTrack(\r\n  source: VideoSource | AudioSource,\r\n  participant?: Participant,\r\n  options: UseMediaTrackOptions = {},\r\n) {\r\n  const p = useEnsureParticipant(participant);\r\n  return useMediaTrackBySourceOrName({ source, participant: p }, options);\r\n}\r\n","import type { Participant } from 'livekit-client';\r\nimport { useEnsureParticipant } from '../context';\r\nimport type { UseMediaTrackOptions } from './useMediaTrack';\r\nimport { useMediaTrackBySourceOrName } from './useMediaTrackBySourceOrName';\r\n\r\n/** @public */\r\nexport function useMediaTrackByName(\r\n  name: string,\r\n  participant?: Participant,\r\n  options: UseMediaTrackOptions = {},\r\n) {\r\n  const p = useEnsureParticipant(participant);\r\n  return useMediaTrackBySourceOrName({ name, participant: p }, options);\r\n}\r\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useVisualStableUpdate } from './useVisualStableUpdate';\r\n\r\n/**\r\n * The `usePagination` hook implements simple pagination logic for use with arrays.\r\n * @example\r\n * ```tsx\r\n * const tracks = useTracks();\r\n * const pagination = usePagination(4, tracks);\r\n *\r\n * <TrackLoop tracks={pagination.tracks} />\r\n * ```\r\n * @alpha\r\n */\r\nexport function usePagination(itemPerPage: number, trackReferences: TrackReferenceOrPlaceholder[]) {\r\n  const [currentPage, setCurrentPage] = React.useState(1);\r\n  const totalPageCount = Math.max(Math.ceil(trackReferences.length / itemPerPage), 1);\r\n  if (currentPage > totalPageCount) {\r\n    setCurrentPage(totalPageCount);\r\n  }\r\n  const lastItemIndex = currentPage * itemPerPage;\r\n  const firstItemIndex = lastItemIndex - itemPerPage;\r\n\r\n  const changePage = (direction: 'next' | 'previous') => {\r\n    setCurrentPage((state) => {\r\n      if (direction === 'next') {\r\n        if (state === totalPageCount) {\r\n          return state;\r\n        }\r\n        return state + 1;\r\n      } else {\r\n        if (state === 1) {\r\n          return state;\r\n        }\r\n        return state - 1;\r\n      }\r\n    });\r\n  };\r\n\r\n  const goToPage = (num: number) => {\r\n    if (num > totalPageCount) {\r\n      setCurrentPage(totalPageCount);\r\n    } else if (num < 1) {\r\n      setCurrentPage(1);\r\n    } else {\r\n      setCurrentPage(num);\r\n    }\r\n  };\r\n\r\n  const updatedTrackReferences = useVisualStableUpdate(trackReferences, itemPerPage);\r\n\r\n  return {\r\n    totalPageCount,\r\n    nextPage: () => changePage('next'),\r\n    prevPage: () => changePage('previous'),\r\n    setPage: goToPage,\r\n    firstItemIndex,\r\n    lastItemIndex,\r\n    tracks: updatedTrackReferences.slice(firstItemIndex, lastItemIndex),\r\n    currentPage,\r\n  };\r\n}\r\n\r\nexport default usePagination;\r\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport { log, sortTrackReferences, updatePages } from '@livekit/components-core';\r\nimport * as React from 'react';\r\n\r\n/** @public */\r\nexport interface UseVisualStableUpdateOptions {\r\n  /** Overwrites the default sort function. */\r\n  customSortFunction?: (\r\n    trackReferences: TrackReferenceOrPlaceholder[],\r\n  ) => TrackReferenceOrPlaceholder[];\r\n}\r\n\r\n/**\r\n * The useVisualStableUpdate hook tries to keep visual updates of the TackBundles array to a minimum,\r\n * while still trying to display important tiles such as speaking participants or screen shares.\r\n *\r\n * Updating works with pagination. For example, if a participant starts speaking on the second page,\r\n * they will be moved to the first page by replacing the least active/interesting participant on the first page.\r\n *\r\n * @beta\r\n */\r\nexport function useVisualStableUpdate(\r\n  /** `TrackReference`s to display in the grid.  */\r\n  trackReferences: TrackReferenceOrPlaceholder[],\r\n  maxItemsOnPage: number,\r\n  options: UseVisualStableUpdateOptions = {},\r\n): TrackReferenceOrPlaceholder[] {\r\n  const lastTrackRefs = React.useRef<TrackReferenceOrPlaceholder[]>([]);\r\n  const lastMaxItemsOnPage = React.useRef<number>(-1);\r\n  const layoutChanged = maxItemsOnPage !== lastMaxItemsOnPage.current;\r\n\r\n  const sortedTrackRefs =\r\n    typeof options.customSortFunction === 'function'\r\n      ? options.customSortFunction(trackReferences)\r\n      : sortTrackReferences(trackReferences);\r\n\r\n  let updatedTrackRefs: TrackReferenceOrPlaceholder[] = [...sortedTrackRefs];\r\n  if (layoutChanged === false) {\r\n    try {\r\n      updatedTrackRefs = updatePages(lastTrackRefs.current, sortedTrackRefs, maxItemsOnPage);\r\n    } catch (error) {\r\n      log.error('Error while running updatePages(): ', error);\r\n    }\r\n  }\r\n\r\n  // Save info for to compare against in the next update cycle.\r\n  if (layoutChanged) {\r\n    lastTrackRefs.current = sortedTrackRefs;\r\n  } else {\r\n    lastTrackRefs.current = updatedTrackRefs;\r\n  }\r\n  lastMaxItemsOnPage.current = maxItemsOnPage;\r\n\r\n  return updatedTrackRefs;\r\n}\r\n","import * as React from 'react';\r\nimport type { Participant } from 'livekit-client';\r\nimport { participantPermissionObserver } from '@livekit/components-core';\r\nimport { useEnsureParticipant } from '../context';\r\nimport { useObservableState } from './internal/useObservableState';\r\n\r\n/** @public */\r\nexport interface UseParticipantPermissionsOptions {\r\n  participant?: Participant;\r\n}\r\n\r\n/** @public */\r\nexport function useParticipantPermissions(options: UseParticipantPermissionsOptions = {}) {\r\n  const p = useEnsureParticipant(options.participant);\r\n  const permissionObserver = React.useMemo(() => participantPermissionObserver(p), [p]);\r\n  const permissions = useObservableState(permissionObserver, p.permissions);\r\n  return permissions;\r\n}\r\n","import { connectedParticipantsObserver } from '@livekit/components-core';\r\nimport type { RoomEvent, RemoteParticipant, Room } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useEnsureRoom } from '../context';\r\n\r\n/** @public */\r\nexport interface UseRemoteParticipantsOptions {\r\n  /**\r\n   * To optimize performance, you can use the `updateOnlyOn` property to decide on what RoomEvents the hook updates.\r\n   * By default it updates on all relevant RoomEvents to keep the returned participants array up to date.\r\n   * The minimal set of non-overwriteable `RoomEvents` is: `[RoomEvent.ParticipantConnected, RoomEvent.ParticipantDisconnected, RoomEvent.ConnectionStateChanged]`\r\n   */\r\n  updateOnlyOn?: RoomEvent[];\r\n  /**\r\n   * The room to use. If not provided, the hook will use the room from the context.\r\n   */\r\n  room?: Room;\r\n}\r\n\r\n/**\r\n * The useRemoteParticipants\r\n *\r\n * @public\r\n */\r\nexport const useRemoteParticipants = (options: UseRemoteParticipantsOptions = {}) => {\r\n  const room = useEnsureRoom(options.room);\r\n  const [participants, setParticipants] = React.useState<RemoteParticipant[]>([]);\r\n\r\n  React.useEffect(() => {\r\n    const listener = connectedParticipantsObserver(room, {\r\n      additionalRoomEvents: options.updateOnlyOn,\r\n    }).subscribe(setParticipants);\r\n    return () => listener.unsubscribe();\r\n  }, [room, JSON.stringify(options.updateOnlyOn)]);\r\n  return participants;\r\n};\r\n","import type { Room, RoomEvent } from 'livekit-client';\r\nimport { useLocalParticipant } from './useLocalParticipant';\r\nimport { useRemoteParticipants } from './useRemoteParticipants';\r\n\r\n/** @public */\r\nexport interface UseParticipantsOptions {\r\n  /**\r\n   * To optimize performance, you can use the `updateOnlyOn` property to decide on what RoomEvents the hook updates.\r\n   * By default it updates on all relevant RoomEvents to keep the returned participants array up to date.\r\n   * The minimal set of non-overwriteable `RoomEvents` is: `[RoomEvent.ParticipantConnected, RoomEvent.ParticipantDisconnected, RoomEvent.ConnectionStateChanged]`\r\n   */\r\n  updateOnlyOn?: RoomEvent[];\r\n  /**\r\n   * The room to use. If not provided, the hook will use the room from the context.\r\n   */\r\n  room?: Room;\r\n}\r\n\r\n/**\r\n * The useParticipants hook returns all participants (local and remote) of the current room.\r\n * @public\r\n */\r\nexport const useParticipants = (options: UseParticipantsOptions = {}) => {\r\n  const remoteParticipants = useRemoteParticipants(options);\r\n  const { localParticipant } = useLocalParticipant(options);\r\n\r\n  return [localParticipant, ...remoteParticipants];\r\n};\r\n","import { connectedParticipantObserver } from '@livekit/components-core';\r\nimport type { ParticipantEvent, RemoteParticipant } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../context';\r\nimport { useObservableState } from './internal';\r\n\r\n/** @public */\r\nexport interface UseRemoteParticipantOptions {\r\n  updateOnlyOn?: ParticipantEvent[];\r\n}\r\n\r\n/** @public */\r\nexport const useRemoteParticipant = (\r\n  identity: string,\r\n  options: UseRemoteParticipantOptions = {},\r\n): RemoteParticipant | undefined => {\r\n  const room = useRoomContext();\r\n  const [updateOnlyOn] = React.useState(options.updateOnlyOn);\r\n\r\n  const observable = React.useMemo(\r\n    () => connectedParticipantObserver(room, identity, { additionalEvents: updateOnlyOn }),\r\n    [room, identity, updateOnlyOn],\r\n  );\r\n  const participant = useObservableState(\r\n    observable,\r\n    room.getParticipantByIdentity(identity) as RemoteParticipant | undefined,\r\n  );\r\n  return participant;\r\n};\r\n","import { sortParticipants } from '@livekit/components-core';\r\nimport type { Participant } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useSpeakingParticipants } from './useSpeakingParticipants';\r\n\r\n/**\r\n * The useSortedParticipants hook returns the only the active speakers of all participants.\r\n *\r\n * @public\r\n */\r\nexport function useSortedParticipants(participants: Array<Participant>) {\r\n  const [sortedParticipants, setSortedParticipants] = React.useState(\r\n    sortParticipants(participants),\r\n  );\r\n  const activeSpeakers = useSpeakingParticipants();\r\n\r\n  React.useEffect(() => {\r\n    setSortedParticipants(sortParticipants(participants));\r\n  }, [activeSpeakers, participants]);\r\n  return sortedParticipants;\r\n}\r\n","import { activeSpeakerObserver } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../context';\r\nimport { useObservableState } from './internal';\r\n\r\n/**\r\n * The useSpeakingParticipants hook returns the only the active speakers of all participants.\r\n *\r\n * @public\r\n */\r\nexport const useSpeakingParticipants = () => {\r\n  const room = useRoomContext();\r\n  const speakerObserver = React.useMemo(() => activeSpeakerObserver(room), [room]);\r\n  const activeSpeakers = useObservableState(speakerObserver, room.activeSpeakers);\r\n  return activeSpeakers;\r\n};\r\n","import { log } from '@livekit/components-core';\r\nimport * as React from 'react';\r\n\r\n/** @public */\r\nexport interface UserInfo {\r\n  identity?: string;\r\n  name?: string;\r\n  metadata?: string;\r\n}\r\n\r\n/** @public */\r\nexport interface UseTokenOptions {\r\n  userInfo?: UserInfo;\r\n}\r\n\r\n/** @public */\r\nexport function useToken(\r\n  tokenEndpoint: string | undefined,\r\n  roomName: string,\r\n  options: UseTokenOptions = {},\r\n) {\r\n  const [token, setToken] = React.useState<string | undefined>(undefined);\r\n\r\n  React.useEffect(() => {\r\n    if (tokenEndpoint === undefined) {\r\n      throw Error('token endpoint needs to be defined');\r\n    }\r\n    if (options.userInfo?.identity === undefined) {\r\n      return;\r\n    }\r\n    const tokenFetcher = async () => {\r\n      log.debug('fetching token');\r\n      const params = new URLSearchParams({ ...options.userInfo, roomName });\r\n      const res = await fetch(`${tokenEndpoint}?${params.toString()}`);\r\n      const { accessToken } = await res.json();\r\n      setToken(accessToken);\r\n    };\r\n    tokenFetcher();\r\n  }, [tokenEndpoint, roomName, options]);\r\n  return token;\r\n}\r\n","import type {\r\n  SourcesArray,\r\n  TrackReference,\r\n  TrackReferenceOrPlaceholder,\r\n  TrackSourceWithOptions,\r\n  TrackReferencePlaceholder,\r\n} from '@livekit/components-core';\r\nimport {\r\n  isSourcesWithOptions,\r\n  isSourceWitOptions,\r\n  log,\r\n  trackReferencesObservable,\r\n} from '@livekit/components-core';\r\nimport type { Participant, Room, RoomEvent } from 'livekit-client';\r\nimport { Track } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useEnsureRoom } from '../context';\r\n\r\n/** @public */\r\nexport type UseTracksOptions = {\r\n  updateOnlyOn?: RoomEvent[];\r\n  onlySubscribed?: boolean;\r\n  room?: Room;\r\n};\r\n\r\n/** @public */\r\nexport type UseTracksHookReturnType<T> = T extends Track.Source[]\r\n  ? TrackReference[]\r\n  : T extends TrackSourceWithOptions[]\r\n  ? TrackReferenceOrPlaceholder[]\r\n  : never;\r\n\r\n/**\r\n * The `useTracks` hook returns an array of `TrackReference` or `TrackReferenceOrPlaceholder` depending on the provided `sources` property.\r\n * If only subscribed tracks are desired, set the `onlySubscribed` property to `true`.\r\n * @example\r\n * ```ts\r\n * // Return all camera track publications.\r\n * const trackReferences: TrackReference[] = useTracks([Track.Source.Camera])\r\n * ```\r\n * @example\r\n * ```ts\r\n * // Return all subscribed camera tracks as well as placeholders for\r\n * // participants without a camera subscription.\r\n * const trackReferencesWithPlaceholders: TrackReferenceOrPlaceholder[] = useTracks([{source: Track.Source.Camera, withPlaceholder: true}])\r\n * ```\r\n * @public\r\n */\r\nexport function useTracks<T extends SourcesArray = Track.Source[]>(\r\n  sources: T = [\r\n    Track.Source.Camera,\r\n    Track.Source.Microphone,\r\n    Track.Source.ScreenShare,\r\n    Track.Source.ScreenShareAudio,\r\n    Track.Source.Unknown,\r\n  ] as T,\r\n  options: UseTracksOptions = {},\r\n): UseTracksHookReturnType<T> {\r\n  const room = useEnsureRoom(options.room);\r\n  const [trackReferences, setTrackReferences] = React.useState<TrackReference[]>([]);\r\n  const [participants, setParticipants] = React.useState<Participant[]>([]);\r\n\r\n  const sources_ = React.useMemo(() => {\r\n    return sources.map((s) => (isSourceWitOptions(s) ? s.source : s));\r\n  }, [JSON.stringify(sources)]);\r\n\r\n  React.useEffect(() => {\r\n    const subscription = trackReferencesObservable(room, sources_, {\r\n      additionalRoomEvents: options.updateOnlyOn,\r\n      onlySubscribed: options.onlySubscribed,\r\n    }).subscribe(({ trackReferences, participants }) => {\r\n      log.debug('setting track bundles', trackReferences, participants);\r\n      setTrackReferences(trackReferences);\r\n      setParticipants(participants);\r\n    });\r\n    return () => subscription.unsubscribe();\r\n  }, [room, JSON.stringify(options.updateOnlyOn), JSON.stringify(sources)]);\r\n\r\n  const maybeTrackReferences = React.useMemo(() => {\r\n    if (isSourcesWithOptions(sources)) {\r\n      const requirePlaceholder = requiredPlaceholders(sources, participants);\r\n      const trackReferencesWithPlaceholders = Array.from(\r\n        trackReferences,\r\n      ) as TrackReferenceOrPlaceholder[];\r\n      participants.forEach((participant) => {\r\n        if (requirePlaceholder.has(participant.identity)) {\r\n          const sourcesToAddPlaceholder = requirePlaceholder.get(participant.identity) ?? [];\r\n          sourcesToAddPlaceholder.forEach((placeholderSource) => {\r\n            if (\r\n              trackReferences.find(\r\n                ({ participant: p, publication }) =>\r\n                  participant.identity === p.identity && publication.source === placeholderSource,\r\n              )\r\n            ) {\r\n              return;\r\n            }\r\n            log.debug(\r\n              `Add ${placeholderSource} placeholder for participant ${participant.identity}.`,\r\n            );\r\n            const placeholder: TrackReferencePlaceholder = {\r\n              participant,\r\n              source: placeholderSource,\r\n            };\r\n            trackReferencesWithPlaceholders.push(placeholder);\r\n          });\r\n        }\r\n      });\r\n      return trackReferencesWithPlaceholders;\r\n    } else {\r\n      return trackReferences;\r\n    }\r\n  }, [trackReferences, participants, sources]);\r\n\r\n  return maybeTrackReferences as UseTracksHookReturnType<T>;\r\n}\r\n\r\nfunction difference<T>(setA: Set<T>, setB: Set<T>): Set<T> {\r\n  const _difference = new Set(setA);\r\n  for (const elem of setB) {\r\n    _difference.delete(elem);\r\n  }\r\n  return _difference;\r\n}\r\n\r\nexport function requiredPlaceholders<T extends SourcesArray>(\r\n  sources: T,\r\n  participants: Participant[],\r\n): Map<Participant['identity'], Track.Source[]> {\r\n  const placeholderMap = new Map<Participant['identity'], Track.Source[]>();\r\n  if (isSourcesWithOptions(sources)) {\r\n    const sourcesThatNeedPlaceholder = sources\r\n      .filter((sourceWithOption) => sourceWithOption.withPlaceholder)\r\n      .map((sourceWithOption) => sourceWithOption.source);\r\n\r\n    participants.forEach((participant) => {\r\n      const sourcesOfSubscribedTracks = participant\r\n        .getTracks()\r\n        .map((pub) => pub.track?.source)\r\n        .filter((trackSource): trackSource is Track.Source => trackSource !== undefined);\r\n      const placeholderNeededForThisParticipant = Array.from(\r\n        difference(new Set(sourcesThatNeedPlaceholder), new Set(sourcesOfSubscribedTracks)),\r\n      );\r\n      // If the participant needs placeholder add it to the placeholder map.\r\n      if (placeholderNeededForThisParticipant.length > 0) {\r\n        placeholderMap.set(participant.identity, placeholderNeededForThisParticipant);\r\n      }\r\n    });\r\n  }\r\n  return placeholderMap;\r\n}\r\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport type { LayoutContextType } from '../context';\r\nimport { useEnsureLayoutContext } from '../context';\r\n\r\n/** @public */\r\nexport function usePinnedTracks(layoutContext?: LayoutContextType): TrackReferenceOrPlaceholder[] {\r\n  layoutContext = useEnsureLayoutContext(layoutContext);\r\n  return React.useMemo(() => {\r\n    if (layoutContext?.pin.state !== undefined && layoutContext.pin.state.length >= 1) {\r\n      return layoutContext.pin.state;\r\n    }\r\n    return [];\r\n  }, [layoutContext]);\r\n}\r\n","import * as React from 'react';\r\n\r\n/**\r\n * @alpha\r\n */\r\nexport type UseSwipeOptions = {\r\n  minSwipeDistance?: number;\r\n  onLeftSwipe?: () => void;\r\n  onRightSwipe?: () => void;\r\n};\r\n\r\n/**\r\n * Simple implementation to detect horizontal swipe actions.\r\n * Accepts callbacks for on right and left swipes.\r\n * @example\r\n * ```tsx\r\n *  <div\r\n      onTouchStart={onTouchStart}\r\n      onTouchMove={onTouchMove}\r\n      onTouchEnd={onTouchEnd}\r\n    >\r\n * ```\r\n * @alpha\r\n */\r\nexport function useSwipe(element: React.RefObject<HTMLElement>, options: UseSwipeOptions = {}) {\r\n  const touchStart = React.useRef<number | null>(null);\r\n  const touchEnd = React.useRef<number | null>(null);\r\n\r\n  // The required distance between touchStart and touchEnd to be detected as a swipe.\r\n  const minSwipeDistance = options.minSwipeDistance ?? 50;\r\n\r\n  const onTouchStart = (event: TouchEvent) => {\r\n    touchEnd.current = null; // Otherwise the swipe is fired even with usual touch events.\r\n    touchStart.current = event.targetTouches[0].clientX;\r\n  };\r\n\r\n  const onTouchMove = (event: TouchEvent) => {\r\n    touchEnd.current = event.targetTouches[0].clientX;\r\n  };\r\n\r\n  const onTouchEnd = React.useCallback(() => {\r\n    if (!touchStart.current || !touchEnd.current) {\r\n      return;\r\n    }\r\n    const distance = touchStart.current - touchEnd.current;\r\n    const isLeftSwipe = distance > minSwipeDistance;\r\n    const isRightSwipe = distance < -minSwipeDistance;\r\n\r\n    if (isLeftSwipe && options.onLeftSwipe) options.onLeftSwipe();\r\n    if (isRightSwipe && options.onRightSwipe) options.onRightSwipe();\r\n  }, [minSwipeDistance, options]);\r\n\r\n  React.useEffect(() => {\r\n    const elementCopy = element.current;\r\n    if (elementCopy) {\r\n      elementCopy.addEventListener('touchstart', onTouchStart);\r\n      elementCopy.addEventListener('touchmove', onTouchMove);\r\n      elementCopy.addEventListener('touchend', onTouchEnd);\r\n    }\r\n    return () => {\r\n      if (elementCopy) {\r\n        elementCopy.removeEventListener('touchstart', onTouchStart);\r\n        elementCopy.removeEventListener('touchmove', onTouchMove);\r\n        elementCopy.removeEventListener('touchend', onTouchEnd);\r\n      }\r\n    };\r\n  }, [element, onTouchEnd]);\r\n}\r\n","import type { Participant, Track, TrackPublication } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useMediaTrackBySourceOrName } from '../../hooks/useMediaTrackBySourceOrName';\r\nimport type { ParticipantClickEvent } from '@livekit/components-core';\r\nimport { useEnsureParticipant } from '../../context';\r\n\r\n/** @public */\r\nexport type VideoTrackProps = React.HTMLAttributes<HTMLVideoElement> & {\r\n  source: Track.Source;\r\n  name?: string;\r\n  participant?: Participant;\r\n  publication?: TrackPublication;\r\n  onTrackClick?: (evt: ParticipantClickEvent) => void;\r\n  onSubscriptionStatusChanged?: (subscribed: boolean) => void;\r\n};\r\n\r\n/**\r\n * The VideoTrack component is responsible for rendering participant video tracks like `camera` and `screen_share`.\r\n * This component must have access to the participant's context, or alternatively pass it a `Participant` as a property.\r\n *\r\n * @example\r\n * ```tsx\r\n * <VideoTrack source={Track.Source.Camera} />\r\n * ```\r\n * @see {@link @livekit/components-react#ParticipantTile |ParticipantTile}\r\n * @public\r\n */\r\nexport function VideoTrack({\r\n  onTrackClick,\r\n  onClick,\r\n  onSubscriptionStatusChanged,\r\n  name,\r\n  publication,\r\n  source,\r\n  ...props\r\n}: VideoTrackProps) {\r\n  const mediaEl = React.useRef<HTMLVideoElement>(null);\r\n  const participant = useEnsureParticipant(props.participant);\r\n  const {\r\n    elementProps,\r\n    publication: pub,\r\n    isSubscribed,\r\n  } = useMediaTrackBySourceOrName(\r\n    { participant, name, source, publication },\r\n    {\r\n      element: mediaEl,\r\n      props,\r\n    },\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    onSubscriptionStatusChanged?.(!!isSubscribed);\r\n  }, [isSubscribed, onSubscriptionStatusChanged]);\r\n\r\n  const clickHandler = (evt: React.MouseEvent<HTMLVideoElement, MouseEvent>) => {\r\n    onClick?.(evt);\r\n    onTrackClick?.({ participant, track: pub });\r\n  };\r\n\r\n  return <video ref={mediaEl} {...elementProps} muted={true} onClick={clickHandler}></video>;\r\n}\r\n","import type { Participant, Track, TrackPublication } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useMediaTrackBySourceOrName } from '../../hooks/useMediaTrackBySourceOrName';\r\nimport { log } from '@livekit/components-core';\r\nimport { useEnsureParticipant } from '../../context';\r\nimport { RemoteAudioTrack } from 'livekit-client';\r\n\r\n/** @public */\r\nexport type AudioTrackProps<T extends HTMLMediaElement = HTMLMediaElement> =\r\n  React.HTMLAttributes<T> & {\r\n    source: Track.Source;\r\n    name?: string;\r\n    participant?: Participant;\r\n    publication?: TrackPublication;\r\n    onSubscriptionStatusChanged?: (subscribed: boolean) => void;\r\n    /** by the default the range is between 0 and 1 */\r\n    volume?: number;\r\n  };\r\n\r\n/**\r\n * The AudioTrack component is responsible for rendering participant audio tracks.\r\n * This component must have access to the participant's context, or alternatively pass it a `Participant` as a property.\r\n *\r\n * @example\r\n * ```tsx\r\n *   <ParticipantTile>\r\n *     <AudioTrack source={Track.Source.Microphone} />\r\n *   </ParticipantTile>\r\n * ```\r\n *\r\n * @see `ParticipantTile` component\r\n * @public\r\n */\r\nexport function AudioTrack({ onSubscriptionStatusChanged, volume, ...props }: AudioTrackProps) {\r\n  const { source, name, publication } = props;\r\n  const mediaEl = React.useRef<HTMLAudioElement>(null);\r\n  const participant = useEnsureParticipant(props.participant);\r\n\r\n  const { elementProps, isSubscribed, track } = useMediaTrackBySourceOrName(\r\n    { source, name, participant, publication },\r\n    {\r\n      element: mediaEl,\r\n      props,\r\n    },\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    onSubscriptionStatusChanged?.(!!isSubscribed);\r\n  }, [isSubscribed, onSubscriptionStatusChanged]);\r\n\r\n  React.useEffect(() => {\r\n    if (volume && track instanceof RemoteAudioTrack) {\r\n      track.setVolume(volume);\r\n    } else {\r\n      log.warn('volume can only be set on remote audio tracks');\r\n    }\r\n  }, [volume, track]);\r\n\r\n  return <audio ref={mediaEl} {...elementProps}></audio>;\r\n}\r\n","import * as React from 'react';\r\nexport const ParticipantNamePlaceholder = (props: any) => {\r\n  const [image, setImage] = React.useState<boolean>(false);\r\n\r\n  return (\r\n    <div>\r\n      {props.name && (\r\n        <img\r\n          style={image ? {} : { display: 'none' }}\r\n          src={`https://ui-avatars.com/api/?name=${props.name}&rounded=true&size=250&background=565656&bold=true`}\r\n          alt={`${props.name} profile image`}\r\n          onLoad={() => setImage(true)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport type { UseParticipantsOptions } from '../../hooks';\r\nimport { useGridLayout, usePagination, useSwipe } from '../../hooks';\r\nimport { mergeProps } from '../../utils';\r\nimport type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport { TrackLoop } from '../TrackLoop';\r\nimport { PaginationControl } from '../controls/PaginationControl';\r\nimport { PaginationIndicator } from '../controls/PaginationIndicator';\r\n\r\n/** @public */\r\nexport interface GridLayoutProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    Pick<UseParticipantsOptions, 'updateOnlyOn'> {\r\n  children: React.ReactNode;\r\n  tracks: TrackReferenceOrPlaceholder[];\r\n}\r\n\r\n/**\r\n * The GridLayout component displays the nested participants in a grid where every participants has the same size.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <GridLayout tracks={tracks}>\r\n *     <ParticipantTile />\r\n *   </GridLayout>\r\n * <LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function GridLayout({ tracks, ...props }: GridLayoutProps) {\r\n  const gridEl = React.createRef<HTMLDivElement>();\r\n\r\n  const elementProps = React.useMemo(\r\n    () => mergeProps(props, { className: 'lk-grid-layout' }),\r\n    [props],\r\n  );\r\n  const { layout } = useGridLayout(gridEl, tracks.length);\r\n  const pagination = usePagination(layout.maxTiles, tracks);\r\n\r\n  useSwipe(gridEl, {\r\n    onLeftSwipe: pagination.nextPage,\r\n    onRightSwipe: pagination.prevPage,\r\n  });\r\n\r\n  return (\r\n    <div ref={gridEl} data-lk-pagination={pagination.totalPageCount > 1} {...elementProps}>\r\n      <TrackLoop tracks={pagination.tracks}>{props.children}</TrackLoop>\r\n      {tracks.length > layout.maxTiles && (\r\n        <>\r\n          <PaginationIndicator\r\n            totalPageCount={pagination.totalPageCount}\r\n            currentPage={pagination.currentPage}\r\n          />\r\n          <PaginationControl pagesContainer={gridEl} {...pagination} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import type { TrackReference, TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport { isTrackReference } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { TrackContext } from '../context/track-context';\r\nimport { cloneSingleChild } from '../utils';\r\n\r\n/** @public */\r\nexport type TrackLoopProps = {\r\n  /** Track references to loop over. */\r\n  tracks: TrackReference[] | TrackReferenceOrPlaceholder[];\r\n  /** The template component to be used in the loop. */\r\n  children: React.ReactNode;\r\n};\r\n\r\n/**\r\n * The TrackLoop component loops over tracks. It is for example a easy way to loop over all participant camera and screen share tracks.\r\n * TrackLoop creates a TrackContext for each track that you can use to e.g. render the track.\r\n *\r\n * @example\r\n * ```tsx\r\n * const tracks = useTracks([Track.Source.Camera]);\r\n * <TrackLoop tracks={tracks} >\r\n *  <TrackContext.Consumer>\r\n *    {(track) => track && <VideoTrack {...track}/>}\r\n *  </TrackContext.Consumer>\r\n * <TrackLoop />\r\n * ```\r\n * @public\r\n */\r\nexport const TrackLoop = ({ tracks, ...props }: TrackLoopProps) => {\r\n  return (\r\n    <>\r\n      {tracks.map((trackReference) => {\r\n        const trackSource = isTrackReference(trackReference)\r\n          ? trackReference.publication.source\r\n          : trackReference.source;\r\n        return (\r\n          <TrackContext.Provider\r\n            value={trackReference}\r\n            key={`${trackReference.participant.identity}_${trackSource}`}\r\n          >\r\n            {cloneSingleChild(props.children)}\r\n          </TrackContext.Provider>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport SvgChevron from '../../assets/icons/Chevron';\r\nimport type { usePagination } from '../../hooks';\r\nimport { createInteractingObservable } from '@livekit/components-core';\r\n\r\nexport type PaginationControlProps = Pick<\r\n  ReturnType<typeof usePagination>,\r\n  'totalPageCount' | 'nextPage' | 'prevPage' | 'currentPage'\r\n> & {\r\n  /** Reference to an HTML element that holds the pages, while interacting (`mouseover`)\r\n   *  with it, the pagination controls will appear for a while. */\r\n  pagesContainer?: React.RefObject<HTMLElement>;\r\n};\r\n\r\nexport function PaginationControl({\r\n  totalPageCount,\r\n  nextPage,\r\n  prevPage,\r\n  currentPage,\r\n  pagesContainer: connectedElement,\r\n}: PaginationControlProps) {\r\n  const [interactive, setInteractive] = React.useState(false);\r\n  React.useEffect(() => {\r\n    let subscription:\r\n      | ReturnType<ReturnType<typeof createInteractingObservable>['subscribe']>\r\n      | undefined;\r\n    if (connectedElement) {\r\n      subscription = createInteractingObservable(connectedElement.current, 2000).subscribe(\r\n        setInteractive,\r\n      );\r\n    }\r\n    return () => {\r\n      if (subscription) {\r\n        subscription.unsubscribe();\r\n      }\r\n    };\r\n  }, [connectedElement]);\r\n\r\n  return (\r\n    <div className=\"lk-pagination-control\" data-lk-user-interaction={interactive}>\r\n      <button className=\"lk-button\" onClick={prevPage}>\r\n        <SvgChevron />\r\n      </button>\r\n      <span className=\"lk-pagination-count\">{`${currentPage} of ${totalPageCount}`}</span>\r\n      <button className=\"lk-button\" onClick={nextPage}>\r\n        <SvgChevron />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from 'react';\r\n\r\nexport type PaginationIndicatorProps = {\r\n  totalPageCount: number;\r\n  currentPage: number;\r\n};\r\n\r\nexport function PaginationIndicator({ totalPageCount, currentPage }: PaginationIndicatorProps) {\r\n  const bubbles = new Array(totalPageCount).fill('').map((_, index) => {\r\n    if (index + 1 === currentPage) {\r\n      return <span data-lk-active key={index} />;\r\n    } else {\r\n      return <span key={index} />;\r\n    }\r\n  });\r\n\r\n  return <div className=\"lk-pagination-indicator\">{bubbles}</div>;\r\n}\r\n","import type { TrackReferenceOrPlaceholder } from '@livekit/components-core';\r\nimport { getScrollBarWidth } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useSize } from '../../hooks/internal';\r\nimport { useVisualStableUpdate } from '../../hooks';\r\nimport { TrackLoop } from '../TrackLoop';\r\n\r\nconst MIN_HEIGHT = 130;\r\nconst MIN_WIDTH = 140;\r\nconst MIN_VISIBLE_TILES = 1;\r\nconst ASPECT_RATIO = 16 / 10;\r\nconst ASPECT_RATIO_INVERT = (1 - ASPECT_RATIO) * -1;\r\n\r\n/** @public */\r\nexport interface CarouselLayoutProps extends React.HTMLAttributes<HTMLMediaElement> {\r\n  tracks: TrackReferenceOrPlaceholder[];\r\n  children: React.ReactNode;\r\n  /** Place the tiles vertically or horizontally next to each other.\r\n   * If undefined orientation is guessed by the dimensions of the container. */\r\n  orientation?: 'vertical' | 'horizontal';\r\n}\r\n\r\n/**\r\n * @deprecated Renamed to [[CarouselLayout]]\r\n */\r\nexport const CarouselView = CarouselLayout;\r\n\r\n/**\r\n * The `CarouselLayout` displays a list of tracks horizontally or vertically.\r\n * Depending on the size of the container, the carousel will display as many tiles as possible and overflows the rest.\r\n * The CarouselLayout uses the `useVisualStableUpdate` hook to ensure that tile reordering due to track updates\r\n * is visually stable but still moves the important tiles (speaking participants) to the front.\r\n *\r\n * @example\r\n * ```tsx\r\n * const tracks = useTracks();\r\n * <CarouselLayout tracks={tracks}>\r\n *   <ParticipantTile />\r\n * </CarouselLayout>\r\n * ```\r\n * @public\r\n */\r\nexport function CarouselLayout({ tracks, orientation, ...props }: CarouselLayoutProps) {\r\n  const asideEl = React.useRef<HTMLDivElement>(null);\r\n\r\n  const { width, height } = useSize(asideEl);\r\n  const carouselOrientation = orientation\r\n    ? orientation\r\n    : height >= width\r\n    ? 'vertical'\r\n    : 'horizontal';\r\n  const tileHeight = Math.max(width * ASPECT_RATIO_INVERT, MIN_HEIGHT);\r\n  const tileWidth = Math.max(height * ASPECT_RATIO, MIN_WIDTH);\r\n\r\n  let maxVisibleTiles =\r\n    carouselOrientation === 'vertical'\r\n      ? Math.max(Math.floor(height / tileHeight), MIN_VISIBLE_TILES)\r\n      : Math.max(Math.floor(width / tileWidth), MIN_VISIBLE_TILES);\r\n\r\n  // To avoid an unstable UI state, on overflow, we need to consider the scrollbar wide and calculate the `maxVisibleTiles` again.\r\n  if (tracks.length > maxVisibleTiles) {\r\n    const scrollBarWidth = getScrollBarWidth();\r\n    maxVisibleTiles =\r\n      carouselOrientation === 'vertical'\r\n        ? Math.max(Math.floor(height / (tileHeight - scrollBarWidth)), MIN_VISIBLE_TILES)\r\n        : Math.max(Math.floor(width / (tileWidth - scrollBarWidth)), MIN_VISIBLE_TILES);\r\n  }\r\n\r\n  const sortedTiles = useVisualStableUpdate(tracks, maxVisibleTiles);\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (asideEl.current) {\r\n      asideEl.current.dataset.lkOrientation = carouselOrientation;\r\n      asideEl.current.style.setProperty('--lk-max-visible-tiles', maxVisibleTiles.toString());\r\n    }\r\n  }, [maxVisibleTiles, carouselOrientation]);\r\n\r\n  return (\r\n    <aside key={carouselOrientation} className=\"lk-carousel\" ref={asideEl} {...props}>\r\n      <TrackLoop tracks={sortedTiles}>{props.children}</TrackLoop>\r\n    </aside>\r\n  );\r\n}\r\n","import type { PinState, WidgetState } from '@livekit/components-core';\r\nimport { log } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport type { LayoutContextType } from '../../context';\r\nimport { LayoutContext, useEnsureCreateLayoutContext } from '../../context';\r\n\r\n/** @alpha */\r\nexport type LayoutContextProviderProps = {\r\n  value?: LayoutContextType;\r\n  onPinChange?: (state: PinState) => void;\r\n  onWidgetChange?: (state: WidgetState) => void;\r\n};\r\n\r\n/** @alpha */\r\nexport function LayoutContextProvider({\r\n  value,\r\n  onPinChange,\r\n  onWidgetChange,\r\n  children,\r\n}: React.PropsWithChildren<LayoutContextProviderProps>) {\r\n  const layoutContextValue = useEnsureCreateLayoutContext(value);\r\n\r\n  React.useEffect(() => {\r\n    log.debug('PinState Updated', { state: layoutContextValue.pin.state });\r\n    if (onPinChange && layoutContextValue.pin.state) onPinChange(layoutContextValue.pin.state);\r\n  }, [layoutContextValue.pin.state, onPinChange]);\r\n\r\n  React.useEffect(() => {\r\n    log.debug('Chat Widget Updated', { widgetState: layoutContextValue.widget.state });\r\n    if (onWidgetChange && layoutContextValue.widget.state) {\r\n      onWidgetChange(layoutContextValue.widget.state);\r\n    }\r\n  }, [onWidgetChange, layoutContextValue.widget.state]);\r\n\r\n  return <LayoutContext.Provider value={layoutContextValue}>{children}</LayoutContext.Provider>;\r\n}\r\n","import { log, setupLiveKitRoom } from '@livekit/components-core';\r\nimport type {\r\n  AudioCaptureOptions,\r\n  RoomConnectOptions,\r\n  RoomOptions,\r\n  ScreenShareCaptureOptions,\r\n  VideoCaptureOptions,\r\n} from 'livekit-client';\r\nimport { ConnectionState, MediaDeviceFailure, Room, RoomEvent } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { RoomContext } from '../context';\r\nimport { mergeProps } from '../utils';\r\n\r\n/** @public */\r\nexport interface LiveKitRoomProps extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onError'> {\r\n  /**\r\n   * URL to the LiveKit server.\r\n   * For example: `wss://<domain>.livekit.cloud`\r\n   * To simplify the implementation, `undefined` is also accepted as an intermediate value, but only with a valid string url can the connection be established.\r\n   */\r\n  serverUrl: string | undefined;\r\n  /**\r\n   * A user specific access token for a client to authenticate to the room.\r\n   * This token is necessary to establish a connection to the room.\r\n   * To simplify the implementation, `undefined` is also accepted as an intermediate value, but only with a valid string token can the connection be established.\r\n   *\r\n   * @see https://docs.livekit.io/cloud/project-management/keys-and-tokens/#generating-access-tokens\r\n   */\r\n  token: string | undefined;\r\n  /**\r\n   * Enable audio capabilities in your LiveKit room.\r\n   * @defaultValue `true`\r\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/AudioCaptureOptions.html\r\n   */\r\n  audio?: AudioCaptureOptions | boolean;\r\n  /**\r\n   * Enable video capabilities in your LiveKit room.\r\n   * @defaultValue `true`\r\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/VideoCaptureOptions.html\r\n   */\r\n  video?: VideoCaptureOptions | boolean;\r\n  /**\r\n   * Enable screen share capabilities in your LiveKit room.\r\n   * @defaultValue `true`\r\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/ScreenShareCaptureOptions.html\r\n   */\r\n  screen?: ScreenShareCaptureOptions | boolean;\r\n  /**\r\n   * If set to true a connection to LiveKit room is initiated.\r\n   * @defaultValue `true`\r\n   */\r\n  connect?: boolean;\r\n  /**\r\n   * Options for when creating a new room.\r\n   * When you pass your own room instance to this component, these options have no effect.\r\n   * Instead, set the options directly in the room instance.\r\n   *\r\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/RoomOptions.html\r\n   */\r\n  options?: RoomOptions;\r\n  /**\r\n   * Define options how to connect to the LiveKit server.\r\n   *\r\n   * @see https://docs.livekit.io/client-sdk-js/interfaces/RoomConnectOptions.html\r\n   */\r\n  connectOptions?: RoomConnectOptions;\r\n  onConnected?: () => void;\r\n  onDisconnected?: () => void;\r\n  onError?: (error: Error) => void;\r\n  onMediaDeviceFailure?: (failure?: MediaDeviceFailure) => void;\r\n  /**\r\n   * Optional room instance.\r\n   * By passing your own room instance you overwrite the `options` parameter,\r\n   * make sure to set the options directly on the room instance itself.\r\n   */\r\n  room?: Room;\r\n\r\n  simulateParticipants?: number | undefined;\r\n}\r\n\r\n// type RoomContextState = {\r\n//   room: Room;\r\n//   connectionState: ConnectionState;\r\n//   participants: Participant[];\r\n//   audioTracks: AudioTrack[];\r\n// };\r\n\r\nconst defaultRoomProps: Partial<LiveKitRoomProps> = {\r\n  connect: true,\r\n  audio: false,\r\n  video: false,\r\n};\r\n\r\n/** @public */\r\nexport function useLiveKitRoom(props: LiveKitRoomProps) {\r\n  const {\r\n    token,\r\n    serverUrl,\r\n    options,\r\n    room: passedRoom,\r\n    connectOptions,\r\n    connect,\r\n    audio,\r\n    video,\r\n    screen,\r\n    onConnected,\r\n    onDisconnected,\r\n    onError,\r\n    onMediaDeviceFailure,\r\n    simulateParticipants,\r\n    ...rest\r\n  } = { ...defaultRoomProps, ...props };\r\n  if (options && passedRoom) {\r\n    log.warn(\r\n      'when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.',\r\n    );\r\n  }\r\n\r\n  const [room, setRoom] = React.useState<Room | undefined>();\r\n\r\n  React.useEffect(() => {\r\n    setRoom(passedRoom ?? new Room(options));\r\n  }, [options, passedRoom]);\r\n\r\n  const htmlProps = React.useMemo(() => mergeProps(rest, setupLiveKitRoom()), [rest]);\r\n\r\n  React.useEffect(() => {\r\n    if (!room) return;\r\n    const onSignalConnected = () => {\r\n      const localP = room.localParticipant;\r\n      try {\r\n        log.debug('trying to publish local tracks');\r\n        localP.setMicrophoneEnabled(!!audio, typeof audio !== 'boolean' ? audio : undefined);\r\n        localP.setCameraEnabled(!!video, typeof video !== 'boolean' ? video : undefined);\r\n        localP.setScreenShareEnabled(!!screen, typeof screen !== 'boolean' ? screen : undefined);\r\n      } catch (e) {\r\n        log.warn(e);\r\n        onError?.(e as Error);\r\n      }\r\n    };\r\n\r\n    const onMediaDeviceError = (e: Error) => {\r\n      const mediaDeviceFailure = MediaDeviceFailure.getFailure(e);\r\n      onMediaDeviceFailure?.(mediaDeviceFailure);\r\n    };\r\n    room.on(RoomEvent.SignalConnected, onSignalConnected);\r\n    room.on(RoomEvent.MediaDevicesError, onMediaDeviceError);\r\n\r\n    return () => {\r\n      room.off(RoomEvent.SignalConnected, onSignalConnected);\r\n      room.off(RoomEvent.MediaDevicesError, onMediaDeviceError);\r\n    };\r\n  }, [room, audio, video, screen, onError]);\r\n\r\n  React.useEffect(() => {\r\n    if (!room) return;\r\n\r\n    if (simulateParticipants) {\r\n      room.simulateParticipants({\r\n        participants: {\r\n          count: simulateParticipants,\r\n        },\r\n        publish: {\r\n          audio: true,\r\n          useRealTracks: true,\r\n        },\r\n      });\r\n      return;\r\n    }\r\n    if (!token) {\r\n      log.debug('no token yet');\r\n      return;\r\n    }\r\n    if (!serverUrl) {\r\n      log.warn('no livekit url provided');\r\n      onError?.(Error('no livekit url provided'));\r\n      return;\r\n    }\r\n    if (connect) {\r\n      log.debug('connecting');\r\n      room.connect(serverUrl, token, connectOptions).catch((e) => {\r\n        log.warn(e);\r\n        onError?.(e as Error);\r\n      });\r\n    } else {\r\n      log.debug('disconnecting because connect is false');\r\n      room.disconnect();\r\n    }\r\n  }, [connect, token, connectOptions, room, onError, serverUrl, simulateParticipants]);\r\n\r\n  React.useEffect(() => {\r\n    if (!room) return;\r\n    const connectionStateChangeListener = (state: ConnectionState) => {\r\n      switch (state) {\r\n        case ConnectionState.Disconnected:\r\n          if (onDisconnected) onDisconnected();\r\n          break;\r\n        case ConnectionState.Connected:\r\n          if (onConnected) onConnected();\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n    room.on(RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\r\n    return () => {\r\n      room.off(RoomEvent.ConnectionStateChanged, connectionStateChangeListener);\r\n    };\r\n  }, [token, onConnected, onDisconnected, room]);\r\n\r\n  React.useEffect(() => {\r\n    if (!room) return;\r\n    return () => {\r\n      log.info('disconnecting on onmount');\r\n      room.disconnect();\r\n    };\r\n  }, [room]);\r\n\r\n  return { room, htmlProps };\r\n}\r\n\r\n/**\r\n * The LiveKitRoom component provides the room context to all its child components.\r\n * It is generally the starting point of your LiveKit app and the root of the LiveKit component tree.\r\n * It provides the room state as a React context to all child components, so you don't have to pass it yourself.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom\r\n *  token='<livekit-token>'\r\n *  serverUrl='<url-to-livekit-server>'\r\n *  connect={true}\r\n * >\r\n *     ...\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function LiveKitRoom(props: React.PropsWithChildren<LiveKitRoomProps>) {\r\n  const { room, htmlProps } = useLiveKitRoom(props);\r\n  return (\r\n    <div {...htmlProps}>\r\n      {room && <RoomContext.Provider value={room}>{props.children}</RoomContext.Provider>}\r\n    </div>\r\n  );\r\n}\r\n","import type { Participant } from 'livekit-client';\r\nimport { createAudioAnalyser, LocalAudioTrack, RemoteAudioTrack, Track } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useMediaTrack } from '../../hooks';\r\n\r\n/** @public */\r\nexport interface AudioVisualizerProps extends React.HTMLAttributes<SVGElement> {\r\n  participant?: Participant;\r\n}\r\n\r\n/** @public */\r\nexport function AudioVisualizer({ participant, ...props }: AudioVisualizerProps) {\r\n  const [volumeBars, setVolumeBars] = React.useState<Array<number>>([]);\r\n\r\n  const svgWidth = 200;\r\n  const svgHeight = 90;\r\n  const barWidth = 6;\r\n  const barSpacing = 4;\r\n  const volMultiplier = 50;\r\n  const barCount = 7;\r\n\r\n  const { track } = useMediaTrack(Track.Source.Microphone, participant);\r\n\r\n  React.useEffect(() => {\r\n    if (!track || !(track instanceof LocalAudioTrack || track instanceof RemoteAudioTrack)) {\r\n      return;\r\n    }\r\n    const { analyser, cleanup } = createAudioAnalyser(track, {\r\n      smoothingTimeConstant: 0.8,\r\n      fftSize: 64,\r\n    });\r\n\r\n    const dataArray = new Uint8Array(analyser.frequencyBinCount);\r\n\r\n    const calculateBars = () => {\r\n      analyser.getByteFrequencyData(dataArray);\r\n      const sums: Array<number> = new Array(barCount).fill(0);\r\n      dataArray.slice(1);\r\n      const binSize = 6;\r\n\r\n      for (let i = 0; i < barCount / 2; i += 1) {\r\n        const id = Math.floor(barCount / 2 - i);\r\n        for (let k = 0; k < binSize; k += 1) {\r\n          sums[id] += Math.pow(dataArray[i * binSize + k] / 255, 2);\r\n        }\r\n        sums[id] /= binSize;\r\n      }\r\n      for (let i = 0; i < barCount / 2; i += 1) {\r\n        const id = Math.floor(barCount / 2 + i);\r\n        if (sums[id] !== 0) {\r\n          continue;\r\n        }\r\n        for (let k = 0; k < binSize; k += 1) {\r\n          sums[id] += Math.pow(dataArray[i * binSize + k] / 255, 2);\r\n        }\r\n        sums[id] /= binSize;\r\n      }\r\n      return sums.map((s) => s * volMultiplier);\r\n    };\r\n\r\n    const calcInterval = setInterval(() => {\r\n      const bars = calculateBars();\r\n      setVolumeBars(bars);\r\n    }, 100);\r\n\r\n    return () => {\r\n      clearInterval(calcInterval);\r\n      cleanup();\r\n    };\r\n  }, [track]);\r\n\r\n  return (\r\n    <svg\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox={`0 0 ${svgWidth} ${svgHeight}`}\r\n      {...props}\r\n      className=\"lk-audio-visualizer\"\r\n    >\r\n      <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" />\r\n      <g\r\n        style={{\r\n          transform: `translate(${(svgWidth - barCount * (barWidth + barSpacing)) / 2}px, 0)`,\r\n        }}\r\n      >\r\n        {volumeBars.map((vol, idx) => (\r\n          <rect\r\n            key={idx}\r\n            x={idx * (barWidth + barSpacing)}\r\n            y={svgHeight / 2 - vol / 2}\r\n            width={barWidth}\r\n            height={vol}\r\n          ></rect>\r\n        ))}\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n","import type { Participant } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { ParticipantContext } from '../context';\r\nimport { cloneSingleChild } from '../utils';\r\n\r\n/** @public */\r\nexport type ParticipantLoopProps = {\r\n  /** The participants to loop over. If not provided, the participants from the current room context are used. */\r\n  participants: Participant[];\r\n  /** The template component to be used in the loop. */\r\n  children: React.ReactNode;\r\n};\r\n\r\n/**\r\n * The ParticipantLoop component loops over an array of participants to create a context for every participant.\r\n * This component takes exactly one child component as a template.\r\n * By providing your own template as a child you have full control over the look and feel of your participant representations.\r\n *\r\n * @remarks\r\n * If you want to loop over individual tracks instead of participants, you can use the `TrackLoop` component.\r\n *\r\n * @example\r\n * ```tsx\r\n * const participants = useParticipants();\r\n * <ParticipantLoop participants={participants}>\r\n *   <ParticipantName />\r\n * <ParticipantLoop />\r\n * ```\r\n * @public\r\n */\r\nexport const ParticipantLoop = ({ participants, ...props }: ParticipantLoopProps) => {\r\n  return (\r\n    <>\r\n      {participants.map((participant) => (\r\n        <ParticipantContext.Provider value={participant} key={participant.identity}>\r\n          {cloneSingleChild(props.children)}\r\n        </ParticipantContext.Provider>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n","import { isLocal } from '@livekit/components-core';\r\nimport { Track } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { useTracks } from '../hooks';\r\nimport { AudioTrack } from './participant/AudioTrack';\r\n\r\n/**\r\n * The RoomAudioRenderer component is a drop-in solution for adding audio to your LiveKit app.\r\n * It takes care of handling remote participants audio tracks and makes sure that microphones and screen share are audible.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <RoomAudioRenderer />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport const RoomAudioRenderer = () => {\r\n  const tracks = useTracks([Track.Source.Microphone, Track.Source.ScreenShareAudio], {\r\n    updateOnlyOn: [],\r\n  }).filter((ref) => !isLocal(ref.participant));\r\n  return (\r\n    <div style={{ display: 'none' }}>\r\n      {tracks.map((trackRef) => (\r\n        <AudioTrack key={trackRef.publication.trackSid} {...trackRef} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import { roomInfoObserver } from '@livekit/components-core';\r\nimport type { Room } from 'livekit-client';\r\nimport * as React from 'react';\r\n\r\nimport { useEnsureRoom } from '../context';\r\nimport { useObservableState } from '../hooks/internal/useObservableState';\r\n\r\n/** @public */\r\nexport interface UseRoomInfoOptions {\r\n  room?: Room;\r\n}\r\n\r\n/** @public */\r\nexport function useRoomInfo(options: UseRoomInfoOptions = {}) {\r\n  const room = useEnsureRoom(options.room);\r\n  const infoObserver = React.useMemo(() => roomInfoObserver(room), [room]);\r\n  const { name, metadata } = useObservableState(infoObserver, {\r\n    name: room.name,\r\n    metadata: room.metadata,\r\n  });\r\n\r\n  return { name, metadata };\r\n}\r\n\r\n/** @public */\r\nexport interface RoomNameProps extends React.HTMLAttributes<HTMLSpanElement> {\r\n  childrenPosition?: 'before' | 'after';\r\n}\r\n\r\n/**\r\n * The RoomName component renders the name of the connected LiveKit room inside a span tag.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <RoomName />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport const RoomName = ({\r\n  childrenPosition = 'before',\r\n  children,\r\n  ...htmlAttributes\r\n}: RoomNameProps) => {\r\n  const { name } = useRoomInfo();\r\n\r\n  return (\r\n    <span {...htmlAttributes}>\r\n      {childrenPosition === 'before' && children}\r\n      {name}\r\n      {childrenPosition === 'after' && children}\r\n    </span>\r\n  );\r\n};\r\n","import type { Room } from 'livekit-client';\r\nimport { ConnectionState } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { SpinnerIcon } from '../assets/icons';\r\nimport { mergeProps } from '../utils';\r\nimport { useConnectionState } from './ConnectionState';\r\n\r\n/** @public */\r\nexport function Toast(props: React.HTMLAttributes<HTMLDivElement>) {\r\n  const htmlProps = React.useMemo(() => mergeProps(props, { className: 'lk-toast' }), [props]);\r\n  return <div {...htmlProps}>{props.children}</div>;\r\n}\r\n\r\n/** @public */\r\nexport interface ConnectionStateToastProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  room?: Room;\r\n}\r\n\r\n/** @public */\r\nexport function ConnectionStateToast(props: ConnectionStateToastProps) {\r\n  const [notification, setNotification] = React.useState<React.ReactElement | undefined>(undefined);\r\n  const state = useConnectionState(props.room);\r\n\r\n  React.useEffect(() => {\r\n    switch (state) {\r\n      case ConnectionState.Reconnecting:\r\n        setNotification(\r\n          <>\r\n            <SpinnerIcon className=\"lk-spinner\" /> Reconnecting\r\n          </>,\r\n        );\r\n        break;\r\n      case ConnectionState.Connecting:\r\n        setNotification(\r\n          <>\r\n            <SpinnerIcon className=\"lk-spinner\" /> Connecting\r\n          </>,\r\n        );\r\n        break;\r\n      case ConnectionState.Disconnected:\r\n        setNotification(<>Disconnected</>);\r\n        break;\r\n      default:\r\n        setNotification(undefined);\r\n        break;\r\n    }\r\n  }, [state]);\r\n  return notification ? <Toast className=\"lk-toast-connection-state\">{notification}</Toast> : <></>;\r\n}\r\n","import * as React from 'react';\r\nimport { Track } from 'livekit-client';\r\n\r\nimport { ConnectionQualityIndicator } from './ConnectionQualityIndicator';\r\nimport { ParticipantName } from './ParticipantName';\r\nimport { TrackMutedIndicator } from './TrackMutedIndicator';\r\nimport { useEnsureParticipant } from '../../context';\r\n\r\nimport { AudioVisualizer } from './AudioVisualizer';\r\nimport type { ParticipantTileProps } from './ParticipantTile';\r\nimport { useParticipantTile, ParticipantContextIfNeeded } from './ParticipantTile';\r\nimport { AudioTrack } from './AudioTrack';\r\n\r\n/**\r\n * The ParticipantAudioTile component is the base utility wrapper for displaying a visual representation of a participant.\r\n * This component can be used as a child of the `TileLoop` or independently if a participant is passed as a property.\r\n *\r\n * @example\r\n * ```tsx\r\n * <ParticipantAudioTile />\r\n * ```\r\n * @see `ParticipantLoop` component\r\n * @public\r\n */\r\nexport const ParticipantAudioTile = ({\r\n  participant,\r\n  children,\r\n  source,\r\n  publication,\r\n  disableSpeakingIndicator,\r\n  onParticipantClick,\r\n  ...htmlProps\r\n}: ParticipantTileProps) => {\r\n  const p = useEnsureParticipant(participant);\r\n  const { elementProps } = useParticipantTile({\r\n    participant: p,\r\n    htmlProps,\r\n    disableSpeakingIndicator,\r\n    source: Track.Source.Microphone,\r\n    publication,\r\n    onParticipantClick,\r\n  });\r\n\r\n  return (\r\n    <div style={{ position: 'relative' }} {...elementProps}>\r\n      <ParticipantContextIfNeeded participant={p}>\r\n        {children ?? (\r\n          <>\r\n            <AudioTrack source={source ?? Track.Source.Microphone}></AudioTrack>\r\n            <AudioVisualizer />\r\n            <div className=\"lk-participant-metadata\">\r\n              <div className=\"lk-participant-metadata-item\">\r\n                <TrackMutedIndicator source={Track.Source.Microphone}></TrackMutedIndicator>\r\n                <ParticipantName />\r\n              </div>\r\n              <ConnectionQualityIndicator className=\"lk-participant-metadata-item\" />\r\n            </div>\r\n          </>\r\n        )}\r\n      </ParticipantContextIfNeeded>\r\n    </div>\r\n  );\r\n};\r\n","import type { ChatMessage, ReceivedChatMessage } from '@livekit/components-core';\r\nimport { setupChat } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../context';\r\nimport { useObservableState } from '../hooks/internal/useObservableState';\r\nimport { cloneSingleChild } from '../utils';\r\nimport type { MessageFormatter } from '../components/ChatEntry';\r\nimport { ChatEntry } from '../components/ChatEntry';\r\n\r\nexport type { ChatMessage, ReceivedChatMessage };\r\n\r\n/** @public */\r\nexport interface ChatProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  messageFormatter?: MessageFormatter;\r\n}\r\n\r\n/** @public */\r\nexport function useChat() {\r\n  const room = useRoomContext();\r\n  const [setup, setSetup] = React.useState<ReturnType<typeof setupChat>>();\r\n  const isSending = useObservableState(setup?.isSendingObservable, false);\r\n  const chatMessages = useObservableState(setup?.messageObservable, []);\r\n\r\n  React.useEffect(() => {\r\n    const setupChatReturn = setupChat(room);\r\n    setSetup(setupChatReturn);\r\n    return setupChatReturn.destroy;\r\n  }, [room]);\r\n\r\n  return { send: setup?.send, chatMessages, isSending };\r\n}\r\n\r\n/**\r\n * The Chat component adds a basis chat functionality to the LiveKit room. The messages are distributed to all participants\r\n * in the room. Only users who are in the room at the time of dispatch will receive the message.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <Chat />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function Chat({ messageFormatter, ...props }: ChatProps) {\r\n  const inputRef = React.useRef<HTMLInputElement>(null);\r\n  const ulRef = React.useRef<HTMLUListElement>(null);\r\n  const { send, chatMessages, isSending } = useChat();\r\n\r\n  async function handleSubmit(event: React.FormEvent) {\r\n    event.preventDefault();\r\n    if (inputRef.current && inputRef.current.value.trim() !== '') {\r\n      if (send) {\r\n        await send(inputRef.current.value);\r\n        inputRef.current.value = '';\r\n        inputRef.current.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (ulRef) {\r\n      ulRef.current?.scrollTo({ top: ulRef.current.scrollHeight });\r\n    }\r\n  }, [ulRef, chatMessages]);\r\n\r\n  return (\r\n    <div {...props} className=\"lk-chat\">\r\n      <ul className=\"lk-list lk-chat-messages\" ref={ulRef}>\r\n        {props.children\r\n          ? chatMessages.map((msg, idx) =>\r\n              cloneSingleChild(props.children, {\r\n                entry: msg,\r\n                key: idx,\r\n                messageFormatter,\r\n              }),\r\n            )\r\n          : chatMessages.map((msg, idx, allMsg) => {\r\n              const hideName = idx >= 1 && allMsg[idx - 1].from === msg.from;\r\n              // If the time delta between two messages is bigger than 60s show timestamp.\r\n              const hideTimestamp = idx >= 1 && msg.timestamp - allMsg[idx - 1].timestamp < 60_000;\r\n\r\n              return (\r\n                <ChatEntry\r\n                  key={idx}\r\n                  hideName={hideName}\r\n                  hideTimestamp={hideName === false ? false : hideTimestamp} // If we show the name always show the timestamp as well.\r\n                  entry={msg}\r\n                  messageFormatter={messageFormatter}\r\n                />\r\n              );\r\n            })}\r\n      </ul>\r\n      <form className=\"lk-chat-form\" onSubmit={handleSubmit}>\r\n        <input\r\n          className=\"lk-form-control lk-chat-form-input\"\r\n          disabled={isSending}\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          placeholder=\"Enter a message...\"\r\n        />\r\n        <button type=\"submit\" className=\"lk-button lk-chat-form-button\" disabled={isSending}>\r\n          Send\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import type { ReceivedChatMessage } from '@livekit/components-core';\r\nimport { tokenize, createDefaultGrammar } from '@livekit/components-core';\r\nimport * as React from 'react';\r\n\r\n/** @public */\r\nexport type MessageFormatter = (message: string) => React.ReactNode;\r\n\r\n/**\r\n * ChatEntry composes the HTML div element under the hood, so you can pass all its props.\r\n * These are the props specific to the ChatEntry component:\r\n * @public\r\n */\r\nexport interface ChatEntryProps extends React.HTMLAttributes<HTMLLIElement> {\r\n  /** The chat massage object to display. */\r\n  entry: ReceivedChatMessage;\r\n  /** Hide sender name. Useful when displaying multiple consecutive chat messages from the same person. */\r\n  hideName?: boolean;\r\n  /** Hide message timestamp. */\r\n  hideTimestamp?: boolean;\r\n  /** An optional formatter for the message body. */\r\n  messageFormatter?: MessageFormatter;\r\n}\r\n\r\n/**\r\n * The `ChatEntry` component holds and displays one chat message.\r\n *\r\n * @example\r\n * ```tsx\r\n * <Chat>\r\n *   <ChatEntry />\r\n * </Chat>\r\n * ```\r\n * @see `Chat`\r\n * @public\r\n */\r\nexport function ChatEntry({\r\n  entry,\r\n  hideName = false,\r\n  hideTimestamp = false,\r\n  messageFormatter,\r\n  ...props\r\n}: ChatEntryProps) {\r\n  const formattedMessage = React.useMemo(() => {\r\n    return messageFormatter ? messageFormatter(entry.message) : entry.message;\r\n  }, [entry.message, messageFormatter]);\r\n  const time = new Date(entry.timestamp);\r\n  const locale = navigator ? navigator.language : 'en-US';\r\n\r\n  return (\r\n    <li\r\n      className=\"lk-chat-entry\"\r\n      title={time.toLocaleTimeString(locale, { timeStyle: 'full' })}\r\n      data-lk-message-origin={entry.from?.isLocal ? 'local' : 'remote'}\r\n      {...props}\r\n    >\r\n      {(!hideTimestamp || !hideName) && (\r\n        <span className=\"lk-meta-data\">\r\n          {!hideName && (\r\n            <strong className=\"lk-participant-name\">\r\n              {entry.from?.name ?? entry.from?.identity}\r\n            </strong>\r\n          )}\r\n          {!hideTimestamp && (\r\n            <span className=\"lk-timestamp\">\r\n              {time.toLocaleTimeString(locale, { timeStyle: 'short' })}\r\n            </span>\r\n          )}\r\n        </span>\r\n      )}\r\n      <span className=\"lk-message-body\">{formattedMessage}</span>\r\n    </li>\r\n  );\r\n}\r\n\r\n/** @public */\r\nexport function formatChatMessageLinks(message: string): React.ReactNode {\r\n  return tokenize(message, createDefaultGrammar()).map((tok, i) => {\r\n    if (typeof tok === `string`) {\r\n      return tok;\r\n    } else {\r\n      const content = tok.content.toString();\r\n      const href =\r\n        tok.type === `url`\r\n          ? /^http(s?):\\/\\//.test(content)\r\n            ? content\r\n            : `https://${content}`\r\n          : `mailto:${content}`;\r\n      return (\r\n        <a className=\"lk-chat-link\" key={i} href={href} target=\"_blank\" rel=\"noreferrer\">\r\n          {content}\r\n        </a>\r\n      );\r\n    }\r\n  });\r\n}\r\n","import type { LocalAudioTrack, LocalVideoTrack } from 'livekit-client';\r\nimport { createLocalAudioTrack, createLocalVideoTrack, Track, VideoPresets } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { MediaDeviceMenu } from './MediaDeviceMenu';\r\nimport { useMediaDevices } from '../components/controls/MediaDeviceSelect';\r\nimport { TrackToggle } from '../components/controls/TrackToggle';\r\nimport { log } from '@livekit/components-core';\r\nimport { ParticipantPlaceholder } from '../assets/images';\r\n\r\n/** @public */\r\nexport type LocalUserChoices = {\r\n  username: string;\r\n  videoEnabled: boolean;\r\n  audioEnabled: boolean;\r\n  videoDeviceId: string;\r\n  audioDeviceId: string;\r\n};\r\n\r\nconst DEFAULT_USER_CHOICES = {\r\n  username: '',\r\n  videoEnabled: true,\r\n  audioEnabled: true,\r\n  videoDeviceId: '',\r\n  audioDeviceId: '',\r\n};\r\n\r\n/** @public */\r\nexport type PreJoinProps = Omit<React.HTMLAttributes<HTMLDivElement>, 'onSubmit'> & {\r\n  /** This function is called with the `LocalUserChoices` if validation is passed. */\r\n  onSubmit?: (values: LocalUserChoices) => void;\r\n  /**\r\n   * Provide your custom validation function. Only if validation is successful the user choices are past to the onSubmit callback.\r\n   */\r\n  onValidate?: (values: LocalUserChoices) => boolean;\r\n  onError?: (error: Error) => void;\r\n  /** Prefill the input form with initial values. */\r\n  defaults?: Partial<LocalUserChoices>;\r\n  /** Display a debug window for your convenience. */\r\n  debug?: boolean;\r\n  joinLabel?: string;\r\n  micLabel?: string;\r\n  camLabel?: string;\r\n  userLabel?: string;\r\n};\r\n\r\n/** @public */\r\nfunction usePreviewDevice<T extends LocalVideoTrack | LocalAudioTrack>(\r\n  enabled: boolean,\r\n  deviceId: string,\r\n  kind: 'videoinput' | 'audioinput',\r\n) {\r\n  const [deviceError, setDeviceError] = React.useState<Error | null>(null);\r\n\r\n  const devices = useMediaDevices({ kind });\r\n  const [selectedDevice, setSelectedDevice] = React.useState<MediaDeviceInfo | undefined>(\r\n    undefined,\r\n  );\r\n\r\n  const [localTrack, setLocalTrack] = React.useState<T>();\r\n  const [localDeviceId, setLocalDeviceId] = React.useState<string>(deviceId);\r\n\r\n  React.useEffect(() => {\r\n    setLocalDeviceId(deviceId);\r\n  }, [deviceId]);\r\n\r\n  const createTrack = async (deviceId: string, kind: 'videoinput' | 'audioinput') => {\r\n    try {\r\n      const track =\r\n        kind === 'videoinput'\r\n          ? await createLocalVideoTrack({\r\n              deviceId: deviceId,\r\n              resolution: VideoPresets.h720.resolution,\r\n            })\r\n          : await createLocalAudioTrack({ deviceId });\r\n\r\n      const newDeviceId = await track.getDeviceId();\r\n      if (newDeviceId && deviceId !== newDeviceId) {\r\n        prevDeviceId.current = newDeviceId;\r\n        setLocalDeviceId(newDeviceId);\r\n      }\r\n      setLocalTrack(track as T);\r\n    } catch (e) {\r\n      if (e instanceof Error) {\r\n        setDeviceError(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const switchDevice = async (track: LocalVideoTrack | LocalAudioTrack, id: string) => {\r\n    await track.restartTrack({\r\n      deviceId: id,\r\n    });\r\n    prevDeviceId.current = id;\r\n  };\r\n\r\n  const prevDeviceId = React.useRef(localDeviceId);\r\n\r\n  React.useEffect(() => {\r\n    if (enabled && !localTrack && !deviceError) {\r\n      log.debug('creating track', kind);\r\n      createTrack(localDeviceId, kind);\r\n    }\r\n  }, [enabled, localTrack, deviceError]);\r\n\r\n  // switch camera device\r\n  React.useEffect(() => {\r\n    if (!enabled) {\r\n      if (localTrack) {\r\n        log.debug(`muting ${kind} track`);\r\n        localTrack.mute().then(() => log.debug(localTrack.mediaStreamTrack));\r\n      }\r\n      return;\r\n    }\r\n    if (\r\n      localTrack &&\r\n      selectedDevice?.deviceId &&\r\n      prevDeviceId.current !== selectedDevice?.deviceId\r\n    ) {\r\n      log.debug(`switching ${kind} device from`, prevDeviceId.current, selectedDevice.deviceId);\r\n      switchDevice(localTrack, selectedDevice.deviceId);\r\n    } else {\r\n      log.debug(`unmuting local ${kind} track`);\r\n      localTrack?.unmute();\r\n    }\r\n\r\n    return () => {\r\n      if (localTrack) {\r\n        log.debug(`stopping local ${kind} track`);\r\n        localTrack.stop();\r\n        localTrack.mute();\r\n      }\r\n    };\r\n  }, [localTrack, selectedDevice, enabled, kind]);\r\n\r\n  React.useEffect(() => {\r\n    setSelectedDevice(devices.find((dev) => dev.deviceId === localDeviceId));\r\n  }, [localDeviceId, devices]);\r\n\r\n  return {\r\n    selectedDevice,\r\n    localTrack,\r\n    deviceError,\r\n  };\r\n}\r\n\r\n/**\r\n * The PreJoin prefab component is normally presented to the user before he enters a room.\r\n * This component allows the user to check and select the preferred media device (camera und microphone).\r\n * On submit the user decisions are returned, which can then be passed on to the LiveKitRoom so that the user enters the room with the correct media devices.\r\n *\r\n * @remarks\r\n * This component is independent from the LiveKitRoom component and don't has to be nested inside it.\r\n * Because it only access the local media tracks this component is self contained and works without connection to the LiveKit server.\r\n *\r\n * @example\r\n * ```tsx\r\n * <PreJoin />\r\n * ```\r\n * @public\r\n */\r\nexport const PreJoin = ({\r\n  defaults = {},\r\n  onValidate,\r\n  onSubmit,\r\n  onError,\r\n  debug,\r\n  joinLabel = 'Join Room',\r\n  micLabel = 'Microphone',\r\n  camLabel = 'Camera',\r\n  userLabel = 'Username',\r\n  ...htmlProps\r\n}: PreJoinProps) => {\r\n  const [userChoices, setUserChoices] = React.useState(DEFAULT_USER_CHOICES);\r\n  const [username, setUsername] = React.useState(\r\n    defaults.username ?? DEFAULT_USER_CHOICES.username,\r\n  );\r\n  const [videoEnabled, setVideoEnabled] = React.useState<boolean>(\r\n    defaults.videoEnabled ?? DEFAULT_USER_CHOICES.videoEnabled,\r\n  );\r\n  const [videoDeviceId, setVideoDeviceId] = React.useState<string>(\r\n    defaults.videoDeviceId ?? DEFAULT_USER_CHOICES.videoDeviceId,\r\n  );\r\n  const [audioEnabled, setAudioEnabled] = React.useState<boolean>(\r\n    defaults.audioEnabled ?? DEFAULT_USER_CHOICES.audioEnabled,\r\n  );\r\n  const [audioDeviceId, setAudioDeviceId] = React.useState<string>(\r\n    defaults.audioDeviceId ?? DEFAULT_USER_CHOICES.audioDeviceId,\r\n  );\r\n\r\n  const video = usePreviewDevice(videoEnabled, videoDeviceId, 'videoinput');\r\n\r\n  const videoEl = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    if (videoEl.current) video.localTrack?.attach(videoEl.current);\r\n\r\n    return () => {\r\n      video.localTrack?.detach();\r\n    };\r\n  }, [video.localTrack, videoEl]);\r\n\r\n  const audio = usePreviewDevice(audioEnabled, audioDeviceId, 'audioinput');\r\n\r\n  const [isValid, setIsValid] = React.useState<boolean>();\r\n\r\n  const handleValidation = React.useCallback(\r\n    (values: LocalUserChoices) => {\r\n      if (typeof onValidate === 'function') {\r\n        return onValidate(values);\r\n      } else {\r\n        return values.username !== '';\r\n      }\r\n    },\r\n    [onValidate],\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    if (audio.deviceError) {\r\n      onError?.(audio.deviceError);\r\n    }\r\n  }, [audio.deviceError, onError]);\r\n  React.useEffect(() => {\r\n    if (video.deviceError) {\r\n      onError?.(video.deviceError);\r\n    }\r\n  }, [video.deviceError, onError]);\r\n\r\n  React.useEffect(() => {\r\n    const newUserChoices = {\r\n      username: username,\r\n      videoEnabled: videoEnabled,\r\n      videoDeviceId: video.selectedDevice?.deviceId ?? '',\r\n      audioEnabled: audioEnabled,\r\n      audioDeviceId: audio.selectedDevice?.deviceId ?? '',\r\n    };\r\n    setUserChoices(newUserChoices);\r\n    setIsValid(handleValidation(newUserChoices));\r\n  }, [\r\n    username,\r\n    videoEnabled,\r\n    video.selectedDevice,\r\n    handleValidation,\r\n    audioEnabled,\r\n    audio.selectedDevice,\r\n  ]);\r\n\r\n  function handleSubmit(event: React.FormEvent) {\r\n    event.preventDefault();\r\n    if (handleValidation(userChoices)) {\r\n      if (typeof onSubmit === 'function') {\r\n        onSubmit(userChoices);\r\n      }\r\n    } else {\r\n      log.warn('Validation failed with: ', userChoices);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"lk-prejoin\" {...htmlProps}>\r\n      <div className=\"lk-video-container\">\r\n        {video.localTrack && <video ref={videoEl} width=\"1280\" height=\"720\" />}\r\n        {(!video.localTrack || !videoEnabled) && (\r\n          <div className=\"lk-camera-off-note\">\r\n            <ParticipantPlaceholder />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"lk-button-group-container\">\r\n        <div className=\"lk-button-group audio\">\r\n          <TrackToggle\r\n            initialState={audioEnabled}\r\n            source={Track.Source.Microphone}\r\n            onChange={(enabled) => setAudioEnabled(enabled)}\r\n          >\r\n            {micLabel}\r\n          </TrackToggle>\r\n          <div className=\"lk-button-group-menu\">\r\n            <MediaDeviceMenu\r\n              initialSelection={audio.selectedDevice?.deviceId}\r\n              kind=\"audioinput\"\r\n              onActiveDeviceChange={(_, deviceId) => {\r\n                log.warn('active device chanaged', deviceId);\r\n                setAudioDeviceId(deviceId);\r\n              }}\r\n              disabled={!!!audio.selectedDevice}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"lk-button-group video\">\r\n          <TrackToggle\r\n            initialState={videoEnabled}\r\n            source={Track.Source.Camera}\r\n            onChange={(enabled) => setVideoEnabled(enabled)}\r\n          >\r\n            {camLabel}\r\n          </TrackToggle>\r\n          <div className=\"lk-button-group-menu\">\r\n            <MediaDeviceMenu\r\n              initialSelection={video.selectedDevice?.deviceId}\r\n              kind=\"videoinput\"\r\n              onActiveDeviceChange={(_, deviceId) => {\r\n                log.warn('active device chanaged', deviceId);\r\n                setVideoDeviceId(deviceId);\r\n              }}\r\n              disabled={!!!video.selectedDevice}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <form className=\"lk-username-container\">\r\n        <input\r\n          className=\"lk-form-control\"\r\n          id=\"username\"\r\n          name=\"username\"\r\n          type=\"text\"\r\n          defaultValue={username}\r\n          placeholder={userLabel}\r\n          onChange={(inputEl) => setUsername(inputEl.target.value)}\r\n          autoComplete=\"off\"\r\n        />\r\n        <button\r\n          className=\"lk-button lk-join-button\"\r\n          type=\"submit\"\r\n          onClick={handleSubmit}\r\n          disabled={!isValid}\r\n        >\r\n          {joinLabel}\r\n        </button>\r\n      </form>\r\n\r\n      {debug && (\r\n        <>\r\n          <strong>User Choices:</strong>\r\n          <ul className=\"lk-list\" style={{ overflow: 'hidden', maxWidth: '15rem' }}>\r\n            <li>Username: {`${userChoices.username}`}</li>\r\n            <li>Video Enabled: {`${userChoices.videoEnabled}`}</li>\r\n            <li>Audio Enabled: {`${userChoices.audioEnabled}`}</li>\r\n            <li>Video Device: {`${userChoices.videoDeviceId}`}</li>\r\n            <li>Audio Device: {`${userChoices.audioDeviceId}`}</li>\r\n          </ul>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { computeMenuPosition, wasClickOutside } from '@livekit/components-core';\r\nimport * as React from 'react';\r\nimport { MediaDeviceSelect } from '../components/controls/MediaDeviceSelect';\r\nimport { log } from '@livekit/components-core';\r\n\r\n/** @public */\r\nexport interface MediaDeviceMenuProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  kind?: MediaDeviceKind;\r\n  initialSelection?: string;\r\n  onActiveDeviceChange?: (kind: MediaDeviceKind, deviceId: string) => void;\r\n}\r\n\r\n/**\r\n * The MediaDeviceMenu prefab component is a button that opens a menu that lists\r\n * all media devices and allows the user to select them.\r\n *\r\n * @remarks\r\n * This component is implemented with the `MediaDeviceSelect` LiveKit components.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <MediaDeviceMenu />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport const MediaDeviceMenu = ({\r\n  kind,\r\n  initialSelection,\r\n  onActiveDeviceChange,\r\n  ...props\r\n}: MediaDeviceMenuProps) => {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const [devices, setDevices] = React.useState<MediaDeviceInfo[]>([]);\r\n  const [updateRequired, setUpdateRequired] = React.useState<boolean>(true);\r\n\r\n  const handleActiveDeviceChange = (kind: MediaDeviceKind, deviceId: string) => {\r\n    log.debug('handle device change');\r\n    setIsOpen(false);\r\n    onActiveDeviceChange?.(kind, deviceId);\r\n  };\r\n\r\n  const button = React.useRef<HTMLButtonElement>(null);\r\n  const tooltip = React.useRef<HTMLDivElement>(null);\r\n\r\n  React.useLayoutEffect(() => {\r\n    if (button.current && tooltip.current && (devices || updateRequired)) {\r\n      computeMenuPosition(button.current, tooltip.current).then(({ x, y }) => {\r\n        if (tooltip.current) {\r\n          Object.assign(tooltip.current.style, { left: `${x}px`, top: `${y}px` });\r\n        }\r\n      });\r\n    }\r\n    setUpdateRequired(false);\r\n  }, [button, tooltip, devices, updateRequired]);\r\n\r\n  const handleClickOutside = React.useCallback(\r\n    (event: MouseEvent) => {\r\n      if (!tooltip.current) {\r\n        return;\r\n      }\r\n      if (event.target === button.current) {\r\n        return;\r\n      }\r\n      if (isOpen && wasClickOutside(tooltip.current, event)) {\r\n        setIsOpen(false);\r\n      }\r\n    },\r\n    [isOpen, tooltip, button],\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener<'click'>('click', handleClickOutside);\r\n    window.addEventListener<'resize'>('resize', () => setUpdateRequired(true));\r\n    return () => {\r\n      document.removeEventListener<'click'>('click', handleClickOutside);\r\n      window.removeEventListener<'resize'>('resize', () => setUpdateRequired(true));\r\n    };\r\n  }, [handleClickOutside, setUpdateRequired]);\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        className=\"lk-button lk-button-menu\"\r\n        aria-pressed={isOpen}\r\n        {...props}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        ref={button}\r\n      >\r\n        {props.children}\r\n      </button>\r\n\r\n      <div\r\n        className=\"lk-device-menu\"\r\n        ref={tooltip}\r\n        style={{ visibility: isOpen ? 'visible' : 'hidden' }}\r\n      >\r\n        {kind ? (\r\n          <MediaDeviceSelect\r\n            initialSelection={initialSelection}\r\n            onActiveDeviceChange={(deviceId) => handleActiveDeviceChange(kind, deviceId)}\r\n            onDeviceListChange={setDevices}\r\n            kind={kind}\r\n          />\r\n        ) : (\r\n          <>\r\n            <div className=\"lk-device-menu-heading\">Audio inputs</div>\r\n            <MediaDeviceSelect\r\n              kind=\"audioinput\"\r\n              onActiveDeviceChange={(deviceId) => handleActiveDeviceChange('audioinput', deviceId)}\r\n              onDeviceListChange={setDevices}\r\n            />\r\n            <div className=\"lk-device-menu-heading\">Video inputs</div>\r\n            <MediaDeviceSelect\r\n              kind=\"videoinput\"\r\n              onActiveDeviceChange={(deviceId) => handleActiveDeviceChange('videoinput', deviceId)}\r\n              onDeviceListChange={setDevices}\r\n            />\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import * as React from 'react';\nimport { SVGProps } from 'react';\nconst SvgParticipantPlaceholder = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    width={320}\n    height={320}\n    viewBox=\"0 0 320 320\"\n    preserveAspectRatio=\"xMidYMid meet\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z\"\n      fill=\"white\"\n      fillOpacity={0.25}\n    />\n    <path\n      d=\"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z\"\n      fill=\"white\"\n      fillOpacity={0.25}\n    />\n  </svg>\n);\nexport default SvgParticipantPlaceholder;\n","import * as React from 'react';\r\nimport { LayoutContextProvider } from '../components/layout/LayoutContextProvider';\r\nimport { RoomAudioRenderer } from '../components/RoomAudioRenderer';\r\nimport { ControlBar } from './ControlBar';\r\nimport { FocusLayout, FocusLayoutContainer } from '../components/layout/FocusLayout';\r\nimport { GridLayout } from '../components/layout/GridLayout';\r\nimport type { WidgetState } from '@livekit/components-core';\r\nimport { isEqualTrackRef, isTrackReference, log } from '@livekit/components-core';\r\nimport { ShareLink } from './ShareLink';\r\nimport { Users } from './Users';\r\nimport { ConnectionStateToast } from '../components/Toast';\r\n// import type { MessageFormatter } from '../components/ChatEntry';\r\nimport { RoomEvent, Track } from 'livekit-client';\r\nimport { useTracks } from '../hooks/useTracks';\r\nimport { usePinnedTracks } from '../hooks/usePinnedTracks';\r\nimport { CarouselLayout } from '../components/layout/CarouselLayout';\r\nimport { useCreateLayoutContext } from '../context/layout-context';\r\nimport { ParticipantTile } from '../components';\r\nimport { Toast } from '../components';\r\nimport { UserToggle } from '../components/controls/UserToggle';\r\n\r\n/**\r\n * @public\r\n */\r\nexport interface VideoConferenceProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  // chatMessageFormatter?: MessageFormatter;\r\n  showShareButton: boolean;\r\n  showParticipantButton: boolean;\r\n  leaveButton: string;\r\n}\r\n\r\n/**\r\n * This component is the default setup of a classic LiveKit video conferencing app.\r\n * It provides functionality like switching between participant grid view and focus view.\r\n *\r\n * @remarks\r\n * The component is implemented with other LiveKit components like `FocusContextProvider`,\r\n * `GridLayout`, `ControlBar`, `FocusLayoutContainer` and `FocusLayout`.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <VideoConference />\r\n * <LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function VideoConference({\r\n  showShareButton,\r\n  showParticipantButton,\r\n  leaveButton,\r\n  ...props\r\n}: VideoConferenceProps) {\r\n  const [widgetState, setWidgetState] = React.useState<WidgetState>({\r\n    showChat: null,\r\n  });\r\n\r\n  const [waiting, setWaiting] = React.useState<string | null>(null); // Used to show toast message\r\n  const [waitingRoomCount, setWaitingRoomCount] = React.useState<number>(0);\r\n\r\n  const tracks = useTracks(\r\n    [\r\n      { source: Track.Source.Camera, withPlaceholder: true },\r\n      { source: Track.Source.ScreenShare, withPlaceholder: false },\r\n    ],\r\n    { updateOnlyOn: [RoomEvent.ActiveSpeakersChanged] },\r\n  );\r\n\r\n  const widgetUpdate = (state: WidgetState) => {\r\n    log.debug('updating widget state', state);\r\n    setWidgetState(state);\r\n  };\r\n\r\n  const updateCount = (count: number) => {\r\n    log.debug('count ', count);\r\n    setWaitingRoomCount(count);\r\n  };\r\n\r\n  const setWaitingMessage = (message: string) => {\r\n    if (showParticipantButton) {\r\n      setWaiting(message);\r\n    }\r\n  };\r\n\r\n  const layoutContext = useCreateLayoutContext();\r\n  const screenShareTracks = tracks\r\n    .filter(isTrackReference)\r\n    .filter((track) => track.publication.source === Track.Source.ScreenShare);\r\n\r\n  const focusTrack = usePinnedTracks(layoutContext)?.[0];\r\n  const carouselTracks = tracks.filter((track) => !isEqualTrackRef(track, focusTrack));\r\n\r\n  React.useEffect(() => {\r\n    if (waiting) {\r\n      // Remove toast message after 2 second\r\n      setTimeout(() => {\r\n        setWaiting(null);\r\n      }, 3000);\r\n    }\r\n  }, [waiting]);\r\n\r\n  React.useEffect(() => {\r\n    // if screen share tracks are published, and no pin is set explicitly, auto set the screen share\r\n    if (screenShareTracks.length > 0 && focusTrack === undefined) {\r\n      layoutContext.pin.dispatch?.({ msg: 'set_pin', trackReference: screenShareTracks[0] });\r\n    } else if (\r\n      (screenShareTracks.length === 0 && focusTrack?.source === Track.Source.ScreenShare) ||\r\n      tracks.length <= 1\r\n    ) {\r\n      layoutContext.pin.dispatch?.({ msg: 'clear_pin' });\r\n    }\r\n  }, [\r\n    JSON.stringify(screenShareTracks.map((ref) => ref.publication.trackSid)),\r\n    tracks.length,\r\n    focusTrack?.publication?.trackSid,\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"lk-video-conference\" {...props}>\r\n      <LayoutContextProvider\r\n        value={layoutContext}\r\n        // onPinChange={handleFocusStateChange}\r\n        onWidgetChange={widgetUpdate}\r\n      >\r\n        <div className=\"lk-video-conference-inner\">\r\n          {!focusTrack ? (\r\n            <div className=\"lk-grid-layout-wrapper\">\r\n              <GridLayout tracks={tracks}>\r\n                <ParticipantTile />\r\n              </GridLayout>\r\n            </div>\r\n          ) : (\r\n            <div className=\"lk-focus-layout-wrapper\">\r\n              <FocusLayoutContainer>\r\n                <CarouselLayout tracks={carouselTracks}>\r\n                  <ParticipantTile />\r\n                </CarouselLayout>\r\n                {focusTrack && <FocusLayout track={focusTrack} />}\r\n              </FocusLayoutContainer>\r\n            </div>\r\n          )}\r\n          <ControlBar\r\n            controls={{\r\n              chat: false,\r\n              sharelink: showShareButton,\r\n              users: showParticipantButton,\r\n              leaveButton: leaveButton,\r\n            }}\r\n            waitingRoomCount={waitingRoomCount}\r\n            screenShareTracks={screenShareTracks.length}\r\n          />\r\n        </div>\r\n        <ShareLink style={{ display: widgetState.showChat == 'show_invite' ? 'flex' : 'none' }} />\r\n        <Users\r\n          style={{ display: widgetState.showChat == 'show_users' ? 'flex' : 'none' }}\r\n          onWaitingRoomChange={updateCount}\r\n          setWaiting={setWaitingMessage}\r\n        />\r\n        {waiting ? (\r\n          <Toast className=\"lk-toast-connection-state\">\r\n            <UserToggle>{waiting}</UserToggle>\r\n          </Toast>\r\n        ) : (\r\n          <></>\r\n        )}\r\n      </LayoutContextProvider>\r\n      <RoomAudioRenderer />\r\n      <ConnectionStateToast />\r\n    </div>\r\n  );\r\n}\r\n","import { Track } from 'livekit-client';\r\nimport * as React from 'react';\r\nimport { MediaDeviceMenu } from './MediaDeviceMenu';\r\nimport { DisconnectButton } from '../components/controls/DisconnectButton';\r\nimport { TrackToggle } from '../components/controls/TrackToggle';\r\nimport { StartAudio } from '../components/controls/StartAudio';\r\nimport { ChatIcon, LeaveIcon } from '../assets/icons';\r\nimport { ChatToggle } from '../components/controls/ChatToggle';\r\nimport { ShareLinkToggle } from '../components/controls/ShareLinkToggle';\r\nimport { isMobileBrowser } from '@livekit/components-core';\r\nimport { useLocalParticipantPermissions } from '../hooks';\r\nimport { useMediaQuery } from '../hooks/internal';\r\nimport { useMaybeLayoutContext } from '../context';\r\nimport { UserToggle } from '../components/controls/UserToggle';\r\nimport SvgInviteIcon from '../assets/icons/InviteIcon';\r\nimport SvgUserIcon from '../assets/icons/UsersIcon';\r\n\r\n/** @public */\r\nexport type ControlBarControls = {\r\n  microphone?: boolean;\r\n  camera?: boolean;\r\n  chat?: boolean;\r\n  screenShare?: boolean;\r\n  leave?: boolean;\r\n  sharelink?: boolean;\r\n  users?: boolean;\r\n  leaveButton?: string;\r\n};\r\n\r\n/** @public */\r\nexport type ControlBarProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  variation?: 'minimal' | 'verbose' | 'textOnly';\r\n  controls?: ControlBarControls;\r\n  waitingRoomCount: number;\r\n  screenShareTracks?: number;\r\n};\r\n\r\n/**\r\n * The ControlBar prefab component gives the user the basic user interface\r\n * to control their media devices and leave the room.\r\n *\r\n * @remarks\r\n * This component is build with other LiveKit components like `TrackToggle`,\r\n * `DeviceSelectorButton`, `DisconnectButton` and `StartAudio`.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <ControlBar />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function ControlBar({\r\n  variation,\r\n  controls,\r\n  waitingRoomCount,\r\n  screenShareTracks,\r\n  ...props\r\n}: ControlBarProps) {\r\n  const layoutContext = useMaybeLayoutContext();\r\n\r\n  const [isChatOpen, setIsChatOpen] = React.useState(false);\r\n  const [isShareLinkOpen, setIsShareLinkOpen] = React.useState(false);\r\n  const [isUserOpen, setIsUserOpen] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (layoutContext?.widget.state?.showChat == 'show_chat') {\r\n      setIsChatOpen(layoutContext?.widget.state?.showChat == 'show_chat');\r\n    } else if (layoutContext?.widget.state?.showChat == 'show_invite') {\r\n      setIsShareLinkOpen(layoutContext?.widget.state?.showChat == 'show_invite');\r\n    } else if (layoutContext?.widget.state?.showChat == 'show_users') {\r\n      setIsUserOpen(layoutContext?.widget.state?.showChat == 'show_users');\r\n    }\r\n  }, [layoutContext?.widget.state?.showChat]);\r\n\r\n  const isTooLittleSpace = useMediaQuery(\r\n    `(max-width: ${isChatOpen || isShareLinkOpen || isUserOpen ? 1000 : 760}px)`,\r\n  );\r\n\r\n  const defaultVariation = isTooLittleSpace ? 'minimal' : 'verbose';\r\n  variation ??= defaultVariation;\r\n\r\n  const visibleControls = { leave: true, ...controls };\r\n\r\n  const localPermissions = useLocalParticipantPermissions();\r\n\r\n  if (!localPermissions) {\r\n    visibleControls.camera = false;\r\n    visibleControls.chat = false;\r\n    visibleControls.microphone = false;\r\n    visibleControls.screenShare = false;\r\n    visibleControls.sharelink = false;\r\n    visibleControls.users = false;\r\n  } else {\r\n    visibleControls.camera ??= localPermissions.canPublish;\r\n    visibleControls.microphone ??= localPermissions.canPublish;\r\n    visibleControls.screenShare ??= localPermissions.canPublish;\r\n    visibleControls.chat ??= localPermissions.canPublishData && controls?.chat;\r\n    visibleControls.sharelink ??= localPermissions.canPublishData && controls?.sharelink;\r\n    visibleControls.users ??= localPermissions.canPublishData && controls?.users;\r\n  }\r\n\r\n  const showIcon = React.useMemo(\r\n    () => variation === 'minimal' || variation === 'verbose',\r\n    [variation],\r\n  );\r\n  const showText = React.useMemo(\r\n    () => variation === 'textOnly' || variation === 'verbose',\r\n    [variation],\r\n  );\r\n\r\n  const isMobile = React.useMemo(() => isMobileBrowser(), []);\r\n\r\n  const [isScreenShareEnabled, setIsScreenShareEnabled] = React.useState(false);\r\n\r\n  const onScreenShareChange = (enabled: boolean) => {\r\n    setIsScreenShareEnabled(enabled);\r\n  };\r\n\r\n  return (\r\n    <div className=\"lk-control-bar\" {...props}>\r\n      {visibleControls.microphone && (\r\n        <div className=\"lk-button-group\">\r\n          <TrackToggle source={Track.Source.Microphone} showIcon={showIcon}>\r\n            {showText && 'Microphone'}\r\n          </TrackToggle>\r\n          <div className=\"lk-button-group-menu\">\r\n            <MediaDeviceMenu kind=\"audioinput\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n      {visibleControls.camera && (\r\n        <div className=\"lk-button-group\">\r\n          <TrackToggle source={Track.Source.Camera} showIcon={showIcon}>\r\n            {showText && 'Camera'}\r\n          </TrackToggle>\r\n          <div className=\"lk-button-group-menu\">\r\n            <MediaDeviceMenu kind=\"videoinput\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n      {visibleControls.screenShare && !isMobile && (\r\n        <TrackToggle\r\n          source={Track.Source.ScreenShare}\r\n          captureOptions={{ audio: true, selfBrowserSurface: 'include' }}\r\n          showIcon={showIcon}\r\n          onChange={onScreenShareChange}\r\n          disabled={!isScreenShareEnabled && screenShareTracks !== 0}\r\n          title={\r\n            !isScreenShareEnabled && screenShareTracks !== 0\r\n              ? 'Someone has shared screen'\r\n              : isScreenShareEnabled\r\n              ? \"You're sharing your scrren\"\r\n              : 'You can share your screen'\r\n          }\r\n        >\r\n          {showText && (isScreenShareEnabled ? 'Stop screen share' : 'Share screen')}\r\n        </TrackToggle>\r\n      )}\r\n      {visibleControls.chat && (\r\n        <ChatToggle>\r\n          {showIcon && <ChatIcon />}\r\n          {showText && 'Chat'}\r\n        </ChatToggle>\r\n      )}\r\n      {visibleControls.sharelink && (\r\n        <ShareLinkToggle>\r\n          {showIcon && <SvgInviteIcon />}\r\n          {showText && 'Invite'}\r\n        </ShareLinkToggle>\r\n      )}\r\n      {visibleControls.users && (\r\n        <UserToggle>\r\n          {showIcon && <SvgUserIcon />}\r\n          {showText && 'Participants'}\r\n          {waitingRoomCount !== 0 && <span className=\"waiting-count\">{waitingRoomCount}</span>}\r\n        </UserToggle>\r\n      )}\r\n      {visibleControls.leave && (\r\n        <DisconnectButton>\r\n          {showIcon && <LeaveIcon />}\r\n          {showText && visibleControls.leaveButton}\r\n        </DisconnectButton>\r\n      )}\r\n      <StartAudio label=\"Start Audio\" />\r\n    </div>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { useLayoutContext } from '../../context';\r\nimport { mergeProps } from '../../utils';\r\nimport { setupUserToggle } from '@livekit/components-core';\r\n\r\ninterface UseToggleUserProps {\r\n  props: React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n}\r\n\r\nfunction useToggleUserLink({ props }: UseToggleUserProps) {\r\n  const { dispatch } = useLayoutContext().widget;\r\n  const { className } = React.useMemo(() => setupUserToggle(), []);\r\n\r\n  const mergedProps = React.useMemo(\r\n    () =>\r\n      mergeProps(props, {\r\n        className,\r\n        onClick: () => {\r\n          if (dispatch) dispatch({ msg: 'show_users' });\r\n        },\r\n      }),\r\n    [props, className, dispatch],\r\n  );\r\n\r\n  return { mergedProps };\r\n}\r\n\r\n/** @public */\r\nexport type UserToggleProps = React.ButtonHTMLAttributes<HTMLButtonElement>;\r\n\r\n/**\r\n * The ShareLinkToggle component toggles the visibility of the chat component.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <ToggleShareLink />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function UserToggle(props: UserToggleProps) {\r\n  const { mergedProps } = useToggleUserLink({ props });\r\n\r\n  return <button {...mergedProps}>{props.children}</button>;\r\n}\r\n","import * as React from 'react';\r\nimport type { SVGProps } from 'react';\r\n\r\nconst SvgInviteIcon = (props: SVGProps<SVGSVGElement>) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={25} height={20} fill=\"none\" {...props}>\r\n    <path\r\n      d=\"M20.33 3.66996C20.1408 3.48213 19.9035 3.35008 19.6442 3.28833C19.3849 3.22659 19.1135 3.23753 18.86 3.31996L4.23 8.19996C3.95867 8.28593 3.71891 8.45039 3.54099 8.67255C3.36307 8.89471 3.25498 9.16462 3.23037 9.44818C3.20576 9.73174 3.26573 10.0162 3.40271 10.2657C3.5397 10.5152 3.74754 10.7185 4 10.85L10.07 13.85L13.07 19.94C13.1906 20.1783 13.3751 20.3785 13.6029 20.518C13.8307 20.6575 14.0929 20.7309 14.36 20.73H14.46C14.7461 20.7089 15.0192 20.6023 15.2439 20.4239C15.4686 20.2456 15.6345 20.0038 15.72 19.73L20.67 5.13996C20.7584 4.88789 20.7734 4.6159 20.7132 4.35565C20.653 4.09541 20.5201 3.85762 20.33 3.66996ZM4.85 9.57996L17.62 5.31996L10.53 12.41L4.85 9.57996ZM14.43 19.15L11.59 13.47L18.68 6.37996L14.43 19.15Z\"\r\n      fill=\"#ffffff\"\r\n    />\r\n  </svg>\r\n);\r\nexport default SvgInviteIcon;\r\n","import * as React from 'react';\r\nimport type { SVGProps } from 'react';\r\n\r\nconst SvgUserIcon = (props: SVGProps<SVGSVGElement>) => (\r\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width={20} height={20} fill=\"none\" {...props}>\r\n    <path\r\n      id=\"Vector\"\r\n      d=\"M17 20C17 18.3431 14.7614 17 12 17C9.23858 17 7 18.3431 7 20M21 17.0004C21 15.7702 19.7659 14.7129 18 14.25M3 17.0004C3 15.7702 4.2341 14.7129 6 14.25M18 10.2361C18.6137 9.68679 19 8.8885 19 8C19 6.34315 17.6569 5 16 5C15.2316 5 14.5308 5.28885 14 5.76389M6 10.2361C5.38625 9.68679 5 8.8885 5 8C5 6.34315 6.34315 5 8 5C8.76835 5 9.46924 5.28885 10 5.76389M12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z\"\r\n      stroke=\"#ffffff\"\r\n      strokeWidth=\"2\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      fill=\"#ffffff\"\r\n    />\r\n  </svg>\r\n);\r\nexport default SvgUserIcon;\r\n","/* eslint-disable prettier/prettier */\r\nimport * as React from 'react';\r\nimport { useRoomContext } from '../context';\r\nimport { Toast } from '../components';\r\n\r\nexport function useGetLink() {\r\n  const host = getHostUrl();\r\n  const link = `${host}/join/${useGetRoom().name}`;\r\n  return { link: link };\r\n}\r\n\r\nexport function useGetRoom() {\r\n  const room = useRoomContext();\r\n  return room;\r\n}\r\n\r\nexport function getHostUrl() {\r\n  return typeof window ? window.location.origin : '';\r\n}\r\n\r\nexport type User = {\r\n  user_id: string;\r\n  user_name: string;\r\n  full_name: string;\r\n  designation: string;\r\n  ext_no: string;\r\n  invited: boolean\r\n};\r\n\r\n/**\r\n * The Chat component adds a basis chat functionality to the LiveKit room. The messages are distributed to all participants\r\n * in the room. Only users who are in the room at the time of dispatch will receive the message.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <Chat />\r\n * </LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function ShareLink({ ...props }: any) {\r\n  const inputRef = React.useRef<HTMLInputElement>(null);\r\n  const ulRef = React.useRef<HTMLUListElement>(null);\r\n  const { link } = useGetLink();\r\n  const [users, setUsers] = React.useState<User[]>([]);\r\n  const [searched, setSearched] = React.useState<User[]>([]);\r\n  const [showToast, setShowToast] = React.useState<boolean>(false);\r\n  // const [ checkedValues, setCheckedValues ] = React.useState<string[]>([]);\r\n  const room = useGetRoom();\r\n\r\n  async function searchUsers(key: string) {\r\n    if (key) {\r\n      const filteredData = users.filter(function (item) {\r\n        return (item.user_name.toLocaleLowerCase()).startsWith(key.toLocaleLowerCase());\r\n      });\r\n      setSearched(filteredData)\r\n    } else {\r\n      setSearched(users)\r\n    }\r\n  }\r\n\r\n  async function getUsers() {\r\n    const data = {\r\n      method: \"POST\", // *GET, POST, PUT, DELETE, etc.\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        meeting_id: room.name,\r\n      })\r\n    };\r\n    fetch(`${getHostUrl()}/api/get-users`, data).then(async (res) => {\r\n      if (res.ok) {\r\n        const body = await res.json();\r\n        setUsers(body);\r\n        setSearched(body);\r\n      } else {\r\n        throw Error('Error fetching server url, check server logs');\r\n      }\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (room.name) {\r\n      getUsers();\r\n    }\r\n  }, [room.name]);\r\n\r\n  async function handleSubmit(event: React.FormEvent) {\r\n    event.preventDefault();\r\n    if (inputRef.current && inputRef.current.value.trim() !== '') {\r\n      searchUsers(inputRef.current.value);\r\n    }\r\n  }\r\n\r\n  async function handleInvite(user: User) {\r\n    const data = {\r\n      method: \"POST\", // *GET, POST, PUT, DELETE, etc.\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        \"users\": JSON.stringify([user]), // body data type must match \"Content-Type\" header\r\n        \"message\": link,\r\n        \"meeting_id\": room.name,\r\n      })\r\n    };\r\n\r\n    fetch(`/api/invite-user`, data).then(async (res) => {\r\n      if (res.ok) {\r\n        user.invited = true;\r\n        // 1. Find the user with the provided id\r\n        const currentUserIndex = users.findIndex((item) => item.user_id === user.user_id);\r\n        // 2. Mark the user as invited\r\n        const updatedUser = { ...users[currentUserIndex], invited: true };\r\n        // 3. Update the todo list with the updated todo\r\n        const newUsers = [\r\n          ...users.slice(0, currentUserIndex),\r\n          updatedUser,\r\n          ...users.slice(currentUserIndex + 1)\r\n        ];\r\n        setUsers(newUsers);\r\n\r\n        // 1. Find the user with the provided id\r\n        const currentSearchedIndex = searched.findIndex((item) => item.user_id === user.user_id);\r\n        // 2. Mark the todo as complete\r\n        const updatedSearched = { ...searched[currentSearchedIndex], invited: true };\r\n        // 3. Update the todo list with the updated todo\r\n        const newSearched = [\r\n          ...searched.slice(0, currentSearchedIndex),\r\n          updatedSearched,\r\n          ...searched.slice(currentSearchedIndex + 1)\r\n        ];\r\n        setSearched(newSearched);\r\n      } else {\r\n        throw Error('Error fetching server url, check server logs');\r\n      }\r\n    });\r\n  }\r\n\r\n  async function handleCopy() {\r\n    navigator.clipboard.writeText(link);\r\n    setShowToast(true);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (showToast) {\r\n      setTimeout(() => {\r\n        setShowToast(false);\r\n      }, 3000)\r\n    }\r\n  }, [showToast]);\r\n\r\n  React.useEffect(() => {\r\n    if (ulRef) {\r\n      ulRef.current?.scrollTo({ top: ulRef.current.scrollHeight });\r\n    }\r\n  }, [ulRef, users]);\r\n\r\n  return (\r\n    <div {...props} className=\"lk-chat lk-sharelink\">\r\n      <form className=\"lk-chat-form\">\r\n        <input className=\"lk-form-control lk-chat-form-input\" type=\"text\" value={link} readOnly />\r\n        <button type=\"button\" className=\"lk-button lk-chat-form-button\" onClick={handleCopy}>\r\n          Copy\r\n        </button>\r\n      </form>\r\n\r\n      {showToast ? <Toast className=\"lk-toast-connection-state\">Copied</Toast> : <></>}\r\n\r\n      <form className=\"lk-chat-form\" onSubmit={handleSubmit}>\r\n        <input\r\n          className=\"lk-form-control lk-chat-form-input\"\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          placeholder=\"Search User...\"\r\n          onKeyUp={handleSubmit}\r\n        />\r\n      </form>\r\n\r\n      {searched.length > 0 ? (\r\n        <ul className=\"lk-list lk-chat-messages\" ref={ulRef}>\r\n          {searched.map((user, index) => {\r\n            return (\r\n              <li key={index} className=\"lk-chat-entry\">\r\n                <div>\r\n                  <span className=\"lk-message-body\">{user.full_name} {user.ext_no ? ` - ${user.ext_no}` : ''}</span>\r\n                  <span className=\"lk-message-body lk-message-text\">{user.designation}</span>\r\n                </div>\r\n\r\n                <button type=\"button\" onClick={() => handleInvite(user)} className={\"lk-button lk-chat-form-button\" + (user.invited ? ' invited' : '')}>\r\n                  {user.invited ? 'Invited' : 'Invite'}\r\n                </button>\r\n              </li>\r\n            )\r\n          })}\r\n        </ul>\r\n      ) : (\r\n        ''\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/* eslint-disable prettier/prettier */\r\nimport * as React from 'react';\r\nimport { useParticipants } from '../hooks';\r\nimport { ParticipantLoop } from '../components';\r\nimport { ParticipantList } from '../components/participant/ParticipantList';\r\nimport { useRoomContext } from '../context';\r\n// import { RoomEvent } from 'livekit-client';\r\nimport type { LocalUserChoices } from './PreJoin';\r\nimport { ToggleSwitch } from '../components/ToggleSwitch';\r\nimport SvgApproveIcon from '../assets/icons/ApproveIcon';\r\nimport SvgRejectIcon from '../assets/icons/RejectIcon';\r\n/** @public */\r\nexport interface UserProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  onWaitingRoomChange: (state: number) => void;\r\n  setWaiting: (state: string) => void;\r\n}\r\nexport type UserDataProps = {\r\n  /** The participants to loop over.\r\n   * If not provided, the participants from the current room context are used.\r\n   **/\r\n  participants: LocalUserChoices[];\r\n};\r\n\r\nexport function Users({ onWaitingRoomChange, ...props }: UserProps) {\r\n  const ulRef = React.useRef<HTMLUListElement>(null);\r\n  const participants = useParticipants(); // List of joined participant\r\n  const [waitingRoom, setWaitingRoom] = React.useState<any[]>([]); // List of users in waiting room\r\n  const [toggleWaiting, setToggleWaiting] = React.useState<boolean>(true); // Enable / Disable waiting room\r\n\r\n  const room = useRoomContext();\r\n  // const decoder = new TextDecoder();\r\n\r\n  // async function muteAllMircophone() {\r\n  // room.participants.forEach((participant) => {\r\n  //   const p = room.localParticipant;\r\n  // });\r\n  // await p.setCameraEnabled(false);\r\n  // }\r\n\r\n  /**\r\n   * Get list of users in waiting room\r\n   */\r\n  async function usersList() {\r\n    const postData = {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        meeting_id: room.name,\r\n      }),\r\n    };\r\n    fetch(`/api/get-waiting-room-users`, postData).then(async (res) => {\r\n      if (res.ok) {\r\n        const body = await res.json();\r\n        setWaitingRoom(body.users);\r\n      } else {\r\n        throw Error('Error fetching server url, check server logs');\r\n      }\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    // Updating list user count in waiting room to parent component\r\n    if (room.name) {\r\n      usersList();\r\n    }\r\n  }, [room.name]);\r\n  \r\n  React.useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      usersList();\r\n      // setWaiting(`Users are in waiting room`)\r\n    }, 2000)\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  \r\n  React.useEffect(() => {\r\n    // Updating list user count in waiting room to parent component\r\n    onWaitingRoomChange(waitingRoom.length);\r\n  }, [onWaitingRoomChange, waitingRoom]);\r\n\r\n  React.useEffect(() => {\r\n    if (ulRef) {\r\n      ulRef.current?.scrollTo({ top: ulRef.current.scrollHeight });\r\n    }\r\n  }, [ulRef]);\r\n\r\n  /**\r\n   * Accept or reject user from waiting room\r\n   *\r\n   * @param username Username\r\n   * @param type Accept or Reject\r\n   */\r\n  async function admitUser(identity: string, type: string) {\r\n    const postData = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ room: room.name, identity: identity, type: type }),\r\n    };\r\n    \r\n    fetch(`/api/accept-request`, postData).then(async (res) => {\r\n      if (res.status) {\r\n        const remaining = waitingRoom.filter(\r\n          (item: any) => item.identity !== identity,\r\n        );\r\n        setWaitingRoom(remaining);\r\n      } else {\r\n        throw Error('Error fetching server url, check server logs');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Approve all participant from waiting room\r\n   *\r\n   */\r\n  async function approveAll() {\r\n    const postData = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ meeting_id: room.name }),\r\n    };\r\n    \r\n    fetch(`/api/approve-all-participant`, postData).then(async (res) => {\r\n      if (res.status) {\r\n        setWaitingRoom([]);\r\n      } else {\r\n        throw Error('Error fetching server url, check server logs');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle waiting room to enable or disable\r\n   *\r\n   * @param checked\r\n   */\r\n  const onToggleWaitingChange = (checked: any) => {\r\n    const postData = {\r\n      method: 'POST',\r\n      body: JSON.stringify({ room: room.name, waiting_room: checked }),\r\n    };\r\n\r\n    fetch(`/api/set-waitingroom`, postData).then(async (res) => {\r\n      if (res.status) {\r\n        setToggleWaiting(checked);\r\n      } else {\r\n        throw Error('Error fetching server url, check server logs');\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div {...props} className=\"lk-chat lk-users\">\r\n      <div className=\"lk-waitinroom\">\r\n        <div className=\"tl-waitingroom-heading\">\r\n          <h3>Waiting Room</h3>\r\n\r\n          <div className=\"tl-toggle-switch\">\r\n            <ToggleSwitch\r\n              id=\"toggleSwitch\"\r\n              checked={toggleWaiting}\r\n              onChange={onToggleWaitingChange}\r\n              name={'toggleSwitch'}\r\n              optionLabels={['On', 'Off']}\r\n              small={false}\r\n              disabled={false}\r\n            />\r\n          </div>\r\n\r\n          {toggleWaiting && waitingRoom.length\r\n            ? \r\n              <button\r\n                className=\"lk-button tl-info tl-approve\"\r\n                onClick={() => approveAll()}\r\n              >\r\n                Approve All\r\n              </button> \r\n            :\r\n            \"\"\r\n          }\r\n        </div>\r\n\r\n        {waitingRoom.map((item: any) => (\r\n          <div className=\"tl-participant-li\" key={item.username}>\r\n            <div className=\"lk-participant-metadata\">\r\n              <div className=\"lk-participant-metadata-item\">{item.username}</div>\r\n              <div className=\"display-flex\">\r\n                <button \r\n                  className=\"lk-button lk-waiting-room lk-success\"\r\n                  onClick={() => admitUser(item.identity, 'accepted')}\r\n                >\r\n                  <SvgApproveIcon />\r\n                </button>\r\n                <button\r\n                  className=\"lk-button lk-waiting-room lk-danger\"\r\n                  onClick={() => admitUser(item.identity, 'rejected')}\r\n                >\r\n                  <SvgRejectIcon />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"lk-participants\">\r\n        <div className=\"tl-participants-heading\">\r\n          <h3>Participants  <span>({participants.length})</span></h3>\r\n        </div>\r\n        {participants?.length ? (\r\n          <ParticipantLoop participants={participants}>\r\n            <ParticipantList />\r\n          </ParticipantLoop>\r\n        ) : (\r\n          <div>\r\n            <h5>No Participants</h5>\r\n          </div>\r\n        )}\r\n      </div>      \r\n    </div>\r\n  );\r\n}\r\n","import * as React from 'react';\r\nimport { Track } from 'livekit-client';\r\nimport type { Participant, TrackPublication } from 'livekit-client';\r\nimport type { ParticipantClickEvent } from '@livekit/components-core';\r\n// import { ConnectionQualityIndicator } from './ConnectionQualityIndicator';\r\nimport { ParticipantName } from './ParticipantName';\r\nimport { useEnsureParticipant } from '../../context';\r\nimport { useParticipantTile, ParticipantContextIfNeeded } from './ParticipantTile';\r\nimport { TrackMutedIndicator } from './TrackMutedIndicator';\r\n\r\n/** @public */\r\nexport type ParticipantListProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  disableSpeakingIndicator?: boolean;\r\n  participant?: Participant;\r\n  audit_source?: Track.Source.Microphone;\r\n  video_source?: Track.Source.Camera;\r\n  publication?: TrackPublication;\r\n  onParticipantClick?: (event: ParticipantClickEvent) => void;\r\n};\r\n\r\n/**\r\n * The ParticipantList component is the base utility wrapper for displaying a visual representation of a participant.\r\n * This component can be used as a child of the `TileLoop` or independently if a participant is passed as a property.\r\n *\r\n * @example\r\n * ```tsx\r\n * <ParticipantList />\r\n * ```\r\n * @see `ParticipantList` component\r\n * @public\r\n */\r\nexport const ParticipantList = ({\r\n  participant,\r\n  children,\r\n  publication,\r\n  disableSpeakingIndicator,\r\n  onParticipantClick,\r\n  ...htmlProps\r\n}: ParticipantListProps) => {\r\n  const p = useEnsureParticipant(participant);\r\n  const { elementProps } = useParticipantTile({\r\n    participant: p,\r\n    htmlProps,\r\n    disableSpeakingIndicator,\r\n    source: Track.Source.Microphone,\r\n    publication,\r\n    onParticipantClick,\r\n  });\r\n\r\n  return (\r\n    <div style={{ position: 'relative' }} {...elementProps}>\r\n      <ParticipantContextIfNeeded participant={p}>\r\n        {children ?? (\r\n          <>\r\n            <div className=\"lk-participant-metadata\">\r\n              <div className=\"lk-participant-metadata-item\">\r\n                <ParticipantName />\r\n              </div>\r\n              <div className=\"display-flex\">\r\n                <TrackMutedIndicator\r\n                  source={Track.Source.Microphone}\r\n                  show={'always'}\r\n                ></TrackMutedIndicator>\r\n                <TrackMutedIndicator\r\n                  source={Track.Source.Camera}\r\n                  show={'always'}\r\n                ></TrackMutedIndicator>\r\n              </div>\r\n              {/* <ConnectionQualityIndicator className=\"lk-participant-metadata-item\" /> */}\r\n            </div>\r\n          </>\r\n        )}\r\n      </ParticipantContextIfNeeded>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\n// Set optionLabels for rendering.\r\nexport type ToggleSwitchProps = {\r\n  optionLabels: ['Yes', 'No'];\r\n};\r\n\r\nexport type ToggleSwitchPropTypes = {\r\n  id: string;\r\n  checked: boolean;\r\n  name: string;\r\n  onChange: (checked: boolean) => void;\r\n  optionLabels: string[];\r\n  small: boolean;\r\n  disabled: boolean;\r\n};\r\n\r\n/*\r\nToggle Switch Component\r\nNote: id, checked and onChange are required for ToggleSwitch component to function. The props name, small, disabled\r\nand optionLabels are optional.\r\nUsage: <ToggleSwitch id=\"id\" checked={value} onChange={checked => setValue(checked)}} />\r\n*/\r\n\r\nexport const ToggleSwitch = ({\r\n  id,\r\n  name,\r\n  checked,\r\n  onChange,\r\n  optionLabels,\r\n  small,\r\n  disabled,\r\n}: ToggleSwitchPropTypes) => {\r\n  function handleKeyPress(e: React.KeyboardEvent<HTMLLabelElement>) {\r\n    if (e.keyCode !== 32) return;\r\n\r\n    e.preventDefault();\r\n    onChange(!checked);\r\n  }\r\n\r\n  return (\r\n    <div className={'toggle-switch' + (small ? ' small-switch' : '')}>\r\n      <input\r\n        type=\"checkbox\"\r\n        name={name}\r\n        className=\"toggle-switch-checkbox\"\r\n        id={id}\r\n        checked={checked}\r\n        onChange={(e) => onChange(e.target.checked)}\r\n        disabled={disabled}\r\n      />\r\n      {id ? (\r\n        <label\r\n          className=\"toggle-switch-label\"\r\n          tabIndex={disabled ? -1 : 1}\r\n          onKeyDown={(e) => handleKeyPress(e)}\r\n          htmlFor={id}\r\n        >\r\n          <span\r\n            className={\r\n              disabled ? 'toggle-switch-inner toggle-switch-disabled' : 'toggle-switch-inner'\r\n            }\r\n            data-yes={optionLabels[0]}\r\n            data-no={optionLabels[1]}\r\n            tabIndex={-1}\r\n          />\r\n          <span\r\n            className={\r\n              disabled ? 'toggle-switch-switch toggle-switch-disabled' : 'toggle-switch-switch'\r\n            }\r\n            tabIndex={-1}\r\n          />\r\n        </label>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport type { SVGProps } from 'react';\r\n\r\nconst SvgApproveIcon = (props: SVGProps<SVGSVGElement>) => (\r\n  <svg\r\n    width=\"15\"\r\n    height=\"11\"\r\n    viewBox=\"0 0 17 13\"\r\n    fill=\"none\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    {...props}\r\n  >\r\n    <path\r\n      d=\"M6.44587 12.3181C6.35059 12.3854 6.21756 12.3816 6.13768 12.2966C5.87427 12.0164 5.62193 11.7435 5.3696 11.4706C3.87981 9.87788 2.38394 8.27905 0.900223 6.68022C0.225256 5.95072 0.316468 4.8747 1.09481 4.30933C1.73937 3.83516 2.60284 3.91419 3.18052 4.52211C4.17777 5.57381 5.16286 6.63767 6.14794 7.69545C6.18071 7.73039 6.21348 7.76612 6.24709 7.80263C6.35423 7.919 6.5347 7.92887 6.64657 7.81703V7.81703C8.25798 6.30939 9.86939 4.80175 11.4869 3.30019C12.399 2.4491 13.305 1.60409 14.2232 0.765159C15.1293 -0.0676915 16.5461 0.357852 16.8258 1.54938C16.9717 2.1573 16.7832 2.68011 16.3211 3.11173C15.0928 4.25462 13.8705 5.39751 12.6483 6.5404C11.4565 7.65289 10.2646 8.76539 9.0728 9.87788C8.20696 10.689 7.33509 11.4881 6.4692 12.2991C6.46178 12.3061 6.45416 12.3123 6.44587 12.3181V12.3181Z\"\r\n      fill=\"white\"\r\n    />\r\n  </svg>\r\n);\r\nexport default SvgApproveIcon;\r\n","import * as React from 'react';\r\nimport type { SVGProps } from 'react';\r\n\r\nconst SvgRejectIcon = (props: SVGProps<SVGSVGElement>) => (\r\n  <svg\r\n    width=\"15\"\r\n    height=\"11\"\r\n    viewBox=\"0 0 13 13\"\r\n    fill=\"none\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    {...props}\r\n  >\r\n    <path\r\n      d=\"M6.70508 8.22715C6.03352 8.9047 5.39471 9.54143 4.74772 10.1863C4.16624 10.7659 3.59295 11.3455 3.01147 11.9169C2.61836 12.3006 2.15154 12.4231 1.62739 12.2271C1.136 12.0475 0.849362 11.672 0.775653 11.1578C0.710135 10.7006 0.8985 10.3251 1.2179 10.0067C2.33991 8.88837 3.46191 7.77001 4.58392 6.65165C4.66582 6.57001 4.76409 6.51287 4.87875 6.43124C4.7559 6.30063 4.6822 6.21899 4.60849 6.14553C3.47829 5.01084 2.33991 3.88431 1.20971 2.74962C0.677375 2.21085 0.620047 1.49248 1.0623 0.953708C1.57826 0.325139 2.43819 0.292486 3.05242 0.896565C4.18262 2.01493 5.31281 3.14146 6.43482 4.27614C6.51672 4.35778 6.57404 4.45574 6.66413 4.57002C6.78698 4.45574 6.86888 4.38227 6.94259 4.3088C8.08097 3.17411 9.21117 2.03942 10.3496 0.912892C10.931 0.333302 11.7336 0.325139 12.2578 0.863913C12.7655 1.3782 12.7655 2.16187 12.2414 2.7088C11.6845 3.28839 11.103 3.85166 10.5297 4.42308C9.88273 5.06798 9.22755 5.72104 8.55598 6.39042C8.64607 6.48838 8.71978 6.56185 8.79349 6.64348C9.92368 7.77001 11.0457 8.89654 12.1759 10.0231C12.5199 10.3659 12.7082 10.7659 12.6099 11.2639C12.5117 11.7537 12.2168 12.0884 11.75 12.2516C11.2668 12.4231 10.8164 12.3169 10.4396 11.9741C10.0711 11.6312 9.72713 11.272 9.37496 10.921C8.49046 10.0231 7.61415 9.14143 6.70508 8.22715Z\"\r\n      fill=\"white\"\r\n    />\r\n  </svg>\r\n);\r\nexport default SvgRejectIcon;\r\n","import * as React from 'react';\r\nimport { ControlBar } from './ControlBar';\r\n\r\nimport { ParticipantAudioTile } from '../components/participant/ParticipantAudioTile';\r\nimport { LayoutContextProvider } from '../components/layout/LayoutContextProvider';\r\nimport type { WidgetState } from '@livekit/components-core';\r\nimport { Chat } from './Chat';\r\nimport { ParticipantLoop } from '../components';\r\nimport { useParticipants } from '../hooks';\r\n\r\n/** @public */\r\nexport type AudioConferenceProps = React.HTMLAttributes<HTMLDivElement>;\r\n\r\n/**\r\n * This component is the default setup of a classic LiveKit audio conferencing app.\r\n * It provides functionality like switching between participant grid view and focus view.\r\n *\r\n * @remarks\r\n * The component is implemented with other LiveKit components like `FocusContextProvider`,\r\n * `GridLayout`, `ControlBar`, `FocusLayoutContainer` and `FocusLayout`.\r\n *\r\n * @example\r\n * ```tsx\r\n * <LiveKitRoom>\r\n *   <AudioConference />\r\n * <LiveKitRoom>\r\n * ```\r\n * @public\r\n */\r\nexport function AudioConference({ ...props }: AudioConferenceProps) {\r\n  const [widgetState, setWidgetState] = React.useState<WidgetState>({\r\n    showChat: null,\r\n  });\r\n  const participants = useParticipants();\r\n\r\n  return (\r\n    <LayoutContextProvider onWidgetChange={setWidgetState}>\r\n      <div className=\"lk-audio-conference\" {...props}>\r\n        <div className=\"lk-audio-conference-stage\">\r\n          <ParticipantLoop participants={participants}>\r\n            <ParticipantAudioTile />\r\n          </ParticipantLoop>\r\n        </div>\r\n        <ControlBar\r\n          controls={{ microphone: true, screenShare: false, camera: false, chat: true }}\r\n          waitingRoomCount={0}\r\n        />\r\n        {widgetState.showChat == 'show_chat' && <Chat />}\r\n      </div>\r\n    </LayoutContextProvider>\r\n  );\r\n}\r\n"],"mappings":"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","names":["React","mergeProps","React","React","React","React","mergeProps","React","React","React","mergeProps","React","mergeProps","ConnectionState","React","mergeProps","ConnectionState","React","React","React","React","React","React","React","React","React","React","React","React","React","mergeProps","React","mergeProps","React","mergeProps","React","React","React","React","React","React","_a","React","React","Track","React","ConnectionQuality","ConnectionQuality","mergeProps","React","mergeProps","React","_a","mergeProps","React","React","React","query","React","React","React","React","React","log","Track","React","publication","log","mergeProps","Track","React","log","React","React","participantPermissionObserver","participantPermissionObserver","React","React","React","React","log","React","log","log","Track","React","Track","trackReferences","participants","log","React","React","React","React","log","log","React","mergeProps","Track","mergeProps","React","isTrackReference","React","isTrackReference","React","React","mergeProps","React","log","React","log","log","ConnectionState","React","log","mergeProps","ConnectionState","RemoteAudioTrack","Track","React","Track","RemoteAudioTrack","React","isLocal","Track","React","Track","isLocal","React","ConnectionState","React","mergeProps","ConnectionState","React","Track","Track","React","React","_a","_b","_a","Track","React","React","log","kind","log","log","React","deviceId","kind","log","_a","_b","_c","_d","Track","React","Track","React","React","mergeProps","React","React","_a","_b","_c","_d","_e","_f","Track","isTrackReference","log","React","_a","React","React","Track","Track","React","React","React","_a","RoomEvent","Track","_a","_b","Track","RoomEvent","log","isTrackReference","React"]}